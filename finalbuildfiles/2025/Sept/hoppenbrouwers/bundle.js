(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,i(a.key),a)}}function i(e){var i=function(e){if("object"!=t(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(i)?i:i+""}function n(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(n=function(){return!!t})()}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}var s=function(){function i(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=function(e,i,o){return i=a(i),function(e,i){if(i&&("object"==t(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,n()?Reflect.construct(i,o||[],a(e).constructor):i.apply(e,o))}(this,i,["Game"])).rows=0,e.columns=0,e.pieceWidth=0,e.pieceHeight=0,e.pieces=null,e.spacer=null,e.slideSpeed=300,e.slideEase="power3",e.iterations=6,e.shuffleSpeed=200,e.shuffleEase="power1",e.lastMove=null,e.photo="",e.slices=[],e.action=0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(i,Phaser.Scene),s=i,(r=[{key:"create",value:function(){var t=this;this.canvasWidth=this.scale.width,this.canvasHeight=this.scale.height,this.timeout=null,this.background=this.add.image(this.canvasWidth/2,this.canvasHeight/2,"background").setOrigin(.5),this.logo2=this.add.image(0,0,"logo2").setOrigin(0),this.cta2=this.add.image(this.canvasWidth/2,this.canvasHeight,"cta2").setOrigin(.5,1).setScale(1).setAlpha(1).setDepth(100),this.cta2.setInteractive(),this.cta2.on("pointerdown",this.ctaclick,this),this.txt11=this.add.text(this.canvasWidth/2,.135*this.canvasHeight+50,"Los de Puzzel op",{fontSize:48,fill:"#fff",fontFamily:"PoppinsBold",align:"center"}).setOrigin(.5).setAlpha(0),this.tweens.add({targets:this.txt11,alpha:1,y:.135*this.canvasHeight,duration:500,delay:200,ease:"linear"}),this.txt12=this.add.text(this.canvasWidth/2,.2*this.canvasHeight+50,"Swipe om de afbeelding te herstellen",{fontSize:30,fill:"#fff",fontFamily:"PoppinsRegular",align:"center"}).setOrigin(.5).setAlpha(0),this.tweens.add({targets:this.txt12,alpha:1,y:.2*this.canvasHeight,duration:500,delay:200,ease:"linear"}),this.boxInside=this.add.image(this.canvasWidth/2,.55*this.canvasHeight,"box-inside").setScale(.6).setOrigin(.5),window.solve=function(){t.nextRound()},this.startPuzzle(Math.random()>.5?"pic1":"pic2",3,3),this.timeout=setTimeout((function(){t.pieces.each((function(e){t.tweens.add({targets:e,alpha:0,duration:1e3,delay:3e3,ease:"linear"})})),t.tweens.add({targets:[t.txt11,t.txt12],alpha:1,duration:50,delay:10,ease:"linear",onComplete:function(){t.tweens.add({targets:[t.txt11,t.txt12],alpha:0,duration:500,delay:3e3,ease:"linear",onComplete:function(){t.fnfetchAPI(window.trackingURL+"PLAYABLE TIMEOUT"),t.finalPage()}})}})}),3e4)}},{key:"startPuzzle",value:function(t,e,i){var n=this;this.photo=t,this.rows=e,this.columns=i;var a=this.textures.getFrame(t),o=.968*a.width*.9,s=.968*a.height*.9,r=o/e,c=s/i;this.pieceWidth=r,this.pieceHeight=c,this.pieces?this.pieces.removeAll(!0):this.pieces=this.add.container(this.boxInside.x-this.boxInside.displayWidth/2+.05*this.boxInside.displayWidth,this.boxInside.y-this.boxInside.displayHeight/2+.05*this.boxInside.displayHeight),this.slices&&(this.slices.forEach((function(t){return t.destroy()})),this.slices=[]);for(var l=0,h=0;h<this.columns;h++)for(var u=function(){var e=r+4,i=c+4,a=n.textures.createCanvas("slice".concat(l),e,i),o=a.getContext("2d"),s=d*r,u=h*c,f=n.textures.get(t).getSourceImage();o.fillStyle="#FFFFFF",o.fillRect(0,0,e,i),o.drawImage(f,s,u,r,c,2,2,r,c),a.refresh(),n.slices.push(a);var p=n.add.image(d*r,h*c,"slice".concat(l));p.setOrigin(0,0),p.x-=2,p.y-=2,p.setData({row:d,column:h,correctRow:d,correctColumn:h}),p.setInteractive(),p.on("pointerdown",(function(){return n.checkPiece(p)})),n.pieces.add(p),l++},d=0;d<this.rows;d++)u();this.spacer=this.pieces.getAt(this.pieces.length-1),this.spacer.alpha=0,this.lastMove=null,setTimeout((function(){n.shufflePieces()}),1e3)}},{key:"shufflePieces",value:function(){var t=[],e=this.spacer.data.get("column"),i=this.spacer.data.get("row");switch(e>0&&this.lastMove!==Phaser.DOWN&&t.push(Phaser.UP),e<this.columns-1&&this.lastMove!==Phaser.UP&&t.push(Phaser.DOWN),i>0&&this.lastMove!==Phaser.RIGHT&&t.push(Phaser.LEFT),i<this.rows-1&&this.lastMove!==Phaser.LEFT&&t.push(Phaser.RIGHT),this.lastMove=Phaser.Utils.Array.GetRandom(t),this.lastMove){case Phaser.UP:this.swapPiece(i,e-1);break;case Phaser.DOWN:this.swapPiece(i,e+1);break;case Phaser.LEFT:this.swapPiece(i-1,e);break;case Phaser.RIGHT:this.swapPiece(i+1,e)}}},{key:"swapPiece",value:function(t,e){var i=this.getPiece(t,e),n=this.spacer,a=n.x,o=n.y;if(i.data.values.row=n.data.values.row,i.data.values.column=n.data.values.column,n.data.values.row=t,n.data.values.column=e,n.setPosition(i.x,i.y),0===this.shuffleSpeed)i.setPosition(a,o),this.iterations>0?(this.iterations--,this.shufflePieces()):this.startPlay();else{var s=this.tweens.add({targets:i,x:a,y:o,duration:this.shuffleSpeed,ease:this.shuffleEase});this.iterations>0?(this.iterations--,s.on("complete",this.shufflePieces,this)):s.on("complete",this.startPlay,this)}}},{key:"getPiece",value:function(t,e){for(var i=0;i<this.pieces.length;i++){var n=this.pieces.getAt(i);if(n.data.get("row")===t&&n.data.get("column")===e)return n}return null}},{key:"startPlay",value:function(){this.action=0}},{key:"checkPiece",value:function(t){if(0===this.action){var e=this.spacer;t.data.values.row===e.data.values.row?e.data.values.column===t.data.values.column-1?(t.data.values.column--,e.data.values.column++,e.y+=this.pieceHeight,this.slidePiece(t,t.x,t.y-this.pieceHeight)):e.data.values.column===t.data.values.column+1&&(t.data.values.column++,e.data.values.column--,e.y-=this.pieceHeight,this.slidePiece(t,t.x,t.y+this.pieceHeight)):t.data.values.column===e.data.values.column&&(e.data.values.row===t.data.values.row-1?(t.data.values.row--,e.data.values.row++,e.x+=this.pieceWidth,this.slidePiece(t,t.x-this.pieceWidth,t.y)):e.data.values.row===t.data.values.row+1&&(t.data.values.row++,e.data.values.row--,e.x-=this.pieceWidth,this.slidePiece(t,t.x+this.pieceWidth,t.y)))}}},{key:"slidePiece",value:function(t,e,i){var n=this;this.action=1,this.sound.play("move"),this.tweens.add({targets:t,x:e,y:i,duration:this.slideSpeed,ease:this.slideEase,onComplete:function(){return n.tweenOver()}})}},{key:"tweenOver",value:function(){var t=this;console.log("tweenOver");var e=!1;if(this.pieces.each((function(t){t.data.values.correctRow===t.data.values.row&&t.data.values.correctColumn===t.data.values.column||(e=!0)})),e)this.action=0;else{this.sound.play("win"),this.launchConfetti();var i=this;this.tweens.add({targets:this.spacer,alpha:1,duration:2*this.slideSpeed,ease:"linear",onComplete:function(){t.pieces.each((function(e){t.tweens.add({targets:e,alpha:0,duration:1e3,delay:3e3,ease:"linear"})})),t.tweens.add({targets:[i.txt11,i.txt12],alpha:0,duration:500,delay:0,ease:"linear"}),t.txt13=t.add.text(t.canvasWidth/2,.28*t.canvasHeight,"Sluit je vandaag nog aan bij \nHoppenbrouwers en vorm de \ntoekomst van technologie",{fontSize:30,fill:"#fff",fontFamily:"PoppinsRegular",align:"center"}).setOrigin(.5).setAlpha(0),t.tweens.add({targets:i.txt13,alpha:1,y:.175*i.canvasHeight,duration:500,delay:100,ease:"linear",onComplete:function(){t.tweens.add({targets:i.txt13,alpha:0,y:.175*i.canvasHeight,duration:500,delay:3e3,ease:"linear",onComplete:function(){t.finalPage()}})}})}})}}},{key:"finalPage",value:function(){var t=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=null),console.log("finalPage"),this.fnfetchAPI(window.trackingURL+"ON FINAL PAGE"),this.logo=this.add.image(this.canvasWidth/2,.25*this.canvasHeight,"logo").setOrigin(.5).setAlpha(0),this.txt14=this.add.text(this.canvasWidth/2,this.canvasHeight/2+30,"Hop, maak de switch!",{fontSize:48,fill:"#fff",fontFamily:"PoppinsBold",align:"center"}).setOrigin(.5).setAlpha(0),this.txt15=this.add.text(this.canvasWidth/2,.6*this.canvasHeight+30,"En ga verder in de techniek",{fontSize:30,fill:"#fff",fontFamily:"PoppinsRegular",align:"center"}).setOrigin(.5).setAlpha(0),this.btn2=this.add.image(this.canvasWidth/2,.75*this.canvasHeight+30,"btn2").setOrigin(.5).setScale(1.25).setAlpha(0),this.tweens.add({targets:this.cta2,y:this.canvasHeight+this.cta2.displayHeight,alpha:0,duration:500,ease:"Power2",onComplete:function(){t.cta2.destroy()}}),this.animateFinalElements()}},{key:"animateFinalElements",value:function(){var t=this;this.tweens.add({targets:this.logo,alpha:1,y:.3*this.canvasHeight,duration:400,ease:"Back.easeOut",onComplete:function(){t.tweens.add({targets:t.txt14,alpha:1,y:t.canvasHeight/2,duration:400,ease:"Power2",onComplete:function(){t.tweens.add({targets:t.txt15,alpha:1,y:.6*t.canvasHeight,duration:400,ease:"Power2",onComplete:function(){t.tweens.add({targets:t.btn2,alpha:1,y:.75*t.canvasHeight,duration:400,ease:"Back.easeOut",onComplete:function(){t.pulseFinalButton()}})}})}})}})}},{key:"pulseFinalButton",value:function(){this.tweens.add({targets:this.btn2,scaleX:1.3,scaleY:1.3,duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.input.on("pointerdown",this.ctaclick,this)}},{key:"launchConfetti",value:function(){confetti({particleCount:150,spread:100,origin:{y:.5},colors:["#F6F6F6","#E04522","#0A5BC5","#FFFFFF"]}),setTimeout((function(){confetti({particleCount:100,angle:60,spread:80,origin:{x:0,y:.6},colors:["#F6F6F6","#E04522","#0A5BC5","#FFFFFF"]})}),250),setTimeout((function(){confetti({particleCount:100,angle:120,spread:80,origin:{x:1,y:.6},colors:["#F6F6F6","#E04522","#0A5BC5","#FFFFFF"]})}),400),this.fnfetchAPI(window.trackingURL+"PLAYABLE COMPLETE")}},{key:"ctaclick",value:function(){console.log("ctaclick"),this.fnfetchAPI(window.trackingURL+"CTA CLICKED"),window.open(window.landingPageUrl,"_blank")}},{key:"fnfetchAPI",value:function(t){fetch(t).then((function(t){return t.text()})).then((function(t){})).catch((function(t){}))}},{key:"nextRound",value:function(){var t=this;console.log("nextRound"),this.reveal=this.add.image(this.pieces.x,this.pieces.y,void 0).setOrigin(0,0),this.reveal.alpha=0,this.tweens.add({targets:this.reveal,alpha:1,duration:1e3,onComplete:function(){console.log("nextRound onComplete ",t.photo)}})}}])&&e(s.prototype,r),Object.defineProperty(s,"prototype",{writable:!1}),s;var s,r}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var e=function(t){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:e+""}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h=function(){return!!t})()}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}var f=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,i){return e=u(e),function(t,e){if(e&&("object"==r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,h()?Reflect.construct(e,i||[],u(t).constructor):e.apply(t,i))}(this,t,["MainMenu"])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(t,Phaser.Scene),e=t,(i=[{key:"create",value:function(){var t=this;this.canvasWidth=this.scale.width,this.canvasHeight=this.scale.height,this.background=this.add.image(this.canvasWidth/2,this.canvasHeight/2,"background").setOrigin(.5),this.logo2=this.add.image(0,0,"logo2").setOrigin(0).setAlpha(0),this.logo=this.add.image(this.canvasWidth/2,.25*this.canvasHeight,"logo").setOrigin(.5).setAlpha(0),this.txt1=this.add.text(this.canvasWidth/2,this.canvasHeight/2+30,"Klaar voor een \nuitdaging?",{fontSize:48,fill:"#fff",fontFamily:"PoppinsBold",align:"center"}).setOrigin(.5).setAlpha(0),this.btn1=this.add.image(this.canvasWidth/2,.75*this.canvasHeight,"btn1").setOrigin(.5).setScale(1.25).setAlpha(0),this.cta2=this.add.image(this.canvasWidth/2,this.canvasHeight,"cta2").setOrigin(.5,1).setScale(1).setAlpha(0),this.cta2.y=this.canvasHeight+this.cta2.displayHeight,this.tweens.add({targets:this.cta2,y:this.canvasHeight,alpha:1,duration:500,ease:"Power2",onComplete:function(){t.cta2.setAlpha(1)}}),this.cta2.setInteractive(),this.cta2.on("pointerdown",this.ctaclick,this),this.animateElements()}},{key:"ctaclick",value:function(){console.log("ctaclick"),this.fnfetchAPI(window.trackingURL+"CTA CLICKED"),window.open(window.landingPageUrl,"_blank")}},{key:"animateElements",value:function(){var t=this;this.tweens.add({targets:this.logo2,alpha:1,duration:250,ease:"Power2",onComplete:function(){t.tweens.add({targets:t.logo,alpha:1,y:.3*t.canvasHeight,duration:400,ease:"Back.easeOut",onComplete:function(){t.tweens.add({targets:t.txt1,alpha:1,y:t.canvasHeight/2,duration:400,ease:"Power2",onComplete:function(){t.tweens.add({targets:t.btn1,alpha:1,y:.7*t.canvasHeight,duration:400,ease:"Back.easeOut",onComplete:function(){t.pulseButton(),t.input.once("pointerdown",(function(){t.tweens.add({targets:[t.btn1,t.txt1,t.txt2,t.logo],alpha:0,duration:250,ease:"Power2",onComplete:function(){t.fnfetchAPI(window.trackingURL+"PLAYABLE START"),t.scene.start("Game")}})}))}})}})}})}})}},{key:"pulseButton",value:function(){this.tweens.add({targets:this.btn1,scaleX:1.3,scaleY:1.3,duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}},{key:"fnfetchAPI",value:function(t){fetch(t).then((function(t){return t.text()})).then((function(t){})).catch((function(t){}))}},{key:"startGame",value:function(){var t=this;this.tweens.add({targets:[this.logo,this.logo2,this.txt1,this.btn1],alpha:0,duration:300,ease:"Power2",onComplete:function(){t.scene.start("Game")}})}}])&&c(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var e=function(t){if("object"!=p(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=p(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:e+""}function y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(y=function(){return!!t})()}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}var b=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,i){return e=m(e),function(t,e){if(e&&("object"==p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,y()?Reflect.construct(e,i||[],m(t).constructor):e.apply(t,i))}(this,t,["Preloader"])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(t,Phaser.Scene),e=t,(i=[{key:"preload",value:function(){this.load.setPath(window.baseurl+"assets/"),this.load.image("background","background.png"),this.load.image("box-inside","box-inside.png"),this.load.image("pic1","pic1.png"),this.load.image("pic2","pic2.png"),this.load.image("btn1","btn1.png"),this.load.image("btn2","btn2.png"),this.load.image("logo","logo.png"),this.load.image("logo2","logo2.png"),this.load.image("cta2","cta2.png"),this.load.setPath(window.baseurl+"assets/audio"),this.load.audio("move",["move.m4a","move.wav","move.ogg"]),this.load.audio("win",["win.m4a","win.wav","win.ogg"])}},{key:"create",value:function(){this.scene.start("MainMenu")}}])&&g(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i}(),P={type:Phaser.AUTO,width:640,height:960,parent:"phaser-example",background:"transparent",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},fps:{target:60,forceSetTimeOut:!0},transparent:!0,scene:[b,f,s]},O=new Phaser.Game(P);window.addEventListener("resize",(function(){O.isBooted&&setTimeout((function(){O.scale.refresh()}),100)}))})();