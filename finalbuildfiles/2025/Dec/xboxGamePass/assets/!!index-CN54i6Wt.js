var t=Object.getOwnPropertyNames;import{p as e}from"./phaser-C2RWnc_5.js";var s,a,i=(s={"assets/index-RIMIJBdc.js"(t,s){function a(t,e){const s=/Mobi|Android/i.test(navigator.userAgent),a=/iPhone/i.test(navigator.userAgent),i=window.innerWidth,n=window.innerHeight;let o,r;o=t.game.canvas.width,r=t.game.canvas.height;const h=document.getElementsByTagName("canvas")[0],l=Math.abs(parseFloat(h.style.marginTop||0))/i*o+(a?130:0),c=Math.abs(parseFloat(h.style.marginLeft||0))/n*r;let d=n/(i+2*c)*.85;return s?{canvasWidth:o,canvasHeight:r,scaleFactor:d,topMarginOffset:l,leftMarginOffsetPercentage:c,isMobileDevice:s,isIphoneDevice:a}:(d=1.4,{canvasWidth:o,canvasHeight:r,scaleFactor:d,topMarginOffset:0,leftMarginOffsetPercentage:0})}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var i={option:0};const n={createGenericScrollContainer(t){const e={itemsArray:[],containerName:"scrollContainer",x:.5*this.canvasWidth,y:.5*this.canvasHeight,width:.15*this.canvasWidth,height:.5*this.canvasHeight,bgColor:16777215,bgAlpha:.9,isVertical:!1,itemScale:.7*this.scaleFactor,itemSpacing:.05,startPadding:10,endPadding:10,onItemSelected:null,...t},{containerName:s,isVertical:a,x:i,y:n,width:o,height:r,bgColor:h,bgAlpha:l}=e;console.log(`[ScrollContainer] Creating: ${s}`),this[`${s}Settings`]={...e};const c=this.add.rectangle(i,n,o,r,h,l);c.setOrigin(a?.5:0,a?0:.5);const d=this.make.graphics();d.fillStyle(h),a?d.fillRect(i-o/2,n,o,r):d.fillRect(i,n-r/2,o,r);const u=this.add.container(i,n);u.setMask(d.createGeometryMask());const{items:g,contentSize:p}=this._createScrollItems(u,e);this._initScrollState(s,p,g,d,c);const m=a?new Phaser.Geom.Rectangle(-o/2,0,o,r):new Phaser.Geom.Rectangle(0,-r/2,o,r);return u.setInteractive(m,Phaser.Geom.Rectangle.Contains),this._setupDragHandlers(u,e),u.alpha=0,this.tweens.add({targets:u,alpha:1,duration:300}),this[s]=u,u},_createScrollItems(t,e){const{itemsArray:s,isVertical:a,itemScale:i,itemSpacing:n,containerName:o,onItemSelected:r,startPadding:h,endPadding:l}=e,c=[];let d=h;const u=a?this.canvasHeight*n:this.canvasWidth*n;for(let g=0;g<s.length;g++){const e=s[g],n=this.add.image(a?0:d,a?d:0,e);n.setOrigin(a?.5:0,a?0:.5),n.setScale(i),n.setInteractive(),n.on("pointerdown",(()=>{this[`${o}ItemClicked`]=!0})),n.on("pointerup",(()=>{this[`${o}ItemClicked`]&&!this[`${o}HasDragged`]&&r&&r(n,g),this[`${o}ItemClicked`]=!1})),t.add(n),c.push(n),d+=(a?n.displayHeight:n.displayWidth)+u}return{items:c,contentSize:d+l}},_initScrollState(t,e,s,a,i){this[`${t}IsScrolling`]=!1,this[`${t}StartPos`]=0,this[`${t}Velocity`]=0,this[`${t}LastPointerPos`]=0,this[`${t}PointerMoveTime`]=0,this[`${t}ContentSize`]=e,this[`${t}Items`]=s,this[`${t}Mask`]=a,this[`${t}Bg`]=i,this[`${t}Tween`]=null,this[`${t}DragStart`]=!1,this[`${t}StartContainerPos`]=0,this[`${t}HasDragged`]=!1,this[`${t}ItemClicked`]=!1,this[`${t}Enabled`]=!0},setScrollEnabled(t,e){console.log(`[ScrollMixin] setScrollEnabled(${t}, ${e})`),this[`${t}Enabled`]=e,e||(this[`${t}IsScrolling`]=!1,this[`${t}Tween`]&&(this[`${t}Tween`].stop(),this[`${t}Tween`]=null))},_setupDragHandlers(t,e){const{containerName:s,isVertical:a,x:i,y:n,width:o,height:r}=e,h=a?"y":"x",l=a?"y":"x",c=a?"height":"width",d=()=>{const t=this[`${s}ContentSize`],o=e[c],r=a?n:i;return{minPos:r-Math.max(0,t-o),maxPos:r}},u=()=>{if(!this[`${s}IsScrolling`])return;this[`${s}IsScrolling`]=!1;const a=this[`${s}Velocity`],{minPos:i,maxPos:n}=d(),o=this[`${s}ContentSize`],r=e[c];if(Math.abs(a)>.1){const e=t[h]+100*a,l=Phaser.Math.Clamp(e,Math.min(i,n),n);this[`${s}Tween`]=this.tweens.add({targets:t,[h]:l,duration:500*Math.min(1,Math.abs(a)),ease:"Cubic.out",onComplete:()=>this._checkBounceBack(t,s,i,n,o,r,h)})}else this._checkBounceBack(t,s,i,n,o,r,h)},g={pointerdown:e=>{this[`${s}Enabled`]?(t=>{const e=a?{minX:i-o/2,maxX:i+o/2,minY:n,maxY:n+r}:{minX:i,maxX:i+o,minY:n-r/2,maxY:n+r/2};return t.x>=e.minX&&t.x<=e.maxX&&t.y>=e.minY&&t.y<=e.maxY})(e)?(console.log("[ScrollMixin] pointerdown - starting scroll"),this[`${s}Tween`]&&(this[`${s}Tween`].stop(),this[`${s}Tween`]=null),this[`${s}IsScrolling`]=!0,this[`${s}StartPos`]=e[l],this[`${s}LastPointerPos`]=e[l],this[`${s}PointerMoveTime`]=this.time.now,this[`${s}StartContainerPos`]=t[h],this[`${s}Velocity`]=0,this[`${s}DragStart`]=!0,this[`${s}HasDragged`]=!1):console.log("[ScrollMixin] pointerdown blocked - pointer out of bounds"):console.log("[ScrollMixin] pointerdown blocked - container disabled")},pointermove:a=>{if(!this[`${s}Enabled`]||!this[`${s}IsScrolling`])return;const i=this.time.now,n=i-this[`${s}PointerMoveTime`];if(n>0){const t=a[l]-this[`${s}LastPointerPos`];this[`${s}Velocity`]=t/n*15}this[`${s}LastPointerPos`]=a[l],this[`${s}PointerMoveTime`]=i;const o=a[l]-this[`${s}StartPos`];let r=this[`${s}StartContainerPos`]+o;Math.abs(o)>10&&(this[`${s}DragStart`]=!1,this[`${s}HasDragged`]=!0);const{minPos:u,maxPos:g}=d(),p=this[`${s}ContentSize`],m=e[c];r>g?r=g+.3*(r-g):r<u&&p>m&&(r=u-.3*(u-r)),t[h]=r},pointerup:u,pointerout:u};this.input.on("pointerdown",g.pointerdown),this.input.on("pointermove",g.pointermove),this.input.on("pointerup",g.pointerup),this.input.on("pointerout",g.pointerout),this[`${s}EventHandlers`]=g},_checkBounceBack(t,e,s,a,i,n,o){const r=t[o];let h=null;r>a?h=a:i>n&&r<s&&(h=s),null!==h&&(this[`${e}Tween`]=this.tweens.add({targets:t,[o]:h,duration:300,ease:"Back.out"}))}};s={},function t(e,s,a,i){var n=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o="function"==typeof Path2D&&"function"==typeof DOMMatrix;function r(){}function h(t){var a=s.exports.Promise,i=void 0!==a?a:e.Promise;return"function"==typeof i?new i(t):(t(r,r),null)}var l,c,d,u,g,p,m=function(t,e){return{transform:function(s){if(t)return s;if(e.has(s))return e.get(s);var a=new OffscreenCanvas(s.width,s.height);return a.getContext("2d").drawImage(s,0,0),e.set(s,a),a},clear:function(){e.clear()}}}(function(){if(!e.OffscreenCanvas)return!1;try{var t=new OffscreenCanvas(1,1),s=t.getContext("2d");s.fillRect(0,0,1,1);var a=t.transferToImageBitmap();s.createPattern(a,"no-repeat")}catch(i){return!1}return!0}(),new Map),f=(d=Math.floor(1e3/60),u={},g=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(l=function(t){var e=Math.random();return u[e]=requestAnimationFrame((function s(a){g===a||g+d-1<a?(g=a,delete u[e],t()):u[e]=requestAnimationFrame(s)})),e},c=function(t){u[t]&&cancelAnimationFrame(u[t])}):(l=function(t){return setTimeout(t,d)},c=function(t){return clearTimeout(t)}),{frame:l,cancel:c}),y=function(){var e,s,i={};return function(){if(e)return e;if(!a&&n){var o=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{e=new Worker(URL.createObjectURL(new Blob([o])))}catch(r){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("ðŸŽŠ Could not load worker",r),null}!function(t){function e(e,s){t.postMessage({options:e||{},callback:s})}t.init=function(e){var s=e.transferControlToOffscreen();t.postMessage({canvas:s},[s])},t.fire=function(a,n,o){if(s)return e(a,null),s;var r=Math.random().toString(36).slice(2);return s=h((function(n){function h(e){e.data.callback===r&&(delete i[r],t.removeEventListener("message",h),s=null,m.clear(),o(),n())}t.addEventListener("message",h),e(a,r),i[r]=h.bind(null,{data:{callback:r}})}))},t.reset=function(){for(var e in t.postMessage({reset:!0}),i)i[e](),delete i[e]}}(e)}return e}}(),w={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v(t,e,s){return function(t,e){return e?e(t):t}(t&&null!=t[e]?t[e]:w[e],s)}function b(t){return t<0?0:Math.floor(t)}function x(t){return parseInt(t,16)}function C(t){return t.map(S)}function S(t){var e=String(t).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:x(e.substring(0,2)),g:x(e.substring(2,4)),b:x(e.substring(4,6))}}function T(t){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight}function P(t){var e=t.getBoundingClientRect();t.width=e.width,t.height=e.height}function I(t,s){var r,l=!t,c=!!v(s||{},"resize"),d=!1,u=v(s,"disableForReducedMotion",Boolean),g=n&&v(s||{},"useWorker")?y():null,p=l?T:P,w=!(!t||!g||!t.__confetti_initialized),x="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function S(e,s,n){for(var l,c,d,u,g=v(e,"particleCount",b),y=v(e,"angle",Number),w=v(e,"spread",Number),x=v(e,"startVelocity",Number),S=v(e,"decay",Number),T=v(e,"gravity",Number),P=v(e,"drift",Number),I=v(e,"colors",C),M=v(e,"ticks",Number),k=v(e,"shapes"),F=v(e,"scalar"),H=!!v(e,"flat"),A=function(t){var e=v(t,"origin",Object);return e.x=v(e,"x",Number),e.y=v(e,"y",Number),e}(e),O=g,B=[],E=t.width*A.x,G=t.height*A.y;O--;)B.push((void 0,void 0,c=(l={x:E,y:G,angle:y,spread:w,startVelocity:x,color:I[O%I.length],shape:k[(u=k.length,Math.floor(Math.random()*(u-0))+0)],ticks:M,decay:S,gravity:T,drift:P,scalar:F,flat:H}).angle*(Math.PI/180),d=l.spread*(Math.PI/180),{x:l.x,y:l.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*l.startVelocity+Math.random()*l.startVelocity,angle2D:-c+(.5*d-Math.random()*d),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:l.color,shape:l.shape,tick:0,totalTicks:l.ticks,decay:l.decay,drift:l.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*l.gravity,ovalScalar:.6,scalar:l.scalar,flat:l.flat}));return r?r.addFettis(B):(r=function(t,e,s,n,r){var l,c,d=e.slice(),u=t.getContext("2d"),g=h((function(e){function h(){l=c=null,u.clearRect(0,0,n.width,n.height),m.clear(),r(),e()}l=f.frame((function e(){!a||n.width===i.width&&n.height===i.height||(n.width=t.width=i.width,n.height=t.height=i.height),n.width||n.height||(s(t),n.width=t.width,n.height=t.height),u.clearRect(0,0,n.width,n.height),(d=d.filter((function(t){return function(t,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var s=e.tick++/e.totalTicks,a=e.x+e.random*e.tiltCos,i=e.y+e.random*e.tiltSin,n=e.wobbleX+e.random*e.tiltCos,r=e.wobbleY+e.random*e.tiltSin;if(t.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-s)+")",t.beginPath(),o&&"path"===e.shape.type&&"string"==typeof e.shape.path&&Array.isArray(e.shape.matrix))t.fill(function(t,e,s,a,i,n,o){var r=new Path2D(t),h=new Path2D;h.addPath(r,new DOMMatrix(e));var l=new Path2D;return l.addPath(h,new DOMMatrix([Math.cos(o)*i,Math.sin(o)*i,-Math.sin(o)*n,Math.cos(o)*n,s,a])),l}(e.shape.path,e.shape.matrix,e.x,e.y,.1*Math.abs(n-a),.1*Math.abs(r-i),Math.PI/10*e.wobble));else if("bitmap"===e.shape.type){var h=Math.PI/10*e.wobble,l=.1*Math.abs(n-a),c=.1*Math.abs(r-i),d=e.shape.bitmap.width*e.scalar,u=e.shape.bitmap.height*e.scalar,g=new DOMMatrix([Math.cos(h)*l,Math.sin(h)*l,-Math.sin(h)*c,Math.cos(h)*c,e.x,e.y]);g.multiplySelf(new DOMMatrix(e.shape.matrix));var p=t.createPattern(m.transform(e.shape.bitmap),"no-repeat");p.setTransform(g),t.globalAlpha=1-s,t.fillStyle=p,t.fillRect(e.x-d/2,e.y-u/2,d,u),t.globalAlpha=1}else if("circle"===e.shape)t.ellipse?t.ellipse(e.x,e.y,Math.abs(n-a)*e.ovalScalar,Math.abs(r-i)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):function(t,e,s,a,i,n,o,r){t.save(),t.translate(e,s),t.rotate(n),t.scale(a,i),t.arc(0,0,1,0,r,void 0),t.restore()}(t,e.x,e.y,Math.abs(n-a)*e.ovalScalar,Math.abs(r-i)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if("star"===e.shape)for(var f=Math.PI/2*3,y=4*e.scalar,w=8*e.scalar,v=e.x,b=e.y,x=5,C=Math.PI/x;x--;)v=e.x+Math.cos(f)*w,b=e.y+Math.sin(f)*w,t.lineTo(v,b),f+=C,v=e.x+Math.cos(f)*y,b=e.y+Math.sin(f)*y,t.lineTo(v,b),f+=C;else t.moveTo(Math.floor(e.x),Math.floor(e.y)),t.lineTo(Math.floor(e.wobbleX),Math.floor(i)),t.lineTo(Math.floor(n),Math.floor(r)),t.lineTo(Math.floor(a),Math.floor(e.wobbleY));return t.closePath(),t.fill(),e.tick<e.totalTicks}(u,t)}))).length?l=f.frame(e):h()})),c=h}));return{addFettis:function(t){return d=d.concat(t),g},canvas:t,promise:g,reset:function(){l&&f.cancel(l),c&&c()}}}(t,B,p,s,n),r.promise)}function I(s){var a=u||v(s,"disableForReducedMotion",Boolean),i=v(s,"zIndex",Number);if(a&&x)return h((function(t){t()}));l&&r?t=r.canvas:l&&!t&&(t=function(t){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=t,e}(i),document.body.appendChild(t)),c&&!w&&p(t);var n={width:t.width,height:t.height};function o(){if(g){var e={getBoundingClientRect:function(){if(!l)return t.getBoundingClientRect()}};return p(e),void g.postMessage({resize:{width:e.width,height:e.height}})}n.width=n.height=null}function m(){r=null,c&&(d=!1,e.removeEventListener("resize",o)),l&&t&&(document.body.contains(t)&&document.body.removeChild(t),t=null,w=!1)}return g&&!w&&g.init(t),w=!0,g&&(t.__confetti_initialized=!0),c&&!d&&(d=!0,e.addEventListener("resize",o,!1)),g?g.fire(s,n,m):S(s,n,m)}return I.reset=function(){g&&g.reset(),r&&r.reset()},I}function M(){return p||(p=I(null,{useWorker:!0,resize:!0})),p}s.exports=function(){return M().apply(this,arguments)},s.exports.reset=function(){M().reset()},s.exports.create=I,s.exports.shapeFromPath=function(t){if(!o)throw new Error("path confetti are not supported in this browser");var e,s;"string"==typeof t?e=t:(e=t.path,s=t.matrix);var a=new Path2D(e),i=document.createElement("canvas").getContext("2d");if(!s){for(var n,r,h=1e3,l=h,c=h,d=0,u=0,g=0;g<h;g+=2)for(var p=0;p<h;p+=2)i.isPointInPath(a,g,p,"nonzero")&&(l=Math.min(l,g),c=Math.min(c,p),d=Math.max(d,g),u=Math.max(u,p));n=d-l,r=u-c;var m=Math.min(10/n,10/r);s=[m,0,0,m,-Math.round(n/2+l)*m,-Math.round(r/2+c)*m]}return{type:"path",path:e,matrix:s}},s.exports.shapeFromText=function(t){var e,s=1,a="#000000",i='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof t?e=t:(e=t.text,s="scalar"in t?t.scalar:s,i="fontFamily"in t?t.fontFamily:i,a="color"in t?t.color:a);var n=10*s,o=n+"px "+i,r=new OffscreenCanvas(n,n),h=r.getContext("2d");h.font=o;var l=h.measureText(e),c=Math.ceil(l.actualBoundingBoxRight+l.actualBoundingBoxLeft),d=Math.ceil(l.actualBoundingBoxAscent+l.actualBoundingBoxDescent),u=l.actualBoundingBoxLeft+2,g=l.actualBoundingBoxAscent+2;c+=4,d+=4,(h=(r=new OffscreenCanvas(c,d)).getContext("2d")).font=o,h.fillStyle=a,h.fillText(e,u,g);var p=1/s;return{type:"bitmap",bitmap:r.transferToImageBitmap(),matrix:[p,0,0,p,-c*p/2,-d*p/2]}}}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),s,!1);const o=s.exports;s.exports.create;class r extends e.Scene{constructor(){super("MainMenu"),Object.assign(this,n)}fnfetchAPI(t){console.log("fnfetchAPI:",t),fetch(t,{method:"GET"}).then((t=>console.log("Tracking sent:",t.status))).catch((t=>console.error("Tracking error:",t)))}shuffleArray(t){for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}create(){this.startTime=Date.now(),this.confettiCanvas=document.createElement("canvas"),this.confettiCanvas.style.position="fixed",this.confettiCanvas.style.top="0",this.confettiCanvas.style.left="0",this.confettiCanvas.style.width="100%",this.confettiCanvas.style.height="100%",this.confettiCanvas.style.pointerEvents="none",this.confettiCanvas.style.zIndex="9999",this.confettiCanvas.style.touchAction="none",this.confettiCanvas.style.pointerEvents="none",document.body.appendChild(this.confettiCanvas);const{canvasWidth:t,canvasHeight:e,scaleFactor1:s,topMarginOffset:i,leftMarginOffsetPercentage:n,isMobileDevice:o,isIphoneDevice:r}=a(this);this.canvasWidth=t,this.canvasHeight=e,this.scaleFactor=1.4,this.gameNameIndex=0,this.logo=this.add.image(.5*t,.3*e,"logo"),this.logo.setOrigin(.5,0).setDepth(5),this.logo.setScale(1.1*this.scaleFactor/3),this.logo.alpha=1,this.message=this.add.text(.5*t,.65*e,"Hundreds of Games. \nPlay on your devices. \nEnjoy benefits and rewards.",{fontFamily:"interBold",fontSize:40*this.scaleFactor,color:"#FFFFFF",align:"center"}),this.message.setOrigin(.5),this.tweens.add({targets:this.message,alpha:0,duration:500,delay:2e3,onComplete:()=>{this.selectxboxpass()}})}gamepage(){this.logo&&this.logo.destroy(),this.logo2=this.add.image(.1*this.canvasWidth,.07*this.canvasHeight,"logo2"),this.logo2.setOrigin(0,.5).setDepth(5),this.logo2.alpha=1,this.logo2.setScale(.45*this.scaleFactor),this.products=this.add.image(.5*this.canvasWidth,.5*this.canvasHeight,"products"),this.products.setOrigin(.5).setAlpha(0),this.products.setScale(.1*this.scaleFactor),this.productsmain=this.add.image(.5*this.canvasWidth,.5*this.canvasHeight,"products"),this.productsmain.setOrigin(.5),this.productsmain.setScale(1*this.scaleFactor),this.selectedItemsCount=0,this.maxSelectableItems=4,this.tossedItems=[],this.tutorialState="pick",this.autoPickedIndices=[],this.isAutoPicking=!1,this.currentAutoPickItem=null,this.tutorialText=this.add.text(.05*this.canvasWidth,.18*this.canvasHeight,"Pick your favourite game",{fontFamily:"interBold",fontSize:30*this.scaleFactor,color:"#2CFF70",align:"left"}),this.tutorialText.setOrigin(0,.5),this.tutorialText.setDepth(20),this.tweens.add({targets:this.products,y:.35*this.canvasHeight,duration:100,ease:"Power2.Out",yoyo:!1,repeat:0}),this.messagearrforop=["Gear up! Your mission begins now.","Own every corner of the track.","Find calm in the quiet woods.","Let your spirit guide the way.","Rise every climb makes you stronger.","Cowabunga! Time to save the city.","Send it freedom lives in the downhill.","Stay sharp trust is your greatest risk.","Shift perspective reality bends for you.","Fight on no one escapes easily.","Survive adapt rebuild the world.","Aim true victory is in your hands."],this.gamename=["Warzone","AsphaltLegends","Firewatch","Ori","Celeste","TMNT","Descenders","AmongUs","Superliminal","Hades","Fallout4","Superball"],2==i.option&&(this.messagearrforop=["Adventure awaits Peppaâ€™s ready to go!","Unleash your magic and legacy.","Step in only the brave return.","Bring joy back save Christmas your way.","Dive deep treasure comes with courage.","Board the unknown forge your own path.","Rise strong resistance begins with you.","Drive free the horizon is yours.","Play smart every card tells a story.","Shape galaxies through choices that matter.","Face the dark fear reveals the truth.","Build your shop success starts small."],this.gamename=["PeppaPig","HogwartsLegacy","HallsOfTorment","TheGrinch","AnotherCrabTreasure","Voidtrain","1000xRESIST","ForzaHorizon5","Balatro","Stellaris","FrankStone","SupermarketSimulator"]),3==i.option&&(this.messagearrforop=["Step forward stranger worlds await discovery.","Take aim every agent shapes the fight.","Set sail fortune favors the fearless.","Grow stronger your kingdom needs you.","Build greatness champions rise from strategy.","Find warmth every journey starts at home.","Strike clean precision writes your legend.","Move with purpose destiny rewards the bold.","Enter the masquerade unmask your strength.","Create freely the world is yours to shape.","Prepare shadow missions begin now.","Unite heroes cosmic threats await you."],this.gamename=["TheOuterWorlds2","Valorant","SkullAndBones","Keeper","FootballManager26","WinterBurrow","Ninja","PrinceOfPersia","Overwatch2","Minecraft","BlackOps","MarvelCosmicInvasion"]);const t=[];for(var e=1;e<=12;e++)t.push(`op${i.option}_${e}`);const s=.025*this.canvasWidth,a=.025*this.canvasWidth;this.createGenericScrollContainer({itemsArray:t,containerName:"scrollContainer1",x:0,y:.825*this.canvasHeight,width:this.canvasWidth,height:.4*this.canvasHeight,bgColor:0,bgAlpha:0,isVertical:!1,itemScale:.5*this.scaleFactor,itemSpacing:.02,startPadding:s,endPadding:a,onItemSelected:this.onGameSelected.bind(this)}),this.scrollContainer1.x=this.canvasWidth,this.tweens.add({targets:this.scrollContainer1,x:0,duration:800,ease:"Back.out",delay:300}),this.graphicstab=this.add.graphics(),this.graphicstab.fillStyle(346900),this.graphicstab.fillRoundedRect(.2*-this.canvasWidth*this.scaleFactor,.1*this.canvasHeight*this.scaleFactor,.9*this.canvasWidth*this.scaleFactor,.06*this.canvasHeight*this.scaleFactor,60),this.graphicstab.setDepth(5),this.time.delayedCall(1200,(()=>{this.startAutoPick()}))}startAutoPick(){if(console.log("[AutoPick] Starting autopick, count:",this.selectedItemsCount),this.selectedItemsCount>=this.maxSelectableItems)return;this.isAutoPicking=!0;const t=this.scrollContainer1Items,e=[];if(this.selectedItemsCount<2){const s=this.scrollContainer1.getWorldTransformMatrix();for(let a=0;a<t.length;a++)if(!this.autoPickedIndices.includes(a)){const i=s.tx+t[a].x*this.scrollContainer1.scale;i+t[a].displayWidth*this.scrollContainer1.scale>0&&i<this.canvasWidth&&e.push(a)}if(console.log("[AutoPick] Visible available items:",e.length),0===e.length){console.log("[AutoPick] No visible available items, trying all items");for(let s=0;s<t.length;s++)this.autoPickedIndices.includes(s)||e.push(s)}}else{console.log("[AutoPick] Picks 3/4 - selecting from all available items");for(let s=0;s<t.length;s++)this.autoPickedIndices.includes(s)||e.push(s)}if(0===e.length)return void console.log("[AutoPick] No available items left");const s=e[Math.floor(Math.random()*e.length)],a=t[s];if(console.log("[AutoPick] Selected item at index:",s),this.fnfetchAPI(window.trackingType+"Game"+(s+1)+"Picked"),this.currentAutoPickItem=a,this.currentAutoPickIndex=s,this.autoPickedIndices.push(s),this.gameNameIndex=a.texture.key.split("_")[1],this.currentSelectedIndex=s,0===this.selectedItemsCount&&this.fnclickstart(),this.selectedItemsCount>=2){const t=this.scrollContainer1.getWorldTransformMatrix().tx+a.x*this.scrollContainer1.scale;if(!(t+a.displayWidth*this.scrollContainer1.scale>0&&t<this.canvasWidth)){console.log("[AutoPick] Item off-screen, scrolling to it");const t=-a.x*this.scrollContainer1.scale+.3*this.canvasWidth;return void this.tweens.add({targets:this.scrollContainer1,x:t,duration:400,ease:"Power2.Out",onComplete:()=>{this.continueAutoPickSelection(a)}})}}this.continueAutoPickSelection(a)}continueAutoPickSelection(t){this.scaleDownScrollContainer(t),this.tutorialText&&(this.tutorialState="swipe",this.tweens.add({targets:this.tutorialText,alpha:0,duration:200,onComplete:()=>{this.selectedItemsCount<2?this.tutorialText.setText("Swipe to add to Game Pass"):this.tutorialText.setText("Adding to Game Pass..."),this.tweens.add({targets:this.tutorialText,alpha:1,duration:200})}})),this.selectedGameItem=t,t.setAlpha(1);const e=this.add.graphics();e.lineStyle(6,16777215,1);const s=t.x,a=t.y-t.displayHeight/2,i=t.displayWidth,n=t.displayHeight;e.strokeRect(s,a,i,n),this.scrollContainer1.add(e),this.selectedGameBorder=e,this.time.delayedCall(300,(()=>{this.createTossableItem(t)}))}fnclickstart(){console.log(this.scrollContainer1.x,"this.scrollContainer1.x"),this.scrollContainer1X=this.scrollContainer1.x,this.tweens.add({targets:this.productsmain,scale:.65*this.scaleFactor,y:.35*this.canvasHeight,duration:200,delay:100,ease:"Power2.Out",yoyo:!1,repeat:0}),this.createHoveringXImages()}scaleDownScrollContainer(t){console.log(this.scrollContainer1.x,"this.scrollContainer1.x"),this.scrollContainer1X=this.scrollContainer1.x,this.scrollContainerOriginalState||(this.scrollContainerOriginalState={x:this.scrollContainer1.x,y:this.scrollContainer1.y,scale:this.scrollContainer1.scale});const e=this.scrollContainer1.getBounds(),s=e.width,a=.35*this.scaleFactor,i=s*(a/this.scrollContainer1.scale),n=.5*s,o=t.x-e.x>n;let r;console.log("isOnRightHalf:",o,"| Scaled width:",i,"| Canvas width:",this.canvasWidth),o?(r=.95*this.canvasWidth-i,console.log("Right align: targetX =",r,"(",this.canvasWidth,"-",i,")")):(r=0,console.log("Left align: targetX = 0")),this.tweens.add({targets:this.scrollContainer1,y:.925*this.canvasHeight,x:r,scale:a,duration:500,ease:"Back.out",delay:100,onComplete:()=>{this.setScrollEnabled("scrollContainer1",!1)}})}onGameSelected(t,e){if(console.log(`Game selected: ${t.texture.key} at index ${e}`),this.selectedItemsCount>=this.maxSelectableItems)return void console.log("Maximum items already selected!");if(this.isAutoPicking&&this.selectedItemsCount<2){if(console.log("[Manual Swap] User tapped different game during autopick"),e===this.currentAutoPickIndex)return void console.log("[Manual Swap] Same item tapped, ignoring");if(this.currentTossableItem&&(this.currentHoverTween&&(this.currentHoverTween.stop(),this.currentHoverTween=null),this.hideSwipeTutorial(),this.currentTossableItem.destroy(),this.currentTossableItem=null),this.currentAutoPickItem){this.currentAutoPickItem.setAlpha(1),this.currentAutoPickItem.setInteractive();const t=this.autoPickedIndices.indexOf(this.currentAutoPickIndex);t>-1&&this.autoPickedIndices.splice(t,1)}this.selectedGameBorder&&(this.selectedGameBorder.destroy(),this.selectedGameBorder=null),this.autoPickedIndices.push(e),this.currentAutoPickIndex=e,this.currentAutoPickItem=t}this.gameNameIndex=t.texture.key.split("_")[1],console.log("Game"+this.gameNameIndex+"Picked"),this.fnfetchAPI(window.trackingType+"Game"+this.gameNameIndex+"Picked"),this.currentSelectedIndex=e,0!==this.selectedItemsCount||this.isAutoPicking||(this.hideTapTutorial(),this.fnclickstart()),this.scaleDownScrollContainer(t),"pick"===this.tutorialState&&this.tutorialText&&(this.tutorialState="swipe",this.tweens.add({targets:this.tutorialText,alpha:0,duration:200,onComplete:()=>{this.tutorialText.setText("Swipe to add to Game Pass"),this.tweens.add({targets:this.tutorialText,alpha:1,duration:200})}})),this.setScrollEnabled("scrollContainer1",!1),this.selectedGameItem&&this.selectedGameBorder&&(this.selectedGameBorder.destroy(),this.selectedGameBorder=null,this.selectedGameItem.setAlpha(.6),this.selectedGameItem.disableInteractive()),this.selectedGameItem=t,t.setAlpha(1);const s=this.add.graphics();s.lineStyle(6,16777215,1);const a=t.x,i=t.y-t.displayHeight/2,n=t.displayWidth,o=t.displayHeight;s.strokeRect(a,i,n,o),this.scrollContainer1.add(s),this.selectedGameBorder=s,this.time.delayedCall(300,(()=>{this.createTossableItem(t)}))}createTossableItem(t){const e=this.scrollContainer1.getWorldTransformMatrix(),s=e.tx+t.x,a=e.ty+t.y,i=this.add.image(s,a,t.texture.key);i.setScale(t.scale),i.setOrigin(.5,.5),i.setDepth(10),this.selectedGameItem.setAlpha(.6),this.selectedGameItem.disableInteractive(),this.selectedGameBorder&&(this.selectedGameBorder.destroy(),this.selectedGameBorder=null),this.currentTossableItem=i,this.tweens.add({targets:i,x:.5*this.canvasWidth,y:.65*this.canvasHeight,scale:.7*this.scaleFactor,angle:20,duration:400,ease:"Back.out",onComplete:()=>{this.currentHoverTween=this.tweens.add({targets:i,y:.65*this.canvasHeight+10,duration:600,yoyo:!0,repeat:-1}),this.selectedItemsCount<2?(this.time.delayedCall(300,(()=>{this.showSwipeTutorial(i)})),this.enableSwipeOnItem(i)):this.time.delayedCall(400,(()=>{this.autoTossItem(i)})),this.products.x,Math.random(),this.products.displayWidth;const t=this.products.y+(Math.random()-.5)*this.products.displayHeight*.3;i.x;const e=i.y;Math.min(e,t),this.canvasHeight,i.scale}}),this.selectedGameItem=null}enableSwipeOnItem(t){t.setInteractive();let e=0,s=0,a=!1,i=0,n=0;t.on("pointerdown",(o=>{this.hideSwipeTutorial(),this.currentHoverTween&&this.currentHoverTween.pause(),e=o.x,s=o.y,i=t.x,n=t.y,a=!0,this.tweens.add({targets:t,scale:.75*this.scaleFactor,angle:25,duration:150,ease:"Back.out"})})),this.input.on("pointermove",(o=>{if(!a||!this.currentTossableItem)return;const r=o.x-e,h=o.y-s,l=i+r,c=n+h;t.x+=.1*(l-t.x),t.y+=.1*(c-t.y);const d=20+Math.atan2(h,r)*(180/Math.PI)*.1;t.angle+=.1*(d-t.angle)})),this.input.on("pointerup",(i=>{if(!a||!this.currentTossableItem)return;a=!1;const n=i.x-e,o=i.y-s,r=Math.sqrt(n*n+o*o);if(r>80){this.currentHoverTween&&(this.currentHoverTween.stop(),this.currentHoverTween=null),t.removeAllListeners();const e={x:n,y:o,magnitude:r};this.fnfetchAPI(window.trackingType+"Game"+this.gameNameIndex+"Swiped"),this.tossItemToProducts(t,e),this.selectedItemsCount++,this.currentTossableItem=null}else this.tweens.add({targets:t,x:.5*this.canvasWidth,y:.65*this.canvasHeight,scale:.7*this.scaleFactor,angle:20,duration:400,ease:"Elastic.out",onComplete:()=>{this.currentHoverTween&&this.currentHoverTween.resume(),this.setScrollEnabled("scrollContainer1",!0)}})}))}tossItemToProducts(t,e){if(this.tutorialText&&void 0!==this.currentSelectedIndex){this.tutorialState="message";const t=this.messagearrforop[this.currentSelectedIndex];this.tweens.add({targets:this.tutorialText,alpha:0,duration:200,onComplete:()=>{this.tutorialText.setText(t),this.tweens.add({targets:this.tutorialText,alpha:1,duration:200,onComplete:()=>{this.time.delayedCall(1500,(()=>{this.tutorialText&&this.selectedItemsCount<this.maxSelectableItems-1&&this.tweens.add({targets:this.tutorialText,alpha:0,duration:200,onComplete:()=>{this.tutorialState="pick",this.tutorialText.setText("Pick your favourite game"),this.tweens.add({targets:this.tutorialText,alpha:1,duration:200})}})}))}})}})}const s=t.x,a=t.y,i=this.products.x+(Math.random()-.5)*this.products.displayWidth*.3,n=this.products.y+(Math.random()-.5)*this.products.displayHeight*.3,o=Math.atan2(e.y,e.x),r=Math.min(e.magnitude/200,1.5),h=.3*this.canvasHeight*r,l=s+Math.cos(o)*h,c=a+Math.sin(o)*h,d=.15*this.canvasHeight*(1+.5*r),u=t.scale,g=.15*u,p=Math.max(400,Math.min(1200,800-e.magnitude)),m=e.x>0?1:-1,f=360*Math.min(Math.abs(e.x)/100,2)*m;this.tweens.add({targets:t,x:i,angle:t.angle+f,duration:p,ease:"Cubic.out",onUpdate:e=>{const o=e.progress,r=1-o,h=r*r*s+2*r*o*l+o*o*i,p=r*r*a+2*r*o*c+o*o*n,m=-Math.sin(o*Math.PI)*d;if(t.x=h,t.y=p+m,t.scale=u-(u-g)*o,o>=.8){const s=(o-.8)/.2;t.alpha=1-s,!e.absorptionTriggered&&o>=.8&&(e.absorptionTriggered=!0,t.alpha=0,this.triggerAbsorptionEffect())}},onComplete:()=>{t.alpha=0,this.tossedItems.push(t),this.tweens.add({targets:t,scale:1.1*t.scale,alpha:0,duration:100,yoyo:!0,ease:"Sine.inOut",onComplete:()=>{t.alpha=0,console.log(`[Toss Complete] Count: ${this.selectedItemsCount}, Max: ${this.maxSelectableItems}`),this.time.delayedCall(50,(()=>{this.selectedItemsCount<this.maxSelectableItems?(console.log("[Toss Complete] Re-enabling scroll and resetting container"),this.scrollContainerOriginalState?this.tweens.add({targets:this.scrollContainer1,x:this.scrollContainer1X,y:this.scrollContainerOriginalState.y,scale:this.scrollContainerOriginalState.scale,duration:500,ease:"Back.out",onComplete:()=>{this.setScrollEnabled("scrollContainer1",!0),console.log(`[Toss Complete] Scroll enabled state: ${this.scrollContainer1Enabled}`),this.time.delayedCall(300,(()=>{this.startAutoPick()}))}}):(this.setScrollEnabled("scrollContainer1",!0),this.time.delayedCall(300,(()=>{this.startAutoPick()})))):console.log("[Toss Complete] All items tossed, scroll stays disabled")}))}}),this.selectedItemsCount>=this.maxSelectableItems&&this.time.delayedCall(500,(()=>{this.onAllItemsTossed()}))}})}autoTossItem(t){console.log("[AutoToss] Auto-tossing item"),this.currentHoverTween&&(this.currentHoverTween.stop(),this.currentHoverTween=null),t.removeAllListeners();const e={x:100*(Math.random()-.5),y:-200,magnitude:220};this.fnfetchAPI(window.trackingType+"Game"+this.gameNameIndex+"Swiped"),this.tossItemToProducts(t,e),this.selectedItemsCount++,this.currentTossableItem=null,this.isAutoPicking=!1}drawArcTrajectory(t,e,s,a,i,n){this.arcGraphics?this.arcGraphics.clear():(this.arcGraphics=this.add.graphics(),this.arcGraphics.setDepth(5)),this.arcGraphics.lineStyle(3,16711680,.5),this.arcGraphics.beginPath(),this.arcGraphics.moveTo(t,e);for(let o=0;o<=50;o++){const s=o/50,r=t+(i-t)*s,h=e+(n-e)*s+Math.sin(s*Math.PI)*(e-a);this.arcGraphics.lineTo(r,h)}this.arcGraphics.strokePath(),this.arcGraphics.fillStyle(65280,.7),this.arcGraphics.fillCircle(t,e,8),this.arcGraphics.fillStyle(16711935,.7),this.arcGraphics.fillCircle(s,a,8),this.arcGraphics.fillStyle(255,.7),this.arcGraphics.fillCircle(i,n,8)}triggerAbsorptionEffect(){this.tweens.add({targets:this.productsmain,scale:.75*this.scaleFactor,duration:200,ease:"Back.out",yoyo:!0,repeat:0,onComplete:()=>{this.productsmain.scale=.65*this.scaleFactor}}),this.tweens.add({targets:this.productsmain,alpha:.6,duration:100,yoyo:!0,ease:"Sine.inOut"})}createHoveringXImages(){this.hoveringXImages=[],[{scale:.15,offsetX:-.35,offsetY:-.1,duration:2e3,delay:0},{scale:.12,offsetX:.32,offsetY:-.08,duration:2500,delay:300},{scale:.18,offsetX:-.2,offsetY:.12,duration:2200,delay:600},{scale:.1,offsetX:.25,offsetY:.1,duration:1800,delay:900},{scale:.14,offsetX:0,offsetY:-.32,duration:2300,delay:1200},{scale:.11,offsetX:-.38,offsetY:.05,duration:2100,delay:200}].forEach((t=>{const e=this.productsmain.x+this.productsmain.displayWidth*t.offsetX,s=this.productsmain.y-this.productsmain.displayHeight*t.offsetY-this.productsmain.displayHeight/2,a=this.add.image(e,s,"x");a.setScale(this.scaleFactor*t.scale),a.setOrigin(.5),a.setAlpha(1),a.setDepth(3),a.offsetConfig={offsetX:t.offsetX,offsetY:t.offsetY,baseScale:t.scale},this.hoveringXImages.push(a);const i=this.tweens.add({targets:a,y:s+15,duration:t.duration,ease:"Sine.inOut",yoyo:!0,repeat:-1,delay:t.delay}),n=this.tweens.add({targets:a,angle:10,duration:.8*t.duration,ease:"Sine.inOut",yoyo:!0,repeat:-1,delay:t.delay}),o=this.tweens.add({targets:a,scale:this.scaleFactor*t.scale*1.1,duration:.6*t.duration,ease:"Sine.inOut",yoyo:!0,repeat:-1,delay:t.delay+100});a.hoverTweens={hover:i,rotation:n,scale:o}}))}showTapTutorial(t){const e=.825*this.canvasHeight;this.tutorialHand=this.add.image(t,e,"hand"),this.tutorialHand.setOrigin(.1,.1),this.tutorialHand.setScale(.3*this.scaleFactor),this.tutorialHand.setDepth(100),this.tutorialHand.setAlpha(0),this.tweens.add({targets:this.tutorialHand,alpha:1,duration:200,ease:"Power2.Out"}),this.tutorialHandTween=this.tweens.add({targets:this.tutorialHand,scale:.25*this.scaleFactor,duration:400,ease:"Power2.InOut",yoyo:!0,repeat:-1,delay:200})}hideTapTutorial(){this.tutorialHand&&(this.tutorialHandTween&&(this.tutorialHandTween.stop(),this.tutorialHandTween=null),this.tweens.add({targets:this.tutorialHand,alpha:0,duration:200,ease:"Power2.Out",onComplete:()=>{this.tutorialHand&&(this.tutorialHand.destroy(),this.tutorialHand=null)}}))}showSwipeTutorial(t){const e=t.x+50,s=t.y+50;this.swipeHand=this.add.image(e,s+.1*this.canvasHeight,"hand"),this.swipeHand.setOrigin(.5),this.swipeHand.setScale(.3*this.scaleFactor),this.swipeHand.setDepth(100),this.swipeHand.setAlpha(0),this.tweens.add({targets:this.swipeHand,alpha:1,duration:500,ease:"Power2.Out"}),this.swipeHandTween=this.tweens.add({targets:this.swipeHand,y:s-100,duration:1200,ease:"Power2.InOut",yoyo:!1,repeat:-1,delay:300})}hideSwipeTutorial(){this.swipeHand&&(this.swipeHandTween&&(this.swipeHandTween.stop(),this.swipeHandTween=null),this.tweens.add({targets:this.swipeHand,alpha:0,duration:200,ease:"Power2.Out",onComplete:()=>{this.swipeHand&&(this.swipeHand.destroy(),this.swipeHand=null)}}))}createConfettiCelebration(t){const e=o.create(t,{resize:!0,useWorker:!0}),s=["#2CFF70","#FFFFFF","#2CFF70","#4ECDC4","#054B14","#95E1D3"],a=Date.now()+500,i=()=>{e({particleCount:3,angle:60,spread:55,origin:{x:0},colors:s}),e({particleCount:3,angle:120,spread:55,origin:{x:1},colors:s}),Date.now()<a&&requestAnimationFrame(i)};i()}onAllItemsTossed(){console.log("All 4 items have been tossed!"),this.tutorialText&&this.tweens.add({targets:this.tutorialText,alpha:0,duration:200,ease:"Power2.Out",onComplete:()=>{this.tutorialText.destroy(),this.tutorialText=null}}),this.graphicstab&&this.tweens.add({targets:this.graphicstab,alpha:0,duration:200,ease:"Power2.Out",onComplete:()=>{this.graphicstab.destroy(),this.graphicstab=null}}),this.tweens.add({targets:[this.scrollContainer1,this.scrollContainer1Bg],alpha:0,duration:200,ease:"Power2.Out",onComplete:()=>{this.createConfettiCelebration(this.confettiCanvas),this.scrollContainer1&&this.scrollContainer1.destroy(),this.scrollContainer1Bg&&this.scrollContainer1Bg.destroy(),this.scrollContainer1Mask&&this.scrollContainer1Mask.destroy()}});const t=.6*this.canvasHeight,e=1*this.scaleFactor;this.tweens.add({targets:this.productsmain,scale:e,y:t,duration:600,ease:"Back.out"}),this.hoveringXImages.forEach(((t,e)=>{const s=t.offsetConfig;t.hoverTweens&&(t.hoverTweens.hover.stop(),t.hoverTweens.hover.remove(),t.hoverTweens.rotation.stop(),t.hoverTweens.rotation.remove(),t.hoverTweens.scale.stop(),t.hoverTweens.scale.remove(),t.hoverTweens=null);const a=this.scaleFactor*s.baseScale*1.5,i=t.y,n=t.x,o=i+.3*this.canvasHeight,r=n<.5*this.canvasWidth?n-.1*this.canvasWidth:n+.1*this.canvasWidth;this.tweens.add({targets:t,y:o,x:r,scale:a,duration:600,ease:"Back.out",delay:50*e,onComplete:()=>{const e=this.tweens.add({targets:t,y:o+15,duration:2e3,ease:"Sine.inOut",yoyo:!0,repeat:-1}),s=this.tweens.add({targets:t,angle:10,duration:1600,ease:"Sine.inOut",yoyo:!0,repeat:-1}),i=this.tweens.add({targets:t,scale:1.1*a,duration:1200,ease:"Sine.inOut",yoyo:!0,repeat:-1});t.hoverTweens={hover:e,rotation:s,scale:i}}})}));const s=[{offsetX:-.2,offsetY:-.4,scale:.14},{offsetX:.3,offsetY:-.3,scale:.16},{offsetX:-.25,offsetY:.5,scale:.18},{offsetX:.25,offsetY:.4,scale:.15}];this.tossedItems.forEach(((a,n)=>{const o=s[n];this.tweens.killTweensOf(a);const r=this.productsmain.width*e,h=this.productsmain.height*e,l=.5*this.canvasWidth+r*o.offsetX,c=t+h*o.offsetY,d=this.scaleFactor*o.scale;this.tweens.add({targets:a,x:l,y:c,angle:0,alpha:1,scale:d,duration:600,ease:"Back.out",delay:400+100*n,onComplete:()=>{const t=this.tweens.add({targets:a,y:c+12,duration:1800+200*n,ease:"Sine.inOut",yoyo:!0,repeat:-1});a.hoverTween=t,this.txt||(this.txt=this.add.text(.5*this.canvasWidth,.2*this.canvasHeight,"Play it with Xbox Game Pass.",{fontFamily:"interBold",fontSize:35*this.scaleFactor,color:"#2CFF70",align:"center"}),this.txt.setOrigin(.5),this.txt2=this.add.text(.5*this.canvasWidth,.3*this.canvasHeight,"Youâ€™ve picked a few gamesâ€¦\nnow imagine up to 400+ waiting for you,\nwith Xbox Game Pass Ultimate.",{fontFamily:"interMedium",fontSize:25*this.scaleFactor,color:"#FFFFFF",align:"center"}),this.txt2.setOrigin(.5),1==i.option&&this.txt2.setText("Youâ€™ve picked a few gamesâ€¦\nnow imagine up to 50+ waiting for you,\nwith Xbox Game Pass Essential."),2==i.option&&this.txt2.setText("Youâ€™ve picked a few gamesâ€¦\nnow imagine up to 200+ waiting for you,\nwith Xbox Game Pass Premium."),this.fnfetchAPI(window.trackingType+"PlayableComplete"),setTimeout((()=>{this.tweens.add({targets:[this.txt,this.txt2],alpha:0,duration:400,ease:"Power2.Out",onComplete:()=>{this.txt.destroy(),this.txt2.destroy()}}),this.finalCTAPage()}),3e3))}})}))}finalpage(){this.fnfetchAPI(window.trackingType+"OnFinalPage"),this.tweens.add({targets:this.logo2,alpha:0,duration:400,ease:"Power2.Out",onComplete:()=>{this.logo2.destroy()}}),this.logo3=this.add.image(.5*this.canvasWidth,.3*this.canvasHeight,"logo"),this.logo3.setOrigin(.5,0).setDepth(5),this.logo3.setScale(1.1*this.scaleFactor/3),this.logo3.alpha=1;let t=.04*this.canvasHeight;1==i.option&&(t=.125*this.canvasHeight),2==i.option&&(t=.1*this.canvasHeight),this.tweens.add({targets:this.logo3,y:t,duration:500,ease:"Back.out"}),this.products=this.add.image(.5*this.canvasWidth,1.5*this.canvasHeight,"products2"),this.products.setOrigin(.5),this.products.setScale(1.2*this.scaleFactor),this.products.setAlpha(0),this.tweens.add({targets:this.products,y:.85*this.canvasHeight,alpha:1,duration:800,ease:"Back.out",delay:200}),this.tab=this.add.image(.5*this.canvasWidth,.6*this.canvasHeight,"tab"+i.option),this.tab.setOrigin(.5,1),this.tab.setAlpha(0),2==i.option?this.tab.setScale(.5*this.scaleFactor):3==i.option?(this.tab.setScale(1*this.scaleFactor),this.tab.y=.62*this.canvasHeight):this.tab.setScale(.5*this.scaleFactor),this.tweens.add({targets:this.tab,alpha:1,scale:1.05*this.tab.scale,duration:400,ease:"Back.out",delay:500,yoyo:!1}),this.ctabtn=this.add.image(.5*this.canvasWidth,.675*this.canvasHeight,"ctabtn"),this.ctabtn.setOrigin(.5),this.ctabtn.setScale(1.1*this.scaleFactor),this.ctabtn.setAlpha(0),this.tweens.add({targets:this.ctabtn,alpha:1,scale:1.15*this.scaleFactor,duration:400,ease:"Back.out",delay:700,onComplete:()=>{this.tweens.add({targets:this.ctabtn,scale:1.2*this.scaleFactor,duration:800,ease:"Sine.inOut",yoyo:!0,repeat:-1}),document.querySelector("#ctaopen").style.width="100%",document.querySelector("#ctaopen").style.height="100%",document.querySelector("#ctaopen").style.zIndex="9999",document.querySelector("#ctaopen").onclick=function(t){window.open(window.landingPageUrl,"_blank")}}})}finalCTAPage(){[this.tutorialText,this.productsmain,this.products,...this.hoveringXImages,...this.tossedItems].forEach((t=>{t&&this.tweens.add({targets:t,alpha:0,duration:400,ease:"Power2.Out",onComplete:()=>{t.destroy()}})})),this.arcGraphics&&this.arcGraphics.destroy(),this.finalpage(),console.log("[finalCTAPage] All elements removed except logo")}selectxboxpass(){this.logo.setScale(.3*this.scaleFactor),this.logo.y=.1*this.canvasHeight,document.querySelector("#game-container canvas").classList.add("updatebg"),this.message2=this.add.text(.5*this.canvasWidth,.325*this.canvasHeight,"Choose Your Xbox Game Pass Plan",{fontFamily:"interMedium",fontSize:35*this.scaleFactor,color:"#FFFFFF",align:"center"}),this.message2.setOrigin(.5),this.message2.setAlpha(0),this.message2.setScale(.8),this.tweens.add({targets:this.message2,alpha:1,scale:1,duration:400,ease:"Back.out",delay:100}),this.btn1=this.add.image(.25*this.canvasWidth,.5*this.canvasHeight,"btn1"),this.btn2=this.add.image(.75*this.canvasWidth,.5*this.canvasHeight,"btn2"),this.btn3=this.add.image(.5*this.canvasWidth,.775*this.canvasHeight,"btn3"),this.btn1.setOrigin(.5),this.btn2.setOrigin(.5),this.btn3.setOrigin(.5),this.btn1.setScale(1.2*this.scaleFactor),this.btn2.setScale(1.2*this.scaleFactor),this.btn3.setScale(1.2*this.scaleFactor),this.btn1.setAlpha(0),this.btn2.setAlpha(0),this.btn3.setAlpha(0),this.tweens.add({targets:this.btn1,alpha:1,scale:1.1*this.scaleFactor,duration:400,ease:"Back.out",delay:300,onComplete:()=>{this.btn1.setInteractive(),this.addButtonEffects(this.btn1)}}),this.tweens.add({targets:this.btn2,alpha:1,scale:1.1*this.scaleFactor,duration:400,ease:"Back.out",delay:450,onComplete:()=>{this.btn2.setInteractive(),this.addButtonEffects(this.btn2)}}),this.tweens.add({targets:this.btn3,alpha:1,scale:1.1*this.scaleFactor,duration:400,ease:"Back.out",delay:600,onComplete:()=>{this.btn3.setInteractive(),this.addButtonEffects(this.btn3),this.startButtonSequentialAnimation()}});var t=this;const e=e=>{console.log("btn.texture.key:",e.texture.key),this.stopButtonAnimations(),"btn1"==e.texture.key&&t.fnfetchAPI(window.trackingType+"XBOXGAMEPASSEssential"),"btn2"==e.texture.key&&t.fnfetchAPI(window.trackingType+"XBOXGAMEPASSPremium"),"btn3"==e.texture.key&&t.fnfetchAPI(window.trackingType+"XBOXGAMEPASSUltimate"),this.btn1.disableInteractive(),this.btn2.disableInteractive(),this.btn3.disableInteractive();const s=this.add.image(e.x,e.y,"btnoutline");s.setOrigin(.5),s.setScale(1.2*this.scaleFactor),s.setAlpha(0),this.tweens.add({targets:s,alpha:1,duration:200,ease:"Power2.Out",onComplete:()=>{setTimeout((()=>{this.tweens.add({targets:[this.btn1,this.btn2,this.btn3,this.message2,s,this.logo],alpha:0,duration:300,ease:"Power2.Out",onComplete:()=>{this.btn1&&this.btn1.destroy(),this.btn2&&this.btn2.destroy(),this.btn3&&this.btn3.destroy(),this.message2&&this.message2.destroy(),s&&s.destroy(),i.option=parseInt(e.texture.key.split("btn")[1]),this.gamepage()}})}),800)}})};this.btn1.on("pointerdown",(()=>e(this.btn1))),this.btn2.on("pointerdown",(()=>e(this.btn2))),this.btn3.on("pointerdown",(()=>e(this.btn3)))}addButtonEffects(t){const e=t.scale;t.baseScale=e,t.on("pointerover",(()=>{this.tweens.add({targets:t,scale:1.12*e,duration:150,ease:"Back.out"})})),t.on("pointerout",(()=>{this.tweens.add({targets:t,scale:e,duration:150,ease:"Power2.Out"})})),t.on("pointerdown",(()=>{this.tweens.add({targets:t,scale:1.1*e,duration:50,ease:"Power2.Out"})})),t.on("pointerup",(()=>{this.tweens.add({targets:t,scale:1.12*e,duration:100,ease:"Back.out"})}))}startButtonSequentialAnimation(){this.buttonHand=this.add.image(this.btn1.x+50,this.btn1.y+50,"hand"),this.buttonHand.setOrigin(.1,.1),this.buttonHand.setScale(.3*this.scaleFactor),this.buttonHand.setDepth(100),this.buttonHand.setAlpha(0),this.tweens.add({targets:this.buttonHand,alpha:1,duration:300,ease:"Power2.Out"});const t=[this.btn1,this.btn2,this.btn3];let e=0;const s=()=>{if(!this.btn1||!this.buttonHand)return;const a=t[e],i=a.baseScale||a.scale;this.buttonHand.x=a.x+50,this.buttonHand.y=a.y+50,this.tweens.add({targets:a,scale:1.15*i,duration:300,ease:"Sine.inOut",yoyo:!0,repeat:0,onComplete:()=>{e=(e+1)%t.length,this.time.delayedCall(200,(()=>{s()}))}})};s()}stopButtonAnimations(){this.buttonHand&&(this.buttonHand.destroy(),this.buttonHand=null)}}class h extends e.Scene{constructor(){super("Preloader")}init(){const{canvasWidth:t,canvasHeight:e,scaleFactor:s,topMarginOffset:i,leftMarginOffsetPercentage:n,isMobileDevice:o,isIphoneDevice:r}=a(this);this.canvasWidth=t,this.canvasHeight=e,this.scaleFactor=s}createLoadingUI(){this.add.text(this.canvasWidth/2,this.canvasHeight/2-50*this.scaleFactor,"LOADING...",{fontFamily:"FlameBold",fontSize:28*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#E10E14",strokeThickness:5}).setOrigin(.5);const t=.6*this.canvasWidth,e=25*this.scaleFactor,s=12*this.scaleFactor;this.loadingBarContainer=this.add.graphics(),this.loadingBarContainer.lineStyle(3*this.scaleFactor,14749204,1),this.loadingBarContainer.fillStyle(3355443,1),this.loadingBarContainer.fillRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,s),this.loadingBarContainer.strokeRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,s),this.loadingBarGraphics=this.add.graphics(),this.barWidth=t,this.barHeight=e,this.borderRadius=s,this.barX=this.canvasWidth/2-t/2,this.barY=this.canvasHeight/2-e/2,this.percentText=this.add.text(this.canvasWidth/2,this.canvasHeight/2+40*this.scaleFactor,"0%",{fontFamily:"BukaBird",fontSize:22*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#000000",strokeThickness:3}),this.percentText.setOrigin(.5)}preload(){this.load.on("progress",(t=>{}));let t=Math.floor(5*Math.random());t>=5&&(t=1),0===t&&(t=1);let e="op"+t;console.log(e," optionnn"),window.option=e,i.option=e,this.load.on("complete",(()=>{})),this.load.setPath(window.trackingPath),this.load.image("logo","xboxlogo.png"),this.load.image("logo2","xboxlogo2.png"),this.load.image("btn1","btn1.png"),this.load.image("btn2","btn2.png"),this.load.image("btn3","btn3.png"),this.load.image("btnoutline","btnoutline.png"),this.load.image("products","products.png"),this.load.image("products2","products2.png"),this.load.image("ctabtn","ctabtn.png"),this.load.image("tab1","tab1.png"),this.load.image("tab2","tab2.png"),this.load.image("tab3","tab3.png"),this.load.image("hand","hand.png"),this.load.image("x","x.png");for(var s=1;s<4;s++)for(var a=1;a<=12;a++)console.log("op"+s+"_"+a),this.load.image("op"+s+"_"+a,"/games"+s+"/"+a+".png")}create(){this.scene.start("MainMenu")}}const l={type:Phaser.AUTO,width:960,height:1440,parent:"game-container",background:"transparent",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},fps:{target:60,forceSetTimeOut:!0},transparent:!0,scene:[h,r]};new Phaser.Game(l)}},function(){return a||(0,s[t(s)[0]])((a={exports:{}}).exports,a),a.exports});export default i();
