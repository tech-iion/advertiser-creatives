import{p as e}from"./phaser-DM0uoNMb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class t extends e.Scene{constructor(){super("Boot")}preload(){this.load.image("background","https://tech-iion.github.io/advertiser-creatives/finalbuildfiles/cfia/assets/bg.png")}create(){this.scene.start("Preloader")}}function s(e,t){const s=/Mobi|Android/i.test(navigator.userAgent),a=/iPhone/i.test(navigator.userAgent),i=window.innerWidth,n=window.innerHeight;let o,r;o=e.game.canvas.width,r=e.game.canvas.height;const h=document.getElementsByTagName("canvas")[0],l=Math.abs(parseFloat(h.style.marginTop||0))/i*o+(a?130:0),d=Math.abs(parseFloat(h.style.marginLeft||0))/n*r;let c=n/(i+2*d)*.85;return s?{canvasWidth:o,canvasHeight:r,scaleFactor:c,topMarginOffset:l,leftMarginOffsetPercentage:d,isMobileDevice:s,isIphoneDevice:a}:(c=1.4,{canvasWidth:o,canvasHeight:r,scaleFactor:c,topMarginOffset:0,leftMarginOffsetPercentage:0})}var a={retryCount:0,language:"FR",path:"https://tech-iion.github.io/advertiser-creatives/finalbuildfiles/cfia/assets"};class i extends e.Scene{constructor(){super("Game")}create(){const{canvasWidth:e,canvasHeight:t,scaleFactor1:i,topMarginOffset:n,leftMarginOffsetPercentage:o,isMobileDevice:r,isIphoneDevice:h}=s(this);this.fnfetchAPI(window.trackingType+"ExperienceComplete");const l=e/2;this.cameras.main.fadeIn(500,0,0,0);const d=this.add.text(l,.2*t,"Well Done!",{fontSize:"80px",fontFamily:"Asap",fill:"#ffffff",align:"center"}).setOrigin(.5),c=this.add.text(l,.35*t,"For more food safety tips, visit",{fontSize:"50px",fontFamily:"Asap",fill:"#ffffff",align:"center"}).setOrigin(.5),p=this.add.text(l,.4*t,"Canada.ca/foodsafety",{fontSize:"50px",fontFamily:"Asap",fill:"#FBDF42",align:"center"}).setOrigin(.5);d.setText("Bien joué !"),c.setText("Pour plus de conseils sur la \ncuisson sécuritaire, visitez"),p.setText("Canada.ca/salubrite-aliments");const m=this.add.image(l,.6*t,"tryagainbtn"+a.language).setInteractive({useHandCursor:!0}).setScale(.5),g=this.add.image(l,t,"learnBtn"+a.language).setInteractive({useHandCursor:!0}).setScale(.56).setOrigin(.5,1).setDepth(1);g.on("pointerover",(()=>{this.tweens.add({targets:g,scale:.6,duration:100,ease:"Power2"})})),g.on("pointerout",(()=>{this.tweens.add({targets:g,scale:.56,duration:100,ease:"Power2"})})),g.on("pointerdown",(()=>{this.fnfetchAPI(window.trackingType+"LearnMore"),window.open(window.setTracker+"https://www.Canada.ca/salubritealiments","_blank"),this.tweens.add({targets:g,scale:.5,duration:100,ease:"Power2",onComplete:()=>{this.tweens.add({targets:g,scale:.56,duration:100,ease:"Back.easeOut",onComplete:()=>{window.open("https://www.Canada.ca/foodsafety","_blank")}})}})})),m.on("pointerover",(()=>{this.tweens.add({targets:m,scale:.54,duration:100,ease:"Power2"})})),m.on("pointerout",(()=>{this.tweens.add({targets:m,scale:.5,duration:100,ease:"Power2"})})),m.on("pointerdown",(()=>{this.fnfetchAPI(window.trackingType+"TryAgain"),a.retryCount++,this.cameras.main.fadeOut(500,0,0,0),setTimeout((()=>{this.scene.start("MainMenu")}),500)}));const u=[d,c,p,m];g.setAlpha(0),g.y+=50,u.forEach(((e,t)=>{e.setAlpha(0),e.y+=20*t})),this.tweens.add({targets:u,alpha:1,y:"-=20",duration:500,ease:"Back.easeOut",delay:this.tweens.stagger(200),onComplete:()=>{u.forEach((e=>{this.tweens.add({targets:e,y:"+=5",duration:2e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})})),this.tweens.add({targets:g,alpha:1,y:"-=50",duration:700,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:g,y:"+=8",duration:2500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}})}})}fnfetchAPI(e){fetch(e,{method:"GET"}).then((e=>console.log("Tracking sent:",e.status))).catch((e=>console.error("Tracking error:",e)))}}class n extends e.Scene{constructor(){super("GameOver")}create(){this.cameras.main.setBackgroundColor(16711680),this.add.image(512,384,"background").setAlpha(.5),this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class o extends e.Scene{constructor(){super("MainMenu")}create(){const{canvasWidth:e,canvasHeight:t,scaleFactor1:i,topMarginOffset:n,leftMarginOffsetPercentage:o,isMobileDevice:r,isIphoneDevice:h}=s(this);this.meatName="",this.clickBG=!1,this.mainlogo=this.add.image(.5*e,t-.025*e,"mainlogo"),this.mainlogo.setOrigin(.5,1).setDepth(11111111),this.mainlogo.setScale(.42).setAlpha(0),this.image=this.add.image(e/2,t/2,"background"),this.image.setOrigin(.5),this.image.setScale(.77),this.image.alpha=0,this.tweens.add({targets:this.image,alpha:1,duration:800,ease:"Power2"}),this.tempTextFloat=null;const l=this.add.text(e/2,.125*t,"SAFE TEMP TAP",{fontSize:`${Math.floor(48*1.4)}px`,fontFamily:"Asap",fill:"#ffffff",stroke:"#000000",strokeThickness:0,shadow:{color:"#000000",blur:2,fill:!0}}).setOrigin(.5);l.alpha=0,l.y-=50;const d=this.add.text(e/2,.225*t,"Tap and hold the digital thermometer \nto reach the safe cooking temperature!",{fontSize:`${Math.floor(50.4)}px`,fontFamily:"Asap",fill:"#ffffff",align:"center",stroke:"#000000",strokeThickness:0,shadow:{color:"#000000",blur:2,fill:!0}}).setOrigin(.5);d.alpha=0,this.salmon=this.add.image(e/2,.625*t,"salmon_uncooked"),this.salmon.setScale(.7),this.salmon.setOrigin(.5),this.salmon.alpha=0,this.inactivityTimer=null,this.thermometer=this.add.image(.395*e,.45*t,"indicator2"),this.thermometer.setScale(.42),this.thermometer.setOrigin(.5),this.thermometer.alpha=0,this.tempText=this.add.text(.395*e,.45*t,"70°C",{fontSize:`${Math.floor(22*1.4)}px`,fontFamily:"Montserrat",fill:"#000000",align:"center",shadow:{color:"#000000",blur:0,fill:!0}}).setOrigin(.5).setAngle(60),this.tempText.alpha=0,this.startButton=this.add.text(e/2,.835*t,"Start Cooking!",{fontSize:`${Math.floor(84)}px`,fontFamily:"Asap",fill:"#FFD700",stroke:"#000000",strokeThickness:0,shadow:{color:"#000000",blur:2,fill:!0}}).setOrigin(.5),this.startButton.alpha=0,l.setText("Température sécuritaire"),d.setFontSize(`${Math.floor(42)}px`),d.setText("Tapez sur le thermomètre numérique \npour atteindre la température de \ncuisson sécuritaire"),this.startButton.setFontSize(`${Math.floor(77)}px`),this.startButton.setText("Commencez la cuisson !"),a.retryCount>0?this.showSelectionPage():(this.tweens.add({targets:l,alpha:1,y:.125*t,duration:1e3,ease:"Back.easeOut",delay:300}),this.tweens.add({targets:d,alpha:1,duration:800,delay:800,ease:"Power2"}),this.salmon.x+=200,this.tweens.add({targets:this.salmon,x:e/2,alpha:1,duration:1e3,ease:"Power2",delay:1200,onComplete:()=>{this.tweens.add({targets:this.salmon,angle:{from:-3,to:3},duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.tweens.add({targets:this.salmon,x:"+=15",duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.tweens.add({targets:this.salmon,y:"+=5",duration:2e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:200})}}),this.thermometer.x-=200,this.tweens.add({targets:this.thermometer,x:.3*e,alpha:1,duration:1e3,ease:"Power2",delay:1200}),this.tweens.add({targets:this.tempText,alpha:1,duration:800,delay:2e3,ease:"Power2"}),this.startButton.y+=50,this.tweens.add({targets:this.startButton,alpha:1,y:.85*t,duration:1e3,ease:"Back.easeOut",delay:2e3,onComplete:()=>{this.tweens.add({targets:this.startButton,scaleX:1.1,scaleY:1.1,duration:800,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.tweens.add({targets:this.startButton,strokeThickness:{from:4,to:8},duration:800,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}}),setTimeout((()=>{this.input.on("pointerdown",(()=>{this.tempText.alpha=0,this.isTransitioning||(this.tempText.alpha=0,this.fnfetchAPI(window.trackingType+"StartCooking"),this.startButton.emit("pointerdown"),this.input.off("pointerdown"))}))}),2500),this.startButton.on("pointerover",(()=>{this.isTransitioning||this.tweens.add({targets:this.startButton,scale:1.1,duration:200,ease:"Power2"})})),this.startButton.on("pointerout",(()=>{this.isTransitioning||this.tweens.add({targets:this.startButton,scale:1,duration:200,ease:"Power2"})})),this.startButton.on("pointerdown",(()=>{this.isTransitioning||(this.isTransitioning=!0,this.startButton.removeInteractive(),this.tweens.killTweensOf(this.startButton),this.startButton.setScale(1),this.tweens.add({targets:[l,d,this.salmon,this.thermometer,this.tempText,this.startButton],alpha:0,duration:500,ease:"Power2",onComplete:()=>{this.showSelectionPage()}}))})));const c=this.add.image(e/2,t,"learnBtn"+a.language).setInteractive({useHandCursor:!0}).setScale(.555).setOrigin(.5,1).setDepth(1);c.on("pointerover",(()=>{this.tweens.add({targets:c,scale:.6,duration:100,ease:"Power2"})})),c.on("pointerout",(()=>{this.tweens.add({targets:c,scale:.56,duration:100,ease:"Power2"})})),c.on("pointerdown",(()=>{this.fnfetchAPI(window.trackingType+"LearnMore"),window.open(window.setTracker+"https://www.Canada.ca/salubritealiments","_blank"),this.tweens.add({targets:c,scale:.5,duration:100,ease:"Power2",onComplete:()=>{this.tweens.add({targets:c,scale:.56,duration:100,ease:"Back.easeOut",onComplete:()=>{window.open("https://www.Canada.ca/foodsafety","_blank")}})}})}))}showSelectionPage(){this.isTransitioning=!0;const{canvasWidth:e,canvasHeight:t,scaleFactor1:a}=s(this);let i=1.4;this.selectionTitle=this.add.text(e/2,.115*t,"Pick the choice of meat",{fontSize:`${Math.floor(48*i)}px`,fontFamily:"Asap",fill:"#ffffff",stroke:"#000000",strokeThickness:0,shadow:{color:"#000000",blur:2,fill:!0}}).setOrigin(.5),this.selectionTitle.alpha=0;let n=[{name:"chicken_uncooked",text:"Chicken drumstick : 74°C (165°F)",y:.18},{name:"beef_uncooked",text:"Beef hamburger : 71°C (160°F)",y:.4},{name:"salmon_uncooked",text:"Fish : 70°C (158°F)",y:.7-.05}];this.selectionTitle.setFontSize(`${Math.floor(48*i)}px`),this.selectionTitle.setText("Choisissez le type de viande"),n=[{name:"chicken_uncooked",text:"Pilon de poulet : 74 °C (165 °F)",y:.18},{name:"beef_uncooked",text:"Hamburger de bœuf : 71 °C (160 °F)",y:.4},{name:"salmon_uncooked",text:"Poisson : 70 °C (158 °F)",y:.7-.05}],this.optionContainers=[],n.forEach(((s,a)=>{const n=this.add.container(e/2,t*s.y);n.alpha=0;const o=this.add.image(0,0,s.name);o.setScale(.325*i).setOrigin(.5,0);const r=this.add.text(0,1.15*o.displayHeight,s.text,{fontSize:`${Math.floor(42)}px`,fontFamily:"Asap",fill:"#ffffff",align:"center",stroke:"#000000",strokeThickness:0,shadow:{color:"#000000",blur:2,fill:!0}}).setOrigin(.5),h=Math.max(o.displayWidth,r.displayWidth)+40,l=o.displayHeight+r.displayHeight+40,d=this.add.graphics();d.lineStyle(3,16777215,0),d.strokeRect(-h/2,-20,h,l),d.setDepth(0),n.add([o,r,d]);const c=new Phaser.Geom.Rectangle(-h/2,-20,h,l);n.setInteractive(c,Phaser.Geom.Rectangle.Contains),n.input.cursor="pointer",n.on("pointerdown",(()=>{if(!this.isTransitioning){this.isTransitioning=!0,this.optionContainers.forEach((e=>{e.removeInteractive()}));const a=n.list[0].texture.key;"chicken_uncooked"===a?this.fnfetchAPI(window.trackingType+"ChickenPicked"):"beef_uncooked"===a?this.fnfetchAPI(window.trackingType+"BeefPicked"):"salmon_uncooked"===a&&this.fnfetchAPI(window.trackingType+"FishPicked"),this.tweens.killAll(),this.optionContainers.forEach((e=>{e.list[0].preFX.clear()})),this.optionContainers.forEach((e=>{e!==n&&this.tweens.add({targets:e,alpha:0,scale:.8,duration:300,ease:"Power2"})})),this.tweens.add({targets:[this.selectionTitle],alpha:0,duration:300,ease:"Power2"});const o=n.list[0],r=n.list[1];this.tweens.add({targets:n,x:e/2,y:t/2,duration:500,ease:"Power2",onComplete:()=>{const a=this.add.graphics();a.lineStyle(4,16777215,0);const h=2.5*o.displayWidth,l=3*o.displayHeight;a.strokeRect(e/2-h/2,t/2-l/2,h,l),a.setDepth(0);const d=new Phaser.Geom.Rectangle(e/2-h/2,t/2-l/2,h,l);a.setInteractive(d,Phaser.Geom.Rectangle.Contains);let c=!1;a.on("pointerdown",(()=>{c=!0,this.tapCount++,this.tapHand&&this.tapHand.active&&this.tweens.add({targets:this.tapHand,alpha:0,duration:200,ease:"Power2",onComplete:()=>{this.tapHand.destroy()}})})),a.on("pointerup",(()=>{c=!1})),a.on("pointerout",(()=>{c=!1})),a.alpha=0,this.tweens.add({targets:a,alpha:1,duration:300,ease:"Power2"}),this.cookingAreaGraphics=a,this.tweens.add({targets:o,scale:.7,duration:600,ease:"Back.easeOut",onComplete:()=>{o.setAlpha(0),this.meatName=s.name.split("_")[0];const h=this.add.image(n.x,n.y,`${s.name.split("_")[0]}_uncooked`);h.setScale(o.scale),h.setDepth(2),h.setOrigin(.5,0),h.setAlpha(1);const l=this.add.image(n.x,n.y,`${s.name.split("_")[0]}_cooked`);l.setScale(o.scale),l.setDepth(2),l.setOrigin(.5,0),l.setAlpha(0);const d=this.add.image(.395*e,.45*t,"indicator1");d.setScale(.42),d.setOrigin(.5),s.name.includes("beef")?d.setDepth(1):d.setDepth(2),d.alpha=0,d.x-=200;const p=this.add.text(.395*e,.45*t,"0°C",{fontSize:`${Math.floor(25.2)}px`,fontFamily:"Montserrat",fill:"#ffffff",align:"center",shadow:{color:"#000000",blur:0,fill:!0}}).setOrigin(.5).setAngle(60);p.setDepth(4),p.alpha=0,this.tapHand=this.add.image(.5*e,d.y+.3*d.displayHeight,"taphand"),this.tapHand.setScale(1.4),this.tapHand.setOrigin(0),this.tapHand.setDepth(5),this.tapHand.setAlpha(0);const m=()=>{this.tweens.add({targets:this.tapHand,scale:1.2,duration:150,yoyo:!0,repeat:2,ease:"Bounce.easeIn",onComplete:()=>{}})};this.tweens.add({targets:d,x:s.name.includes("beef")?.395*e:s.name.includes("chicken")?.25*e:.3*e,alpha:1,duration:1e3,ease:"Power2",onComplete:()=>{p.x=d.x-.22*d.displayWidth,p.y=d.y-.3*d.displayHeight,this.tapHand.x=.5*e,this.tapHand.y=d.y+.51*d.displayHeight,this.tweens.add({targets:[p,this.tapHand],alpha:1,duration:500,ease:"Power2",onComplete:()=>{m();const e=(e=>{switch((e=e.replace("_uncooked","")).toLowerCase()){case"salmon":return"poisson";case"chicken":return"poulet";case"beef":return"bœuf";default:return e}})(s.name);(e=>{switch((e=e.replace("_uncooked","")).toLowerCase()){case"salmon":return"poisson";case"chicken":return"poulet";case"beef":;}})(s.name);const g=this.add.text(this.cameras.main.centerX,.18*t,`To cook to the correct temperature, tap and hold the ${e}.`,{fontSize:`${Math.floor(48*i)}px`,fontFamily:"Asap",fill:"#ffffff",align:"center",shadow:{color:"#000000",blur:2,fill:!0}}).setOrigin(.5);if(g.alpha=0,g.setFontSize(`${Math.floor(44*i)}px`),!document.querySelector(".cooking-progress-container")){const e=document.createElement("div");e.className="cooking-progress-container";const t=document.createElement("div");t.className="cooking-progress-text",t.textContent="";const s=document.createElement("div");s.className="cooking-progress-bar";const a=document.createElement("div");a.className="cooking-progress-fill",s.style.display="none",s.appendChild(a),e.appendChild(t),e.appendChild(s),document.body.appendChild(e)}this.cookingProgress=0;const u=document.querySelector(".cooking-progress-container"),f=document.querySelector(".cooking-progress-fill");this.time.delayedCall(1200,(()=>{u.style.display="block",this.progressTimer=this.time.addEvent({delay:1,callback:()=>{if("safe"===T&&(this.cookingProgress=Math.min(100,this.cookingProgress+.1),f.style.width=`${this.cookingProgress}%`),this.cookingProgress>=50)return this.progressTimer&&this.progressTimer.remove(),void(this.inactivityTimer&&clearTimeout(this.inactivityTimer));this.cookingProgress>=100&&(this.progressTimer&&this.progressTimer.remove(),this.time.delayedCall(500,(()=>{u.style.display="none"})))},loop:!0})})),this.events.once("shutdown",(()=>{u&&u.remove(),this.progressTimer&&this.progressTimer.remove()})),this.tweens.add({targets:g,alpha:1,duration:500,ease:"Power2",delay:1200});let y,w=0,k=70;k="chicken_uncooked"===s.name?74:"beef_uncooked"===s.name?71:70,this.tapCount=0;let T="start";const x=(e,t)=>{g.flashTween&&g.flashTween.remove(),g.setText(e),g.setStyle({fill:t}),g.setAlpha(1),g.flashTween=this.tweens.add({targets:g,alpha:.5,delay:500,duration:500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})};x(`Pour cuire à la température \nsécuritaire, taper et garder \nvotre doigt sur le ${e}`,"#ffffff"),this.startInactivityTimer(),y=this.time.addEvent({delay:400,callback:()=>{const e=w;if(c){w=Math.min(w+5,100);const t=w/k,s=Math.min(t,1);if(l.setAlpha(s),w>e){d.heartbeatTween&&d.heartbeatTween.stop();const e=.42;d.setScale(1.02*e),setTimeout((()=>{d.setScale(e)}),80)}}w<=k?p.setText(`${Math.round(w)}°C`):(w=k,p.setText(`${Math.round(k)}°C`),this.tempTextFloat||(this.tempTextFloat=this.add.text(l.x,l.y+.5*l.displayHeight,`${Math.round(k)}°C`,{fontSize:"180px",fill:"#00ff00",fontFamily:"Asap",stroke:"#ffffff",strokeThickness:12}).setOrigin(.5),this.tempTextFloat.setDepth(5),this.tempTextFloat.setScale(.5),this.tempTextFloat.alpha=.9,this.tweens.add({targets:this.tempTextFloat,alpha:0,scale:.9,y:this.tempTextFloat.y-200,duration:2750,delay:0,ease:"Power2",onComplete:()=>{this.tempTextFloat.destroy()}}))),P(),w>=k&&(this.cookingProgress=Math.min(100,this.cookingProgress+.5),f.style.width=`${this.cookingProgress}%`,this.cookingProgress>50&&(y&&y.destroy(),this.inactivityTimer&&clearTimeout(this.inactivityTimer),a.disableInteractive(),this.cookingProgress,l.setAlpha(1),this.smoke&&this.smoke.destroy(),this.smoke=this.add.image(l.x,l.y-.2*l.displayHeight,"smoke"),this.smoke.setScale(.7),this.smoke.setAlpha(0),this.smoke.setDepth(3),this.tweens.add({targets:this.smoke,alpha:.8,duration:800,ease:"Power2"}),this.tweens.add({targets:this.smoke,y:this.smoke.y-70,duration:2500,ease:"Power1",yoyo:!0,repeat:-1}),setTimeout((()=>{g.flashTween&&g.flashTween.remove(),g.setFontSize(`${Math.floor(50.4)}px`),g.setText(this.fnShowHotTip()),g.setStyle({fill:"#FFFFFF"}),g.setAlpha(1)}),2e3),this.tweens.add({targets:[this.headerText,g,u],alpha:0,delay:5e3,duration:500,ease:"Power2",onComplete:()=>{u.style.display="none",h.destroy(),this.time.delayedCall(100,(()=>{g.destroy(),this.tweens.add({targets:[d,p,n,l,this.smoke],alpha:0,duration:500,ease:"Power2",onComplete:()=>{o.destroy(),l.destroy(),n.destroy(),this.image.destroy(),this.smoke&&this.smoke.destroy(),this.cookingAreaGraphics&&this.cookingAreaGraphics.destroy(),this.showFinalScreen()}})}))}})),this.cookingProgress>=100&&(a.removeInteractive(),c=!1,y&&y.destroy(),g.flashTween&&g.flashTween.remove(),this.tweens.add({targets:[this.headerText,g,u],alpha:0,duration:500,ease:"Power2",onComplete:()=>{g.destroy(),u.style.display="none",this.time.delayedCall(2e3,(()=>{this.tweens.add({targets:[this.smoke],alpha:0,duration:500,ease:"Power2",onComplete:()=>{o.destroy(),l.destroy(),h.destroy(),n.destroy(),this.image.destroy(),this.smoke&&this.smoke.destroy(),this.cookingAreaGraphics&&this.cookingAreaGraphics.destroy(),this.showFinalScreen()}})}))}}),this.tweens.add({targets:o,alpha:0,duration:500,ease:"Power2"})))},loop:!0});const P=()=>{this.tapCount>=1&&"start"===T&&(T="monitoring"),"start"!==T&&(w>=k?"safe"!==T&&(T="safe",x(`Super ! Le ${e} est à la \nbonne température sécuritaire`,"#FBDF42")):"unsafe"!==T&&(T="unsafe",x(`Oups ! Le ${e} n'est pas \nà une température sécuritaire`,"#ff0000"))),"start"!==T&&(w>=k?"safe"!==T&&(T="safe",x(`Super ! Le ${e} est à la \nbonne température sécuritaire`,"#FBDF42")):"unsafe"!==T&&(T="unsafe",x(`Oups ! Le ${e} n'est pas \nà une température sécuritaire`,"#ff0000"))),w>=k?(p.setStyle({fill:"#000000"}),d.setTexture("indicator2")):(p.setStyle({fill:"#ffffff"}),d.setTexture("indicator1"))};this.events.once("shutdown",(()=>{g.flashTween&&g.flashTween.remove()})),this.tweens.add({targets:r,alpha:0,duration:300,ease:"Power2"})}})}}),this.tweens.add({targets:r,alpha:0,duration:300,ease:"Power2"})}})}})}})),this.optionContainers.push(n)})),this.tweens.add({targets:this.selectionTitle,alpha:1,duration:500,ease:"Power2"}),this.optionContainers.forEach(((e,t)=>{this.tweens.add({targets:e,alpha:1,duration:500,ease:"Power2",delay:300+200*t,onComplete:()=>{t===this.optionContainers.length-1&&(this.isTransitioning=!1,this.startGlowSequence(i))}})}))}startGlowSequence(e){this.optionContainers.forEach(((e,t)=>{const s=e.list[0];e.list[1];const a=s.preFX.addGlow(16777215,0,0,!1);this.tweens.add({targets:a,outerStrength:4,innerStrength:1,duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:1e3*t}),this.tweens.add({targets:s,scaleX:1.05*s.scaleX,scaleY:1.05*s.scaleY,duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:1e3*t})}))}fnfetchAPI(e){fetch(e,{method:"GET"}).then((e=>console.log("Tracking sent:",e.status))).catch((e=>console.error("Tracking error:",e)))}fnShowHotTip(){let e="";switch(this.meatName){case"chicken":e="Truc de pro :\nInsérez le thermomètre dans \nla partie la plus épaisse de la viande";break;case"beef":e="Truc de pro :\nPour les burgers, insérez \nle thermomètre dans le côté";break;case"salmon":e="Truc de pro :\nToujours laver le thermomètre \navant de le réutiliser";break;default:e=""}return e}startInactivityTimer(){this.inactivityTimer=null;const e=()=>{this.inactivityTimer&&clearTimeout(this.inactivityTimer),this.inactivityTimer=setTimeout((()=>{this.cameras.main.fadeOut(500,0,0,0),setTimeout((()=>{this.clickBG=!1,this.meatName="",this.tempTextFloat&&(this.tempTextFloat.destroy(),this.tempTextFloat=null),this.tapCount=0,this.isTransitioning=!1,this.scene.stop("MainMenu"),this.scene.start("Game")}),500)}),1e4)};this.input.on(Phaser.Input.Events.POINTER_DOWN,e),this.input.on(Phaser.Input.Events.POINTER_UP,e)}showFinalScreen(){this.clickBG||(this.clickBG=!0,this.mainlogo.setAlpha(0),this.clickBG=!1,this.meatName="",this.tempTextFloat&&(this.tempTextFloat.destroy(),this.tempTextFloat=null),this.tapCount=0,this.isTransitioning=!1,this.cameras.main.fadeOut(500,0,0,0),this.scene.stop("MainMenu"),this.scene.start("Game"))}update(){this.tempText&&this.thermometer&&(this.tempText.x=this.thermometer.x-.22*this.thermometer.displayWidth,this.tempText.y=this.thermometer.y-.3*this.thermometer.displayHeight)}}class r extends e.Scene{constructor(){super("Preloader")}init(){s(this),this.add.image(512,384,"background")}preload(){this.load.setPath(a.path),this.load.image("logo","logo.png"),this.load.image("indicator1","indicator1.png"),this.load.image("indicator2","indicator2.png"),this.load.image("beef_uncooked","beef2_uncooked.png"),this.load.image("salmon_uncooked","salmon_uncooked.png"),this.load.image("chicken_uncooked","chicken_uncooked.png"),this.load.image("beef_cooked","beef2_cooked.png"),this.load.image("salmon_cooked","salmon_cooked.png"),this.load.image("chicken_cooked","chicken_cooked.png"),this.load.image("tryagainbtnEN","tryagainbtn.png"),this.load.image("tryagainbtnFR","tryagainbtn2.png"),this.load.image("learnBtnEN","learnBtnEN.png"),this.load.image("learnBtnFR","learnBtnFR.png"),this.load.image("smoke","smoke.png"),this.load.image("taphand","taphand.png"),this.load.image("mainlogo","sig-blk-en.png")}create(){this.scene.start("MainMenu")}}const h={type:Phaser.AUTO,width:960,height:1440,parent:"game-container",background:"transparent",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},fps:{target:60,forceSetTimeOut:!0},transparent:!0,scene:[t,r,o,i,n]};new Phaser.Game(h);
