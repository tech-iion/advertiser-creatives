import{p as t}from"./phaser-D3nGQX_-.js";function e(t,e){let i,a,s=/Mobi|Android/i.test(navigator.userAgent),n=window.innerWidth,o=window.innerHeight;i=t.game.canvas.width,a=t.game.canvas.height;let h=o/n;return s||(h=1.85),{canvasWidth:i,canvasHeight:a,scaleFactor:h}}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class i extends t.Scene{constructor(){super("MainMenu")}create(){const{canvasWidth:t,canvasHeight:i,scaleFactor:a}=e(this);if(this.canvasWidth=t,this.canvasHeight=i,this.scaleFactor=a,this.bg=this.add.image(.5*t,0*i,"city"),this.bg.setOrigin(.5,0).setDepth(150),this.bg.setScale(.4*a),this.bg.alpha=0,this.audioToggleButton=document.getElementById("audio-toggle"),this.audioToggleButton){const t=document.querySelector("#game-container canvas");if(t){const e=t.getBoundingClientRect();console.log("[MainMenu] Canvas position - left:",e.left,"marginLeft:",t.style.marginLeft),this.audioToggleButton.style.setProperty("margin-left",e.left+"px","important"),this.audioToggleButton.style.display="flex",this.audioToggleButton.style.opacity=1}}this.initializeVideo(),this.drawgraphicsgrass=this.add.graphics(),this.drawgraphicsgrass.setDepth(150),this.drawgraphicsgrass.fillStyle(8066288,1),this.drawgraphicsgrass.fillRect(0,this.bg.y+.5*this.bg.displayHeight,t,i),this.wooden=this.add.image(.5*t,this.bg.y+.5*this.bg.displayHeight,"wooden"),this.wooden.setOrigin(.5,0).setDepth(150),this.wooden.setScale(.5*a),this.wooden.alpha=1,this.drawgraphicslogoback=this.add.graphics(),this.drawgraphicslogoback.setDepth(150),this.drawgraphicslogoback.fillStyle(8066288,.95),this.drawgraphicslogoback.fillRect(0,this.wooden.y+.1*this.wooden.displayHeight,t,.2*this.wooden.displayHeight),this.textLogoBack1=this.add.text(.5*t,0,"Real Work, Real Chaos",{fontFamily:"Poppins, sans-serif",fontSize:Math.round(35*this.scaleFactor)+"px",color:"#FFFFFF",fontStyle:"bold",align:"center"}),this.textLogoBack1.setOrigin(.5).setDepth(200),console.log(this.drawgraphicslogoback.y," rffsef"),this.textLogoBack1.y=this.wooden.y+.27*this.wooden.displayHeight,this.drawgraphicslogoback2=this.add.graphics(),this.drawgraphicslogoback2.setDepth(150),this.drawgraphicslogoback2.fillStyle(8066288,.95),this.drawgraphicslogoback2.fillRect(0,this.bg.y+1.95*this.bg.displayHeight,t,.06*i),this.textLogoBack2=this.add.text(.5*t,this.bg.y+1.91*this.bg.displayHeight+.05*i,"Receipts everywhere?",{fontFamily:"Poppins, sans-serif",fontSize:Math.round(24*a)+"px",color:"#FFFFFF",fontStyle:"bold",align:"center"}),this.textLogoBack2.setOrigin(.5).setDepth(200),console.log((this.wooden.y+.125*this.wooden.displayHeight)/this.canvasHeight*1e3," iionlogo y"),this.iionlogo=this.add.image(.5*t,this.wooden.y,"iionlogo"),this.iionlogo.setOrigin(.5,0).setDepth(150),this.iionlogo.setScale(.5*a),this.iionlogo.alpha=1,this.iionlogo.y=this.wooden.y+.125*this.wooden.displayHeight,this.stY=this.wooden.y+.125*this.wooden.displayHeight,this.receipt=this.add.image(.15*-t,this.wooden.y+.525*this.wooden.displayHeight,"receipt"),this.receipt.setOrigin(.5).setDepth(150),this.receipt.setScale(.5*a).setAngle(-20),this.receipt.alpha=1,this.hand76=this.add.image(.65*t,.8*i,"hand"),this.hand76.setOrigin(.5).setDepth(150),this.hand76.setScale(.2*a),this.hand76.alpha=1,setTimeout(()=>{this.receiptWobbleTween=this.tweens.add({targets:this.receipt,angle:{from:-20,to:-15},duration:800,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})},1e3),this.reTween=this.tweens.add({targets:this.receipt,x:.5*t,duration:1e3,ease:"Power2",yoyo:!1,repeat:0}),this.gameStarted=!1,setTimeout(()=>{this.input.once("pointerdown",()=>{if(console.log("[MainMenu] User clicked - starting game and video"),!this.gameStarted&&(this.gameStarted=!0,this.hand76&&(this.hand76.destroy(),this.hand76=null),this.tweens.add({targets:[this.textLogoBack1,this.drawgraphicslogoback,this.iionlogo],x:1.5*t,duration:1e3,ease:"Power2",yoyo:!1,repeat:0}),this.tweens.add({targets:[this.textLogoBack2,this.drawgraphicslogoback2],x:-1.5*t,duration:1e3,ease:"Power2",yoyo:!1,repeat:0}),this.receiptWobbleTween&&(this.receiptWobbleTween.stop(),this.receiptWobbleTween=null),console.log("[MainMenu] User clicked - starting game and video"),this.createStartScreen(),this.videoElement&&this.videoContainer)){this.videoContainer.style.display="block",this.audioMuted=!1,this.sound.mute=!1,this.audioToggleButton=document.getElementById("audio-toggle"),this.audioToggleButton&&this.audioToggleButton.classList.remove("muted");const t=this.sound;t.context&&"suspended"===t.context.state&&t.context.resume().then(()=>{console.log("[MainMenu] Audio context resumed successfully")}).catch(t=>{console.error("[MainMenu] Failed to resume audio context:",t)}),this.videoElement.volume=.68,this.videoElement.muted=!1,this.videoElement.play().then(()=>{console.log("[MainMenu] Video started playing with audio")}).catch(t=>{console.error("[MainMenu] Video play error:",t),this.videoElement&&(this.videoElement.muted=!0,this.audioMuted=!0,this.sound.mute=!0,this.audioToggleButton&&this.audioToggleButton.classList.add("muted"),this.videoElement.play().then(()=>{console.log("[MainMenu] Video playing muted (autoplay policy)")}).catch(t=>console.error("[MainMenu] Muted play failed:",t)))})}})},500)}initializeVideo(){if(console.log("[MainMenu] Initializing DOM video..."),this.audioMuted=!0,this.videoHidden=!1,this.videoContainer=document.getElementById("video-container"),this.videoElement=document.getElementById("game-video"),this.audioToggleButton=document.getElementById("audio-toggle"),this.audioToggleButton&&this.audioToggleButton.addEventListener("click",()=>this.toggleAudio()),this.videoElement&&this.videoContainer){const t=document.querySelector("canvas");if(t){const e=t.getBoundingClientRect(),i=t.style.width;if(i){this.videoContainer.style.width=i,this.videoContainer.style.left=e.left+"px",this.videoContainer.style.right="auto",this.audioToggleButton&&(this.audioToggleButton.style.left=e.left+10+"px",this.audioToggleButton.style.display="flex"),this.videoToggleButton&&(this.videoToggleButton.style.display="flex");const t=document.getElementById("final-screen");t&&(t.style.width=i,t.onclick=()=>{window.open("https://www.myob.com/au/products/solo","_blank")}),console.log("[MainMenu] Container widths set to:",i)}}this.videoElement.addEventListener("timeupdate",()=>{if(this.videoElement&&!this.videoPaused){const t=this.videoElement.duration-this.videoElement.currentTime;t<=.5&&t>0&&(this.videoElement.pause(),this.videoPaused=!0,console.log("[MainMenu] Video paused 0.5s before end"))}}),this.videoElement.addEventListener("ended",()=>{console.log("[MainMenu] Video ended - cleaning up gameplay"),this.cleanupGameplay()}),console.log("[MainMenu] DOM Video initialized, waiting for gameplay to start...")}else console.warn("[MainMenu] Video element or container not found")}createStartScreen(){console.log("[MainMenu] Creating start screen with scan animation"),this.reTween.stop(),this.reTween=null,this.tweenReceipt=this.tweens.add({targets:this.receipt,angle:0,scale:1*this.scaleFactor,duration:1e3,ease:"Power2",yoyo:!1,repeat:0}),this.tweens.add({targets:this.wooden,alpha:0,duration:500,delay:500,ease:"Power2",yoyo:!1,repeat:0});const t=this.scaleFactor;this.time.delayedCall(1e3,()=>{const e=this.receipt.getBounds();this.scanLine=this.add.graphics(),this.scanLine.setDepth(160);const i=.9*e.width,a=8*t,s=e.centerX-i/2,n=e.top;this.scanLine.fillStyle(65535,.9),this.scanLine.fillRect(s,n,i,a),this.scanLine.fillStyle(65535,.4),this.scanLine.fillRect(s,n-a,i,a),this.scanLine.fillRect(s,n+a,i,a),this.scanLine.fillStyle(16777215,.6),this.scanLine.fillRect(s+.1*i,n+.25*a,.8*i,.5*a),this.scanStartY=e.top,this.scanEndY=e.bottom,this.scanCurrentY=this.scanStartY,this.scanLineWidth=i,this.scanLineHeight=a,this.scanLineX=s,this.tweens.add({targets:this,scanCurrentY:this.scanEndY,duration:1500,ease:"Linear",repeat:1,yoyo:!1,onUpdate:()=>{this.updateScanLine()},onComplete:()=>{this.tweens.add({targets:this.scanLine,alpha:0,duration:300,ease:"Power2",onComplete:()=>{this.scanLine&&(this.scanLine.destroy(),this.scanLine=null);const t=this.add.graphics();t.fillStyle(16777215,.9),t.fillRect(e.left,e.top,e.width,e.height),t.setDepth(161),this.tweens.add({targets:t,alpha:0,duration:400,ease:"Power2",onComplete:()=>{t.destroy(),this.tweens.add({targets:this.receipt,alpha:0,duration:300,ease:"Power2",onComplete:()=>{this.receipt.destroy(),this.receipt=null,this.showAppImage()}})}})}})}})})}showAppImage(){console.log("[MainMenu] Showing app image"),this.appImage=this.add.image(.5*this.canvasWidth,.8*this.canvasHeight,"app"),this.appImage.setOrigin(.5).setDepth(160),this.appImage.setScale(.8*this.scaleFactor),this.appImage.alpha=0,this.tweens.add({targets:this.appImage,alpha:1,scale:1*this.scaleFactor,duration:500,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] App image shown")}}),this.clickhandapp=this.add.image(.5*this.canvasWidth,.8*this.canvasHeight,"clickhandapp"),this.clickhandapp.setOrigin(.5).setDepth(160),this.clickhandapp.setScale(1*this.scaleFactor),this.clickhandapp.alpha=0,this.playeralpha=this.add.image(.5*this.canvasWidth,.8*this.canvasHeight,"playeralpha"),this.playeralpha.setOrigin(.5).setDepth(160),this.playeralpha.setScale(1*this.scaleFactor),this.playeralpha.alpha=0,this.tweens.add({targets:this.clickhandapp,alpha:1,duration:250,repeat:-1,yoyo:!0,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] App image shown")}}),this.hand11=this.add.image(.5*this.canvasWidth,.835*this.canvasHeight,"hand"),this.hand11.setOrigin(.5).setDepth(160),this.hand11.setScale(.18*this.scaleFactor),this.hand11.alpha=0,this.tweens.add({targets:this.hand11,alpha:1,duration:500,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Hand shown - starting click animation"),this.handClickTween=this.tweens.add({targets:this.hand11,y:this.hand11.y-5,duration:200,ease:"Power2.easeIn",yoyo:!0,repeat:-1,repeatDelay:200,onYoyo:()=>{this.tweens.add({targets:this.hand11,y:this.hand11.y-5,duration:200,yoyo:!0,ease:"Sine.easeOut"})}})}}),this.input.off("pointerdown"),this.input.off("pointerup"),this.input.on("pointerdown",()=>{this.playeralpha=this.add.image(.5*this.canvasWidth,.8*this.canvasHeight,"playeralpha"),this.playeralpha.setOrigin(.5).setDepth(160),this.playeralpha.setScale(1*this.scaleFactor),this.playeralpha.alpha=1,this.input.off("pointerdown"),this.input.off("pointerup"),this.playerreceipt=this.add.image(.5*this.canvasWidth,1.5*this.canvasHeight,"playerreceipt"),this.playerreceipt.setOrigin(.5).setDepth(160),this.playerreceipt.setScale(.775*this.scaleFactor),this.playerreceipt.alpha=1,this.tweens.add({targets:this.playerreceipt,y:1*this.canvasHeight,duration:1e3,delay:500,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player receipt shown"),this.tweens.add({targets:this.playerreceipt,y:.525*this.canvasHeight,duration:1e3,delay:1e3,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player receipt shown"),this.hand=this.add.image(.65*this.canvasWidth,.95*this.canvasHeight,"hand"),this.hand.setOrigin(.5).setDepth(160),this.hand.setScale(.18*this.scaleFactor),this.hand.alpha=1,this.input.on("pointerdown",()=>{this.playerafterreceipt=this.add.image(.5*this.canvasWidth,1.425*this.canvasHeight,"playerafterreceipt"),this.playerafterreceipt.setOrigin(.5).setDepth(160),this.playerafterreceipt.setScale(1*this.scaleFactor),this.playerafterreceipt.alpha=1,this.tweens.add({targets:this.playerafterreceipt,y:.675*this.canvasHeight,duration:1e3,delay:0,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video"),this.input.off("pointerdown"),this.input.off("pointerup"),this.playeralpha.alpha=0,this.hand.alpha=0,this.playerreceipt.alpha=0,this.clickhandapp.setTexture("clickhandapp2"),this.hand11.x=.65*this.canvasWidth,this.tweens.add({targets:this.playerafterreceipt,y:.5*-this.canvasHeight,duration:1500,delay:1e3,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player after receipt shown - tweening bg2")}}),this.input.off("pointerdown"),this.input.off("pointerup"),this.playSecond()}})}),this.input.on("pointerup",()=>{})}})}})}),this.input.on("pointerup",()=>{this.input.off("pointerdown"),this.input.off("pointerup")}),this.bg=this.add.image(this.appImage.x+.0225*this.appImage.displayWidth,.8*this.canvasHeight,"bg"),this.bg.setOrigin(.5).setDepth(170),this.bg.setScale(1*this.scaleFactor),this.bg.alpha=1,this.playeroutline=this.add.image(.5*this.canvasWidth,.8*this.canvasHeight,"playeroutline"),this.playeroutline.setOrigin(.5).setDepth(170),this.playeroutline.setScale(1*this.scaleFactor),this.playeroutline.alpha=1}playSecond(){this.playeralpha=this.add.image(.5*this.canvasWidth,.8*this.canvasHeight,"playeralpha"),this.playeralpha.setOrigin(.5).setDepth(160),this.playeralpha.setScale(1*this.scaleFactor),this.playeralpha.alpha=0,this.playerreceipt2=this.add.image(.5*this.canvasWidth,1.5*this.canvasHeight,"playerreceipt2"),this.playerreceipt2.setOrigin(.5).setDepth(160),this.playerreceipt2.setScale(1*this.scaleFactor),this.playerreceipt2.alpha=1,this.slide=this.add.image(.5*this.canvasWidth,.1*this.canvasHeight,"slide"),this.slide.setOrigin(.5).setDepth(160),this.slide.setScale(1.5*this.scaleFactor),this.slide.alpha=0,this.taptoplay=this.add.image(.5*this.canvasWidth,.8*this.canvasHeight,"taptoplay"),this.taptoplay.setOrigin(.5).setDepth(160),this.taptoplay.setScale(.45*this.scaleFactor),this.taptoplay.alpha=0,this.input.on("pointerup",()=>{this.tweens.add({targets:this.taptoplay,alpha:1,y:.85*this.canvasHeight,duration:1e3,delay:0,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video")}}),this.slide.alpha=1,this.tweens.add({targets:this.slide,y:.55*this.canvasHeight,scale:.45*this.scaleFactor,duration:1e3,delay:0,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video"),this.slidetwn=this.tweens.add({targets:this.slide,scale:.4*this.scaleFactor,duration:500,delay:0,ease:"Back.out",yoyo:!0,repeat:-1,onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video")}}),this.input.off("pointerup"),this.input.off("pointerdown"),this.input.on("pointerup",()=>{this.input.off("pointerup"),this.input.off("pointerdown"),this.slidetwn.stop(),this.slidetwn=null,this.tweens.add({targets:this.slide,scale:0*this.scaleFactor,duration:500,delay:0,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video")}}),this.tick=this.add.image(.5*this.canvasWidth,.55*this.canvasHeight,"tick"),this.tick.setOrigin(.5).setDepth(160),this.tick.setScale(.25*this.scaleFactor),this.tick.alpha=1,this.donetxt=this.add.image(.5*this.canvasWidth,.65*this.canvasHeight,"donetxt"),this.donetxt.setOrigin(.5).setDepth(160),this.donetxt.setScale(.1*this.scaleFactor),this.donetxt.alpha=1,this.tweens.add({targets:this.tick,scale:1.25*this.scaleFactor,duration:500,delay:0,ease:"Back.out",yoyo:!1,repeat:0,onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video")}}),this.tweens.add({targets:this.taptoplay,y:1.5*this.canvasHeight,duration:1e3,delay:0,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video")}}),this.playerafterreceipt11=this.add.image(.5*this.canvasWidth,1.5*this.canvasHeight,"playerafterreceipt"),this.playerafterreceipt11.setOrigin(.5).setDepth(160),this.playerafterreceipt11.setScale(1*this.scaleFactor),this.playerafterreceipt11.alpha=1,this.hand.alpha=0,this.hand11.alpha=0,this.clickhandapp.x=4*this.canvasWidth,this.tweens.add({targets:this.playerafterreceipt11,y:.8*this.canvasHeight,duration:1e3,delay:2500,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video"),this.tweens.add({targets:this.playerafterreceipt11,y:.5*-this.canvasHeight,duration:1500,delay:1500,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player after receipt shown - tweening bg2"),setTimeout(()=>{this.fnfinalCTA()},250)}}),this.input.off("pointerdown"),this.input.off("pointerup"),this.tweens.add({targets:[this.tick,this.donetxt],scale:0,duration:500,delay:0,ease:"Back.out",yoyo:!1,repeat:0,onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video")}}),this.appImage1=this.add.image(.5*this.canvasWidth,.8*this.canvasHeight,"app"),this.appImage1.setOrigin(.5).setDepth(this.playerreceipt2.depth-1),this.appImage1.setScale(.8*this.scaleFactor),this.appImage1.alpha=0,this.appImage1=this.add.image(.5*this.canvasWidth,.8*this.canvasHeight,"app"),this.appImage1.setOrigin(.5).setDepth(this.playerreceipt2.depth-1),this.appImage1.setScale(.8*this.scaleFactor),this.appImage1.alpha=0,this.tweens.add({targets:this.appImage1,alpha:1,scale:1*this.scaleFactor,duration:500,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] App image shown")}}),this.tweens.add({targets:[this.playerreceipt2,this.playeralpha],alpha:0,duration:500,delay:0,ease:"Back.out",yoyo:!1,repeat:0,onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video")}})}})})}}),this.playeralpha.alpha=1,this.tweens.add({targets:this.playerreceipt2,y:.8*this.canvasHeight,duration:1e3,delay:0,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video")}})}),this.input.on("pointerdown",()=>{}),this.playeroutline=this.add.image(.5*this.canvasWidth,.8*this.canvasHeight,"playeroutline"),this.playeroutline.setOrigin(.5).setDepth(170),this.playeroutline.setScale(1*this.scaleFactor),this.playeroutline.alpha=1}fnfinalCTA(){this.tweens.add({targets:this.bg2,alpha:1,duration:1e3,delay:1500,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video"),this.bg2=this.add.image(.5*this.canvasWidth,.8*this.canvasHeight,"bg2"),this.bg2.setOrigin(.5).setDepth(210),this.bg2.setScale(1*this.scaleFactor),this.bg2.alpha=0,this.tweens.add({targets:this.bg2,alpha:1,duration:1e3,delay:0,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video")}}),this.mobile3=this.add.image(.5*this.canvasWidth,1.35*this.canvasHeight,"mobile3"),this.mobile3.setOrigin(.5,0).setDepth(210),this.mobile3.setScale(.4*this.scaleFactor),this.mobile3.alpha=1,this.iionlogo=this.add.image(.5*this.canvasWidth,this.stY,"iionlogo"),this.iionlogo.setOrigin(.5,0).setDepth(300),this.iionlogo.setScale(.5*this.scaleFactor),this.iionlogo.alpha=1,this.ctaText=this.add.text(.5*this.canvasWidth,this.stY+1.75*this.iionlogo.displayHeight,"Life looks good with \nless admin.",{fontFamily:"Poppins, sans-serif",fontSize:Math.round(46*this.scaleFactor)+"px",color:"#FFFFFF",fontStyle:"bold",align:"center"}),this.ctaText.setOrigin(.5).setDepth(300),this.ctaBtn=this.add.image(.5*this.canvasWidth,this.stY+2.45*this.iionlogo.displayHeight,"ctaBtn"),this.ctaBtn.setOrigin(.5,0).setDepth(300),this.ctaBtn.setScale(.16*this.scaleFactor),this.ctaBtn.alpha=1,this.tweens.add({targets:this.mobile3,alpha:1,y:this.ctaBtn.y+this.ctaBtn.displayHeight,duration:1e3,delay:0,ease:"Back.out",onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video"),this.tweens.add({targets:this.mobile3,y:this.ctaBtn.y+1.1*this.ctaBtn.displayHeight,duration:1e3,delay:0,repeat:-1,yoyo:!0,ease:"Back.in",onComplete:()=>{console.log("[MainMenu] Player after receipt shown - stopping video")}}),this.input.on("pointerdown",()=>{console.log("[MainMenu] User clicked - opening window"),window.open("https://www.myob.com/au/products/solo","_blank")})}})}})}updateScanLine(){if(!this.scanLine)return;const t=this.scanLineHeight,e=this.scanLineWidth,i=this.scanLineX,a=this.scanCurrentY;this.scanLine.clear(),this.scanLine.fillStyle(65535,.9),this.scanLine.fillRect(i,a,e,t),this.scanLine.fillStyle(65535,.4),this.scanLine.fillRect(i,a-t,e,t),this.scanLine.fillStyle(65535,.3),this.scanLine.fillRect(i,a+t,e,.5*t),this.scanLine.fillStyle(16777215,.7),this.scanLine.fillRect(i+.1*e,a+.3*t,.8*e,.4*t)}cleanupGameplay(){console.log("[MainMenu] Cleaning up gameplay elements");const t=[];this.receipt&&t.push(this.receipt),this.wooden&&t.push(this.wooden),this.drawgraphicsgrass&&t.push(this.drawgraphicsgrass),this.bg&&t.push(this.bg),this.tweens.add({targets:t,alpha:0,duration:800,ease:"Power2",onComplete:()=>{t.forEach(t=>{t&&t.destroy&&t.destroy()}),console.log("[MainMenu] Gameplay cleanup complete")}})}finalCTAPage(){console.log("[MainMenu] Final CTA page - showing DOM final screen");const t=document.getElementById("app");t&&(t.style.display="none"),this.videoContainer&&(this.videoContainer.style.display="none");const e=document.getElementById("final-screen");e&&(e.style.display="block",e.offsetHeight,e.style.opacity="1"),console.log("[MainMenu] Final CTA page complete")}toggleAudio(){this.audioMuted=!this.audioMuted,this.videoElement&&(this.videoElement.muted=this.audioMuted),this.audioToggleButton&&(this.audioMuted?this.audioToggleButton.classList.add("muted"):this.audioToggleButton.classList.remove("muted")),console.log("[MainMenu] Audio muted:",this.audioMuted)}toggleVideoVisibility(){this.videoHidden=!this.videoHidden,this.videoContainer&&(this.videoHidden?(this.videoContainer.classList.add("hidden"),this.videoElement&&this.videoElement.pause()):(this.videoContainer.classList.remove("hidden"),this.videoElement&&this.gameStarted&&this.videoElement.play().catch(t=>{console.error("[MainMenu] Error resuming video:",t)}))),this.videoToggleButton&&(this.videoHidden?this.videoToggleButton.classList.add("paused"):this.videoToggleButton.classList.remove("paused")),this.audioToggleButton&&(this.audioToggleButton.style.top=this.videoHidden?"10px":"35vh"),console.log("[MainMenu] Video hidden:",this.videoHidden)}}class a extends t.Scene{constructor(){super("Preloader")}init(){const{canvasWidth:t,canvasHeight:i,scaleFactor:a}=e(this);this.canvasWidth=t,this.canvasHeight=i,this.scaleFactor=a}createLoadingUI(){this.add.text(this.canvasWidth/2,this.canvasHeight/2-50*this.scaleFactor,"",{fontFamily:"FlameBold",fontSize:28*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#E10E14",strokeThickness:5}).setOrigin(.5);const t=.6*this.canvasWidth,e=25*this.scaleFactor,i=12*this.scaleFactor;this.loadingBarContainer=this.add.graphics(),this.loadingBarContainer.lineStyle(3*this.scaleFactor,14749204,1),this.loadingBarContainer.fillStyle(3355443,1),this.loadingBarContainer.fillRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,i),this.loadingBarContainer.strokeRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,i),this.loadingBarGraphics=this.add.graphics(),this.barWidth=t,this.barHeight=e,this.borderRadius=i,this.barX=this.canvasWidth/2-t/2,this.barY=this.canvasHeight/2-e/2,this.percentText=this.add.text(this.canvasWidth/2,this.canvasHeight/2+40*this.scaleFactor,"0%",{fontFamily:"BukaBird",fontSize:22*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#000000",strokeThickness:3}),this.percentText.setOrigin(.5)}preload(){this.add.sprite(this.canvasWidth/2,.4*this.canvasHeight,"iionlogo").setScale(.8);let t=this.add.rectangle(this.canvasWidth/2,this.canvasHeight/2,560,10,13224393);t.width=590,t.alpha=.4;let e=this.add.rectangle(this.canvasWidth/2,this.canvasHeight/2,560,10,16777215);e.alpha=.8,this.load.on("progress",t=>{e.width=590*t}),this.load.on("complete",()=>{setTimeout(()=>{this.scene.start("MainMenu")},250)},this),this.load.setPath("assets"),this.load.image("city","city.png"),this.load.image("app","player1.png"),this.load.image("clickhandapp","player2.png"),this.load.image("clickhandapp2","player3.png"),this.load.image("slide","slide.png"),this.load.image("tick","tick.png"),this.load.image("iionorb","iionorb.png"),this.load.image("taptoplay","taptoplay.png"),this.load.image("hand","hand.png"),this.load.image("finalpage","finalpage.png"),this.load.image("finallogo","finallogo.png"),this.load.image("wooden","wooden.png"),this.load.image("receipt","receipt.png"),this.load.image("playeralpha","playeralpha.png"),this.load.image("playerreceipt","playerreceipt.png"),this.load.image("playerreceipt2","playerreceipt2.png"),this.load.image("playeroutline","playeroutline.png"),this.load.image("playerafterreceipt","playerafterreceipt.png"),this.load.image("bg","bg.png"),this.load.image("bg2","bg2.png"),this.load.image("mobile2","mobile2.png"),this.load.image("mobile3","mobile3.png"),this.load.image("ctaBtn","ctabtn.png"),this.load.image("donetxt","donetxt.png")}}class s extends t.Scene{constructor(){super("Boot")}init(){const{canvasWidth:t,canvasHeight:i,scaleFactor:a}=e(this);this.canvasWidth=t,this.canvasHeight=i,this.scaleFactor=a}createLoadingUI(){this.add.text(this.canvasWidth/2,this.canvasHeight/2-50*this.scaleFactor,"",{fontFamily:"FlameBold",fontSize:28*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#E10E14",strokeThickness:5}).setOrigin(.5);const t=.6*this.canvasWidth,e=25*this.scaleFactor,i=12*this.scaleFactor;this.loadingBarContainer=this.add.graphics(),this.loadingBarContainer.lineStyle(3*this.scaleFactor,14749204,1),this.loadingBarContainer.fillStyle(3355443,1),this.loadingBarContainer.fillRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,i),this.loadingBarContainer.strokeRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,i),this.loadingBarGraphics=this.add.graphics(),this.barWidth=t,this.barHeight=e,this.borderRadius=i,this.barX=this.canvasWidth/2-t/2,this.barY=this.canvasHeight/2-e/2,this.percentText=this.add.text(this.canvasWidth/2,this.canvasHeight/2+40*this.scaleFactor,"0%",{fontFamily:"BukaBird",fontSize:22*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#000000",strokeThickness:3}),this.percentText.setOrigin(.5)}preload(){this.load.setPath(window.trackingPath),this.load.image("iionlogo","iionlogo.png")}create(){const t=document.querySelector("#game-container canvas"),e=document.getElementById("video-container"),i=document.getElementById("final-screen");if(t&&e){const a=t.style.width;console.log("[Boot] Canvas width:",a),e.style.width=a,e.style.maxWidth=a,i&&(i.style.width=a)}this.scene.start("Preloader")}}let n=1080,o=1920,h=/Mobi|Android/i.test(navigator.userAgent);h||(n=1080,o=1920);const l={type:Phaser.AUTO,parent:"game-container",width:n,height:o,scale:{mode:h?Phaser.Scale.ENVELOP:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},transparent:!0,scene:[s,a,i],dom:{createContainer:!0},fps:{target:60,forceSetTimeOut:!0}};new Phaser.Game(l);
