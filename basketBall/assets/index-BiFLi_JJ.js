import{p as t,P as e}from"./phaser-Dp_CM4nq.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class s extends t.Scene{constructor(){super("Background")}create(){const t=this.scale.getViewPort(this.cameras.main);this.bg=this.add.image(0,0,"background"),this.bg.setOrigin(0,0),this.bg.setDisplaySize(t.width,t.height),this.ts=this.add.tileSprite(0,0,t.width,t.height,"assets","tile"),this.ts.setOrigin(0,0),this.scale.on("resize",this.resize,this)}update(){this.ts.tilePositionX-=2}resize(){const t=this.scale.getViewPort();this.bg.setDisplaySize(t.width,t.height),this.ts.setDisplaySize(t.width,t.height)}}const i=Object.freeze({UNKNOWN:"UNKNOWN",API_UNAVAILABLE:"API_UNAVAILABLE",INVALID_PARAMS:"INVALID_PARAMS",SIZE_LIMIT_EXCEEDED:"SIZE_LIMIT_EXCEEDED"}),a={version:"unloaded",inPlayablesEnv:!1,_ytgameRef:null,_firstFrameReady:!1,_gameReady:!1,_unsetAudioCallback:void 0,_language:"unavailable",_data:null,boot:function(t){const e=()=>{window.ytgame?(this._ytgameRef=window.ytgame,this.version=this._ytgameRef.SDK_VERSION,this.inPlayablesEnv=this._ytgameRef.IN_PLAYABLES_ENV):console.error("YouTube Playables SDK is not available."),t()};if("complete"===document.readyState||"interactive"===document.readyState)return void e();const s=()=>{document.removeEventListener("DOMContentLoaded",s,!0),window.removeEventListener("load",s,!0),e()};document.body?(document.addEventListener("DOMContentLoaded",s,!0),window.addEventListener("load",s,!0)):window.setTimeout(s,20)},firstFrameReady:function(){this.isLoaded()&&!this._firstFrameReady&&(this._ytgameRef.game.firstFrameReady(),this._firstFrameReady=!0)},gameReady:function(){this.isLoaded()&&!this._gameReady&&(this._firstFrameReady?(this._ytgameRef.game.gameReady(),this._gameReady=!0):console.error("gameReady called before firstFrameReady"))},isFirstFrameReady:function(){return this._firstFrameReady},isGameReady:function(){return this._gameReady},isLoaded:function(){return this._ytgameRef&&this.inPlayablesEnv},isReady:function(){return this.isLoaded()&&this._firstFrameReady&&this._gameReady},sendScore:function(t){var e;if(this.isReady())try{null==(e=this._ytgameRef)||e.engagement.sendScore({value:t})}catch(s){s.errorType&&this.handleError(s.errorType)}},setOnPause:function(t){this.isLoaded()&&this._ytgameRef.system.onPause(t)},setOnResume:function(t){this.isLoaded()&&this._ytgameRef.system.onResume(t)},loadData:function(){return new Promise(((t,e)=>{this.isLoaded()?this._ytgameRef.game.loadData().then((s=>{if(s)try{const e=JSON.parse(s);this._data=e,t(e)}catch(i){console.error("Failed to parse loadData"),this.logError(),e(i)}else t()})).catch((t=>{console.error("Failed to loadData"),t.errorType&&this.handleError(t.errorType),this.logError(),e(t)})):t()}))},logError:function(){this.isLoaded()&&this._ytgameRef.health.logError()},logWarning:function(){this.isLoaded()&&this._ytgameRef.health.logWarning()},hasLoneSurrogates:function(t){const e=new RegExp("(?<![\\uD800-\\uDBFF])[\\uDC00-\\uDFFF]");return/[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(t)||e.test(t)},saveData:function(t){return new Promise(((e,s)=>{if(this.isLoaded()){const i=JSON.stringify(t);this.hasLoneSurrogates(i)&&console.warn("Lone surrogates found in the JSON string");const a=i.replace(/[\uD800-\uDBFF](?![\uDC00-\uDFFF])/g,"");this._ytgameRef.game.saveData(a).then((()=>{e(t)})).catch((t=>{console.error("Failed to saveData"),t.errorType&&this.handleError(t.errorType),this.logError(),s(t)}))}else e()}))},getData:function(){return this._data},loadLanguage:function(){return new Promise(((t,e)=>{this.isLoaded()?this._ytgameRef.system.getLanguage().then((e=>{this._language=e,t(e)})).catch((t=>{console.error("Failed to getLanguage"),this.logError(),e(t)})):t(this._language)}))},getLanguage:function(){return this._language},isAudioEnabled:function(){return!this.isLoaded()||this._ytgameRef.system.isAudioEnabled()},setAudioChangeCallback:function(t){this.isLoaded()&&(this._unsetAudioCallback&&this._unsetAudioCallback(),this._unsetAudioCallback=this._ytgameRef.system.onAudioEnabledChange(t))},unsetAudioChangeCallback:function(){this.__unsetAudioCallback&&(this._unsetAudioCallback(),this._unsetAudioCallback=void 0)},handleError:function(t){let e=null;switch(t){case i.UNKNOWN:console.error("The error is unknown."),e=i.UNKNOWN;break;case i.API_UNAVAILABLE:console.error("The API is temporarily unavailable. Please try again later."),e=i.API_UNAVAILABLE;break;case i.INVALID_PARAMS:console.error("The API was called with invalid parameters."),e=i.INVALID_PARAMS;break;case i.SIZE_LIMIT_EXCEEDED:console.error("The API was called with parameters exceeding the size limit."),e=i.SIZE_LIMIT_EXCEEDED;break;default:console.error("Unhandled error type.")}return e},withTimeout:function(t,e=2e3){return new Promise(((s,i)=>{const a=setTimeout((()=>{i(new Error("Operation timed out"))}),e);t.then((t=>{clearTimeout(a),s(t)})).catch((t=>{clearTimeout(a),i(t)}))}))}};class r extends t.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}async create(){try{const t=await a.withTimeout(a.loadData(),1e3);console.log("loadData() result",t),this.registry.set("ball1",Phaser.Utils.Objects.GetFastValue(t,"ball1",!0)),this.registry.set("ball2",Phaser.Utils.Objects.GetFastValue(t,"ball2",!1)),this.registry.set("ball3",Phaser.Utils.Objects.GetFastValue(t,"ball3",!1)),this.registry.set("ball4",Phaser.Utils.Objects.GetFastValue(t,"ball4",!1)),this.registry.set("ball5",Phaser.Utils.Objects.GetFastValue(t,"ball5",!1)),this.registry.set("ball6",Phaser.Utils.Objects.GetFastValue(t,"ball6",!1)),this.registry.set("activeBall",Phaser.Utils.Objects.GetFastValue(t,"activeBall","ball1"))}catch(t){console.error(t)}a.setOnPause((()=>{console.log("YouTube Playables API has requested game pause"),this.game.pause()})),a.setOnResume((()=>{console.log("YouTube Playables API has requested game resume"),this.game.resume()})),this.scene.start("Preloader")}}class o{constructor(t,e){this.scene=t,this.matter=t.matter,this.active=!1,this.ball=this.matter.add.image(-1e3,0,"assets",t.registry.get("activeBall")).setVisible(!1),this.ball.name=e.toString(),this.ball.setCircle(32,{friction:.8,frictionStatic:.8,restitution:.4,density:.004,label:"ball"}),this.ball.setCollisionGroup(t.basketCollisionGroup),this.ball.setCollisionCategory(t.ballCollisionCategory),this.ball.setCollidesWith(t.basketCollisionGroup),this.scene.matter.world.remove(this.ball.body),this.view=t.scale.getViewPort(t.cameras.main),t.sys.updateList.add(this)}throw(t,e){this.ball.setPosition(t,e),this.ball.setVisible(!0),this.scene.matter.world.add(this.ball.body),this.ball.setVelocityX(0),this.ball.setVelocityY(-35),t<this.view.centerX?this.ball.setAngularVelocity(-.12):this.ball.setAngularVelocity(.12),this.ball.setData("hitTop1",!1),this.ball.setData("hitBottom1",!1),this.ball.setData("hitLeft1",!1),this.ball.setData("hitRight1",!1),this.ball.setData("scored1",!1),this.ball.setData("missed1",!1),this.ball.setData("hitTop2",!1),this.ball.setData("hitBottom2",!1),this.ball.setData("hitLeft2",!1),this.ball.setData("hitRight2",!1),this.ball.setData("scored2",!1),this.ball.setData("missed2",!1),this.active=!0}preUpdate(){this.active&&this.ball&&this.ball.y>this.view.bottom+300&&(this.active=!1,this.ball.setVisible(!1),this.ball.setPosition(-1e3,0),this.scene.matter.world.remove(this.ball.body))}destroy(){this.scene.sys.updateList.remove(this),this.ball.destroy()}}class n{constructor(t,e,s){this.scene=e,this.matter=e.matter,this.tweens=e.tweens,this.id=t,this.active=!1,this.visible=!1,this.position=new Phaser.Math.Vector2(0,0),this.speed=new Phaser.Math.Vector2(0,0),this.targetX=new Phaser.Math.Vector2(0,0),this.targetY=new Phaser.Math.Vector2(0,0),this.easeX="Sine.easeInOut",this.easeY="Power2",this.basket=e.add.image(0,0,"basket").setOrigin(.5,0).setName(t),this.netGraphic=e.add.graphics().setDepth(9),this.hoop=e.add.image(0,0,"assets","hoop").setOrigin(.5,0).setDepth(10);const i=this.matter.bodies.rectangle(-66,52,16,54,{label:"left",chamfer:{radius:[0,8,8,0]},restitution:.2}),a=this.matter.bodies.rectangle(66,52,16,54,{label:"right",chamfer:{radius:[8,0,0,8]},restitution:.2}),r=this.matter.bodies.rectangle(0,0,128,32,{isSensor:!0,label:"top"}),o=this.matter.bodies.rectangle(0,75,100,35,{isSensor:!0,label:"bottom"});this.body=this.matter.body.create({parts:[i,a,r,o],isStatic:!0,collisionFilter:{group:s},gameObject:this.basket}),this.basket.setVisible(!1),this.hoop.setVisible(!1),this.netGraphic.setVisible(!1),e.sys.updateList.add(this)}setActive(t,e){return this.active=!0,this.basket.setVisible(!0),this.hoop.setVisible(!0),this.netGraphic.setVisible(!0),this.position.set(t,e),this.createNet(),this.matter.world.add(this.body),this.matter.world.add(this.net),this.syncPositions(),this}setInActive(){return this.active=!1,this.basket.setVisible(!1),this.hoop.setVisible(!1),this.netGraphic.setVisible(!1),this.matter.world.remove(this.body),this.matter.world.remove(this.net),this}setXSpeed(t){return this.speed.x=t,this}setYSpeed(t){return this.speed.y=t,this}setSpeed(t,e=0){return this.speed.set(t,e),this}setTweenXBetween(t,e){return this.targetX.set(t,e),this}setTweenYBetween(t,e){return this.targetY.set(t,e),this}setXEase(t){return this.easeX=t,this}setYEase(t){return this.easeY=t,this}setEase(t,e){return this.easeX=t,e&&(this.easeY=e),this}startHorizontalTween(){this.tweens.add({targets:this.position,x:this.targetX.y,ease:this.easeX,duration:this.speed.x,onComplete:()=>this.loopHorizontalTween()})}loopHorizontalTween(){this.tweens.add({targets:this.position,x:this.targetX.x,ease:this.easeX,duration:this.speed.x,onComplete:()=>this.startHorizontalTween()})}startVerticalTween(){this.tweens.add({targets:this.position,y:this.targetY.y,ease:this.easeY,duration:this.speed.y,onComplete:()=>this.loopVerticalTween()})}loopVerticalTween(){this.tweens.add({targets:this.position,y:this.targetY.x,ease:this.easeY,duration:this.speed.y,onComplete:()=>this.startVerticalTween()})}createNet(){this.net=this.matter.composites.softBody(this.position.x-60,this.position.y+160,7,5,0,0,!1,5,{friction:.01},{stiffness:.09});for(let t=0;t<this.net.bodies.length;t++){const e=this.net.bodies[t];t<7&&(e.isStatic=!0),e.collisionFilter.mask=0}}pullNet(){const t=this.net.bodies;this.matter.body.setVelocity(t[31],{x:0,y:20}),this.matter.body.setVelocity(t[23],{x:0,y:20}),this.matter.body.setVelocity(t[24],{x:0,y:20}),this.matter.body.setVelocity(t[25],{x:0,y:20})}preUpdate(){this.syncPositions(),this.renderNet()}syncPositions(){if(this.basket.setPosition(this.position.x,this.position.y),this.hoop.setPosition(this.position.x,this.position.y+159),this.matter.body.setPosition(this.body,{x:this.position.x,y:this.position.y+168}),this.net){let t=this.body.position.x-50;for(let e=0;e<7;e++){const s=this.net.bodies[e];this.matter.body.setPosition(s,{x:t+16*e,y:this.body.position.y})}}}renderNet(){const t=this.netGraphic,e=this.matter.vector;t.clear(),t.lineStyle(2,16777215,1);const s=this.matter.composite.allConstraints(this.matter.world.localWorld);for(let i=0;i<s.length;i++){const a=s[i],r=a.bodyA,o=a.bodyB,n=r?e.add(r.position,a.pointA):a.pointA,l=o?e.add(o.position,a.pointB):a.pointB;t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(l.x,l.y),t.strokePath()}}destroy(){this.scene.sys.updateList.remove(this),this.basket.destroy(),this.hoop.destroy(),this.netGraphic.destroy()}}class l extends t.Scene{constructor(){super("Game")}create(){this.view=this.scale.getViewPort(this.cameras.main),this.scene.launch("GameBackground"),this.scene.bringToTop(),this.basketCollisionGroup=this.matter.world.nextGroup(),this.ballCollisionCategory=this.matter.world.nextCategory(),this.basket1=new n(1,this,this.basketCollisionGroup),this.basket2=new n(2,this,this.basketCollisionGroup),this.balls=[];for(let t=0;t<8;t++)this.balls.push(new o(this,t));this.matter.world.on("collisionstart",((t,e,s)=>this.collisionCheck(t,e,s))),this.matter.world.on("collisionactive",((t,e,s)=>this.collisionCheck(t,e,s))),this.input.on("pointerdown",(t=>this.throwBall(t))),this.registry.set("shots",50),this.registry.set("score",0),this.pendingGameOver=!1,this.showHand(),this.checkStage()}checkStage(){const t=this.view.left+190,e=this.view.right-190,s=this.view.top+128,i=this.registry.get("shots"),a=this.basket1,r=this.basket2;switch(i){case 50:a.setActive(t,s),a.setTweenXBetween(t,e).setXSpeed(6e3).setXEase("Linear"),a.startHorizontalTween(),this.sound.play("next-stage");break;case 45:a.setEase("Sine.easeInOut").setXSpeed(5e3),this.sound.play("next-stage");break;case 40:a.setXSpeed(4e3),this.sound.play("next-stage");break;case 35:r.setActive(t,s+380),r.setTweenXBetween(t,e).setXSpeed(5e3).setXEase("Sine.easeInOut"),r.startHorizontalTween(),this.sound.play("next-stage");break;case 25:a.setTweenYBetween(s,s+150).setYSpeed(2e3).setYEase("Sine.easeInOut"),a.startVerticalTween(),this.sound.play("next-stage");break;case 20:r.setXSpeed(4e3),this.sound.play("next-stage");break;case 10:r.setTweenYBetween(s+380,s+480).setYSpeed(2e3).setYEase("Sine.easeInOut"),r.startVerticalTween(),this.sound.play("next-stage");break;case 0:this.pendingGameOver=!0,this.sound.play("next-stage")}}throwBall(t){this.handCursor&&(this.handCursor.destroy(),this.handCursor=null);const e=Phaser.Utils.Array.GetFirst(this.balls,"active",!1);if(e&&this.registry.get("shots")>0){const s=t.worldY<this.view.centerY?this.view.centerY:t.worldY;e.throw(t.worldX,s),this.registry.inc("shots",-1),this.checkStage(),this.sound.play("throw")}}showHand(){const t=this.view.centerX,e=this.view.centerY+200,s=this.view.right,i=this.view.bottom;this.handCursor=this.add.sprite(s,i,"hands",1).setDepth(20).setAlpha(0),this.tweens.add({targets:this.handCursor,x:{value:t,duration:1e3,ease:"Sine.easeOut"},y:{value:e,duration:1500,ease:"Sine.easeOut"},alpha:{value:1,duration:500,ease:"Linear"},onComplete:()=>{this.handCursor&&this.handCursor.play("tapToStart")}})}collisionCheck(t,e,s){let i=null,a=null,r=null,o=null,n=null,l=null;"ball"===e.label?(i=e,a="top"===s.label?s:null,r="bottom"===s.label?s:null,o="left"===s.label?s:null,n="right"===s.label?s:null,l=s.parent.gameObject):"ball"===s.label&&(i=s,a="top"===e.label?e:null,r="bottom"===e.label?e:null,o="left"===e.label?e:null,n="right"===e.label?e:null,l=e.parent.gameObject);const h=i?i.gameObject:null;if(!i||!h||!l)return;const d=l.name,c=h.getData(`scored${d}`),g=h.getData(`missed${d}`),u=h.getData(`hitBottom${d}`),b=h.getData(`hitTop${d}`),p=h.getData(`hitLeft${d}`),y=h.getData(`hitRight${d}`);c||g||(c||g||(o?h.setData(`hitLeft${d}`,!0):n&&h.setData(`hitRight${d}`,!0)),a?u?h.setData(`missed${d}`,!0):h.setData(`hitTop${d}`,!0):r&&(b?(h.setData(`scored${d}`,!0),1===d&&h.getData("scored2")||2===d&&h.getData("scored1")?(this.registry.inc("score",100),this.launchScore("super-shot",d)):p&&y?(this.registry.inc("score",15),this.launchScore("ricochet",d)):p||y?(this.registry.inc("score",10),this.launchScore("shot",d)):(this.registry.inc("score",20),this.launchScore("swish",d))):h.setData(`missed${d}`,!0)))}launchScore(t,e){const s=this.view.right+200,i=this.view.centerY,a=this.add.image(s,i,"assets",t).setDepth(20);this.tweens.add({targets:a,x:{value:this.view.left-300,duration:1500,ease:"sine.inout"},alpha:{value:0,duration:200,delay:1e3,ease:"linear"},onComplete:()=>{a.destroy()}}),1===e?this.basket1.pullNet():2===e&&this.basket2.pullNet(),"super-shot"===t?(this.registry.get("ball2")?this.registry.get("ball3")?this.registry.get("ball4")?this.registry.get("ball5")?this.registry.get("ball6")||this.registry.set("ball6",!0):this.registry.set("ball5",!0):this.registry.set("ball4",!0):this.registry.set("ball3",!0):this.registry.set("ball2",!0),this.sound.play("super-shot")):"ricochet"===t?this.sound.play("ricochet"):this.sound.play("net")}update(){if(this.pendingGameOver){let t=!0;for(let e=0;e<this.balls.length;e++)if(this.balls[e].active)return void(t=!1);t&&(this.scene.stop("GameBackground"),this.scene.start("GameOver"))}}}class h extends t.Scene{constructor(){super("GameBackground")}create(){const t=this.scale.getViewPort();this.bg=this.add.image(0,0,"gameBackground"),this.bg.setOrigin(0,0),this.bg.setDisplaySize(t.width,t.height),this.scale.on("resize",this.resize,this)}resize(){const t=this.scale.getViewPort();this.bg.setDisplaySize(t.width,t.height)}}class d extends t.Scene{constructor(){super("GameOver")}create(){this.scene.launch("GameBackground"),this.scene.bringToTop(),this.scene.bringToTop("UI");const t=this.scale.getViewPort(this.cameras.main),e=t.centerX,s=t.centerY;this.add.text(e,s-300,`You scored ${this.registry.get("score")}`,{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:6,align:"center"}).setOrigin(.5),this.add.text(e,s-140,"Select a ball",{fontFamily:"Arial Black",fontSize:48,color:"#ffffff",stroke:"#000000",strokeThickness:6,align:"center"}).setOrigin(.5);const i=this.add.image(e-100,s-30,"assets","ball-locked"),r=this.add.image(e,s-30,"assets","ball-locked"),o=this.add.image(e+100,s-30,"assets","ball-locked"),n=this.add.image(e-100,s+70,"assets","ball-locked"),l=this.add.image(e,s+70,"assets","ball-locked"),h=this.add.image(e+100,s+70,"assets","ball-locked");this.add.text(e,s+220,"Score Super Shots to unlock more!",{fontFamily:"Arial Black",fontSize:24,color:"#ffffff",stroke:"#000000",strokeThickness:6,align:"center"}).setOrigin(.5),this.registry.get("ball1")&&(i.setFrame("ball1"),i.setInteractive(),i.on("pointerdown",(()=>this.selectedBall(1)))),this.registry.get("ball2")&&(r.setFrame("ball2"),r.setInteractive(),r.on("pointerdown",(()=>this.selectedBall(2)))),this.registry.get("ball3")&&(o.setFrame("ball3"),o.setInteractive(),o.on("pointerdown",(()=>this.selectedBall(3)))),this.registry.get("ball4")&&(n.setFrame("ball4"),n.setInteractive(),n.on("pointerdown",(()=>this.selectedBall(4)))),this.registry.get("ball5")&&(l.setFrame("ball5"),l.setInteractive(),l.on("pointerdown",(()=>this.selectedBall(5)))),this.registry.get("ball6")&&(h.setFrame("ball6"),h.setInteractive(),h.on("pointerdown",(()=>this.selectedBall(6)))),a.sendScore(this.registry.get("score"))}selectedBall(t){this.registry.set("activeBall",`ball${t}`);const e={activeBall:`ball${t}`,ball1:this.registry.get("ball1"),ball2:this.registry.get("ball2"),ball3:this.registry.get("ball3"),ball4:this.registry.get("ball4"),ball5:this.registry.get("ball5"),ball6:this.registry.get("ball6")};a.saveData(e),this.scene.stop("GameBackground"),this.scene.start("MainMenu")}}class c extends t.Scene{constructor(){super("MainMenu")}create(){this.createLogos(),this.createText(),this.input.on("pointerdown",(t=>{this.scene.stop("Background"),this.scene.start("Game")})),a.gameReady(),this.scene.launch("Background"),this.scene.bringToTop("UI")}createLogos(){const t=this.scale.getViewPort(this.cameras.main);this.add.image(t.centerX,t.centerY,"assets","game-logo").preFX.addShine(.8,1,5)}async createText(){this.scale.getViewPort(this.cameras.main),await a.loadLanguage()}}class g extends t.Scene{constructor(){super("Preloader")}init(){this.createLoadingBar(),a.firstFrameReady()}preload(){this.load.setPath("assets"),this.load.image("gameBackground","game-background.png"),this.load.image("basket","basket.png"),this.load.atlas("assets","basket-shoot-out.png","basket-shoot-out.json"),this.load.spritesheet("hands","hands.png",{frameWidth:190,frameHeight:300}),this.load.setPath("assets/fx"),this.load.audio("throw",["throw.wav","throw.mp3"]),this.load.audio("net",["net.wav"," net.mp3"]),this.load.audio("ricochet",["ricochet.wav","ricochet.mp3"]),this.load.audio("super-shot",["super-shot.wav","super-shot.mp3"]),this.load.audio("next-stage",["next-stage.wav","next-stage.mp3"])}create(){this.anims.create({key:"tapToStart",frames:this.anims.generateFrameNumbers("hands",{start:0,end:1}),frameRate:6,repeat:-1,repeatDelay:500}),this.scene.launch("UI"),this.scene.start("MainMenu")}createLoadingBar(){const t=this.scale.width,e=this.scale.height;this.add.image(0,0,"background").setOrigin(0,0).setDisplaySize(t,e);const s=t/2,i=e/2,a=.7*t,r=a-4;this.add.rectangle(s,i,a,32).setStrokeStyle(1,16777215);const o=this.add.rectangle(s-r/2+2,i,4,28,16777215);this.load.on("progress",(t=>{o.width=r*t}))}}class u{constructor(t,e=3,s=3){this.scene=t,this.gridWidth=e,this.gridHeight=s,this.paddingX=0,this.paddingY=0,this.sprites=new Map,t.scale.on("resize",this.resize,this)}setPadding(t,e){return this.paddingX=t,this.paddingY=e,this}getIndex(t){const e=this.gridWidth,s=this.gridHeight;switch(t){case u.TOP_LEFT:return{x:0,y:0,originX:0,originY:0,px:1,py:1};case u.TOP_CENTER:return{x:Math.floor(e/2),y:0,originX:.5,originY:0,px:0,py:1};case u.TOP_RIGHT:return{x:e-1,y:0,originX:1,originY:0,px:-1,py:1};case u.CENTER_LEFT:return{x:0,y:Math.floor(s/2),originX:0,originY:.5,px:1,py:0};case u.CENTER_CENTER:return{x:Math.floor(e/2),y:Math.floor(s/2),originX:.5,originY:.5,px:0,py:0};case u.CENTER_RIGHT:return{x:e-1,y:Math.floor(s/2),originX:1,originY:.5,px:-1,py:0};case u.BOTTOM_LEFT:return{x:0,y:s-1,originX:0,originY:1,px:1,py:-1};case u.BOTTOM_CENTER:return{x:Math.floor(e/2),y:s-1,originX:.5,originY:1,px:0,py:-1};case u.BOTTOM_RIGHT:return{x:e-1,y:s-1,originX:1,originY:1,px:-1,py:-1};default:return{x:0,y:0,originX:0,originY:0,px:0,py:0}}}addSprite(t,e,s=0,i=0){if("number"==typeof e){const a=e%this.gridWidth,r=Math.floor(e/this.gridWidth),o=0===a?0:a===this.gridWidth-1?1:.5,n=0===r?0:r===this.gridHeight-1?1:.5;this.sprites.set(t,{x:a,y:r,originX:o,originY:n,px:0,py:0,offsetX:s,offsetY:i})}else this.sprites.set(t,Phaser.Utils.Objects.Merge(this.getIndex(e),{offsetX:s,offsetY:i}))}removeSprite(t){this.sprites.delete(t)}resize(){const t=this.scene.scale.getViewPort(this.scene.cameras.main),e=t.width,s=t.height,i=e/this.gridWidth,a=s/this.gridHeight;this.sprites.forEach(((e,s)=>{const r=t.x+e.px*this.paddingX+e.originX*i+Math.floor(e.x*i),o=t.y+e.py*this.paddingY+e.originY*a+Math.floor(e.y*a);s.setPosition(r+e.offsetX,o+e.offsetY),s.setOrigin(e.originX,e.originY)}))}}u.TOP_LEFT="top-left",u.TOP_CENTER="top-center",u.TOP_RIGHT="top-right",u.CENTER_LEFT="center-left",u.CENTER_CENTER="center",u.CENTER_RIGHT="center-right",u.BOTTOM_LEFT="bottom-left",u.BOTTOM_CENTER="bottom-center",u.BOTTOM_RIGHT="bottom-right",u.CUSTOM="custom";class b extends e.Scene{constructor(){super("UI")}init(){this.gridSnap=new u(this),this.gridSnap.setPadding(8,8),this.scene.bringToTop()}create(){this.audioIcon=this.add.sprite(0,0,"assets","audio-off"),this.ballIcon=this.add.sprite(0,0,"assets","ball1"),this.ballCount=this.add.text(0,0,"50",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"left"}),this.gridSnap.addSprite(this.audioIcon,u.TOP_RIGHT,-8),this.gridSnap.addSprite(this.ballIcon,u.TOP_LEFT),this.gridSnap.addSprite(this.ballCount,u.TOP_LEFT,80,10),this.gridSnap.resize(),a.isAudioEnabled()?this.enableAudio():this.disableAudio(),a.setAudioChangeCallback((t=>{t?this.enableAudio():this.disableAudio()})),this.registry.events.on("changedata-shots",this.updateScore,this),this.registry.events.on("changedata-activeBall",this.updateBallIcon,this)}updateScore(t,e){this.ballCount.setText(e.toString())}updateBallIcon(t,e){this.ballIcon.setFrame(e)}enableAudio(){this.sound.setMute(!1),this.audioIcon.setFrame("audio-on")}disableAudio(){this.sound.setMute(!0),this.audioIcon.setFrame("audio-off")}}a.boot((()=>{new Phaser.Game({type:Phaser.AUTO,width:820,height:1180,parent:"gameParent",scale:{mode:Phaser.Scale.EXPAND},physics:{default:"matter",matter:{positionIterations:12,velocityIterations:8,gravity:{y:1.6},debug:!1}},scene:[r,g,s,c,l,h,d,b]})}));
