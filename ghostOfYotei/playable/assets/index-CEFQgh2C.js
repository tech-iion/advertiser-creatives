import{p as e}from"./phaser-C2RWnc_5.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class t extends e.Scene{constructor(){super("Boot")}preload(){}create(){this.scene.start("Preloader")}}function i(e,t){const i=/Mobi|Android/i.test(navigator.userAgent),s=/iPhone/i.test(navigator.userAgent),a=window.innerWidth,o=window.innerHeight;let n,r;n=e.game.canvas.width,r=e.game.canvas.height;const h=document.getElementsByTagName("canvas")[0],d=Math.abs(parseFloat(h.style.marginTop||0))/a*n+(s?130:0),c=Math.abs(parseFloat(h.style.marginLeft||0))/o*r;let l=o/(a+2*c)*.85;return i?{canvasWidth:n,canvasHeight:r,scaleFactor:l,topMarginOffset:d,leftMarginOffsetPercentage:c,isMobileDevice:i,isIphoneDevice:s}:(l=1.4,{canvasWidth:n,canvasHeight:r,scaleFactor:l,topMarginOffset:0,leftMarginOffsetPercentage:0})}class s extends e.Scene{constructor(){super("MainMenu")}create(){const{canvasWidth:e,canvasHeight:t,scaleFactor1:s,topMarginOffset:a,leftMarginOffsetPercentage:o,isMobileDevice:n,isIphoneDevice:r}=i(this);this.canvasHeight=t,this.canvasWidth=e,this.video=this.add.video(e/2,t/2,"ghostvideo"),this.video.setOrigin(.5),this.video.setScale(1.8),this.video.setCurrentTime(3),this.video.bool=!1,this.videoOnePlayed=!1,this.videoTime=0,this.input.once("pointerdown",(()=>{console.log("Video started"),this.tweens.add({targets:[this.bg1],alpha:0,scale:{from:1,to:1.4},duration:800,ease:"Power2"}),this.video.play()})),this.bg1=this.add.image(e/2,t/2,"bg1"),this.bg1.setOrigin(.5).setAlpha(1),this.bg1.setScale(s),this.getnow=this.add.image(e/2,1.1*t,"getnow"),this.getnow.setOrigin(.5).setAlpha(1),this.getnow.setScale(1),this.tweens.add({targets:this.getnow,scale:{from:1,to:1.2},duration:500,ease:"Power2",yoyo:!0,repeat:-1}),this.sword=this.add.image(.7*e,t/2,"sword"),this.sword.setOrigin(.5).setAlpha(0),this.sword.setScale(.5),this.sword.on("pointerdown",(()=>{this.video.setCurrentTime(this.videoTime),this.video.resume(),this.video.bool=!1,this.sword.destroy()})),this.video.on("complete",(()=>{console.log("Video completed")}))}update(){console.log(this.video.getCurrentTime()),this.video.getCurrentTime()>=18.5&&this.video.getCurrentTime()<=18.6&&!this.video.bool&&!this.videoOnePlayed?(this.video.bool=!0,this.videoOnePlayed=!0,this.videoTime=this.video.getCurrentTime(),this.video.pause(),console.log("Video paused at 18 seconds"),this.sword.setAlpha(1),this.tweens.add({targets:this.sword,scale:{from:.5,to:.6},delay:1e3,duration:350,ease:"Power2",yoyo:!1,repeat:-1}),this.sword.setInteractive()):this.video.getCurrentTime()>=51.9&&this.video.getCurrentTime()<=52&&!this.video.bool&&(this.video.bool=!0,this.tweens.add({targets:this.video,volume:0,alpha:0,duration:800,ease:"Power2"}),this.bg1.setTexture("cta"),this.tweens.add({targets:this.bg1,alpha:1,scale:{from:1.6,to:1.2},duration:800,ease:"Power2"}),this.tweens.add({targets:this.getnow,y:.9*this.canvasHeight,duration:800,ease:"Power2"}))}}class a extends e.Scene{constructor(){super("Preloader")}init(){const{canvasWidth:e,canvasHeight:t,scaleFactor:s,topMarginOffset:a,leftMarginOffsetPercentage:o,isMobileDevice:n,isIphoneDevice:r}=i(this);this.canvasWidth=e,this.canvasHeight=t,this.scaleFactor=s}createLoadingUI(){this.add.text(this.canvasWidth/2,this.canvasHeight/2-50*this.scaleFactor,"",{fontFamily:"PoppinsSemiBold",fontSize:28*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#E10E14",strokeThickness:5}).setOrigin(.5);const e=.6*this.canvasWidth,t=25*this.scaleFactor,i=12*this.scaleFactor;this.loadingBarContainer=this.add.graphics(),this.loadingBarContainer.lineStyle(3*this.scaleFactor,14749204,1),this.loadingBarContainer.fillStyle(3355443,1),this.loadingBarContainer.fillRoundedRect(this.canvasWidth/2-e/2,this.canvasHeight/2-t/2,e,t,i),this.loadingBarContainer.strokeRoundedRect(this.canvasWidth/2-e/2,this.canvasHeight/2-t/2,e,t,i),this.loadingBarGraphics=this.add.graphics(),this.barWidth=e,this.barHeight=t,this.borderRadius=i,this.barX=this.canvasWidth/2-e/2,this.barY=this.canvasHeight/2-t/2,this.percentText=this.add.text(this.canvasWidth/2,this.canvasHeight/2+40*this.scaleFactor,"0%",{fontFamily:"BukaBird",fontSize:22*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#000000",strokeThickness:3}),this.percentText.setOrigin(.5)}preload(){this.load.on("progress",(e=>{})),this.load.on("complete",(()=>{console.log("All assets loaded"),this.scene.start("MainMenu")})),this.load.setPath(window.trackingPath),this.load.image("bg1","bg1.png"),this.load.image("sword","sword.png"),this.load.video("ghostvideo","ghost.mp4"),this.load.image("getnow","getnow.png"),this.load.image("cta","cta.png")}create(){}}const o={type:Phaser.AUTO,width:1440,height:960,parent:"game-container",background:"transparent",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},fps:{target:60,forceSetTimeOut:!0},transparent:!0,scene:[t,a,s]};new Phaser.Game(o);
