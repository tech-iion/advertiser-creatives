import{p as t}from"./phaser-C2RWnc_5.js";function e(t,e){const i=/Mobi|Android/i.test(navigator.userAgent),s=/iPhone/i.test(navigator.userAgent),a=window.innerWidth,n=window.innerHeight;let o,h;o=t.game.canvas.width,h=t.game.canvas.height;const r=document.getElementsByTagName("canvas")[0],l=Math.abs(parseFloat(r.style.marginTop||0))/a*o+(s?130:0),d=Math.abs(parseFloat(r.style.marginLeft||0))/n*h;let c=n/(a+2*d)*1;return console.log(i," :: isMobileDevice",c),i?{canvasWidth:o,canvasHeight:h,scaleFactor:c,topMarginOffset:l,leftMarginOffsetPercentage:d,isMobileDevice:i,isIphoneDevice:s}:(c=1.85,{canvasWidth:o,canvasHeight:h,scaleFactor:c,topMarginOffset:0,leftMarginOffsetPercentage:0})}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class i extends t.Scene{constructor(){super("MainMenu")}fnfetchAPI(t){fetch(t,{method:"GET"}).then((t=>console.log("Tracking sent:",t.status))).catch((t=>console.error("Tracking error:",t)))}create(){const{canvasWidth:t,canvasHeight:i,scaleFactor:s,topMarginOffset:a,leftMarginOffsetPercentage:n,isMobileDevice:o,isIphoneDevice:h}=e(this);this.canvasWidth=t,this.canvasHeight=i,this.scaleFactor=s,this.currentItemIndex=0,this.bg=this.add.image(.5*t,0*i,"city"),this.bg.setOrigin(.5,0).setDepth(150),this.bg.setScale(.4*s),this.bg.alpha=1,this.bgTween=this.tweens.add({targets:this.bg,y:this.bg.y-.0025*this.canvasHeight,duration:200,ease:"Cubic.easeInOut",yoyo:!0,repeat:-1}),this.road=this.add.image(.5*t,.5*i,"road"),this.road.setOrigin(.5).setDepth(150),this.road.setScale(.55*s),this.road.alpha=0,this.gridGraphics=this.add.graphics(),this.gridGraphics.setDepth(155),this.gridTop=this.bg.y+.885*this.bg.displayHeight,this.gridBottom=i,this.gridLineColor=10040012,this.gridLineAlpha=.8,this.vanishingPointX=.5*t,this.vanishingPointY=this.gridTop,this.hLineCount=30,this.hLineSpeed=.1,this.hLineOffset=0,this.vLineCount=15,this.gridTopWidth=.15*t,this.gridBottomWidth=2*t,this.iionlogo=this.add.image(.15*t,.05*i,"iionlogo"),this.iionlogo.setOrigin(.5).setDepth(160),this.iionlogo.setScale(.35*s),this.iionlogo.alpha=1,this.anims.create({key:"playerfallAnim",frames:this.anims.generateFrameNames("iionrunner",{start:1,end:4,zeroPad:3,prefix:"tile",suffix:".png"}),frameRate:24,yoyo:!0,repeat:-1}),this.anims.create({key:"playerrunAnim",frames:this.anims.generateFrameNames("iionrunner",{start:5,end:16,zeroPad:3,prefix:"tile",suffix:".png"}),frameRate:16,yoyo:!1,repeat:-1}),this.drawGrid(),this.orbs=[],this.orbSpeed=4,this.spawnY=this.gridTop,this.despawnY=.9*i,this.lanes=[.45,.5,.55],this.minOrbScale=.03*s,this.maxOrbScale=.2*s,this.laneSpread=.4,this.orbPatterns=[[0,1,2],[0,2],[0,1],[1,2]],this.currentPatternIndex=0,this.orbRowSpacing=120,this.spawnDelay=800,this.lastSpawnTime=0,this.runnerLaneIndex=1,this.runnerLanePositions=[.15*t,.5*t,.85*t],this.slideDuration=120,this.isSliding=!1,this.coinsCollected=0,this.coinText=this.add.text(.85*t,.05*i,"0",{fontSize:Math.round(36*s)+"px",fontFamily:"Arial",color:"#ffffff",fontStyle:"bold"}),this.coinText.setOrigin(.5).setDepth(300),this.coinIcon=this.add.image(.925*t,.05*i,"iionorb"),this.coinIcon.setOrigin(.5).setDepth(300),this.coinIcon.setScale(.08*s),this.runner=this.add.sprite(this.runnerLanePositions[this.runnerLaneIndex],.825*i,"iionrunner"),this.runner.setOrigin(.5).setDepth(200),this.runner.setScale(.6*s),this.runner.alpha=1,this.runner.anims.play("playerrunAnim",!0),this.swipeStartX=0,this.swipeThreshold=30,this.hasSwipedThisGesture=!1,this.input.on("pointerdown",(t=>{this.swipeStartX=t.x,this.hasSwipedThisGesture=!1})),this.input.on("pointermove",(t=>{if(!t.isDown||this.hasSwipedThisGesture)return;const e=t.x-this.swipeStartX;Math.abs(e)>=this.swipeThreshold&&(e<0&&this.runnerLaneIndex>0?(this.slideToLane(this.runnerLaneIndex-1),this.hasSwipedThisGesture=!0):e>0&&this.runnerLaneIndex<2&&(this.slideToLane(this.runnerLaneIndex+1),this.hasSwipedThisGesture=!0))})),this.input.on("pointerup",(()=>{this.hasSwipedThisGesture=!1})),this.quizQuestions=[{question:"Gaming delivers 20x higher engagement what's the biggest barrier to increasing your gaming ad spend?",options:["Budget allocation processes (gaming isn't prioritised in annual planning)","Lack of gaming audience measurement and attribution data","Concerns about brand safety and content adjacency","Limited knowledge of gaming inventory and targeting options"],type:"choice"},{question:"What's your biggest marketing priority for 2026?",options:["AI & automation adoption","Data & personalisation","Customer experience improvement","Content & creative strategy","Multi-channel integration"],type:"choice"},{question:"Please add your email address to enter our prize draw",type:"email"}],this.currentQuestionIndex=0,this.quizPopupCount=0,this.maxQuizPopups=3,this.quizInterval=5e3,this.isQuizActive=!1,this.quizElements=[],this.gamePaused=!1,this.time.addEvent({delay:this.quizInterval,callback:()=>{this.quizPopupCount<this.maxQuizPopups&&this.addpopupQuiz()},loop:!0})}slideToLane(t){this.runnerLaneIndex!==t&&(this.slideTween&&this.slideTween.stop(),this.isSliding=!0,this.runnerLaneIndex=t,this.slideTween=this.tweens.add({targets:this.runner,x:this.runnerLanePositions[t],duration:this.slideDuration,ease:"Cubic.easeOut",onComplete:()=>{this.isSliding=!1}}))}spawnOrbRow(){const t=this.orbPatterns[this.currentPatternIndex];this.currentPatternIndex=(this.currentPatternIndex+1)%this.orbPatterns.length,t.forEach((t=>{const e=this.add.image(this.canvasWidth*this.lanes[t],this.spawnY,"iionorb");e.setOrigin(.5).setDepth(160),e.setScale(this.minOrbScale),e.alpha=1,e.laneIndex=t,e.startX=e.x,this.orbs.push(e)}))}update(){if(this.gamePaused)return;const{canvasHeight:t,scaleFactor:e,minOrbScale:i,maxOrbScale:s,spawnY:a,despawnY:n,orbSpeed:o}=this;this.hLineOffset+=this.hLineSpeed,this.hLineOffset>=1&&(this.hLineOffset=0),this.drawGrid();for(let r=this.orbs.length-1;r>=0;r--){const t=this.orbs[r],e=(t.y-a)/(n-a),h=o*(1+2*e);t.y+=h;const l=i+(s-i)*e;t.setScale(l);const d=t.laneIndex-1;t.x=t.startX+d*this.laneSpread*this.canvasWidth*e,this.checkOrbCollision(t)?this.collectOrb(t,r):t.y>n&&(t.destroy(),this.orbs.splice(r,1))}const h=this.time.now;h-this.lastSpawnTime>=this.spawnDelay&&(this.lastSpawnTime=h,this.spawnOrbRow())}checkOrbCollision(t){const e=this.runner.y,i=this.runner.x,s=60*this.scaleFactor,a=t.x-i,n=t.y-e;return Math.sqrt(a*a+n*n)<s}collectOrb(t,e){this.coinsCollected++,this.coinText.setText(this.coinsCollected.toString()),this.tweens.add({targets:t,y:t.y-.5*t.displayHeight,scale:2*t.scale,alpha:0,duration:350,ease:"Power2",onComplete:()=>{t.destroy()}}),this.orbs.splice(e,1),this.tweens.add({targets:this.coinIcon,scale:.2,duration:80,yoyo:!0,ease:"Bounce"})}addpopupQuiz(){if(this.isQuizActive||this.currentQuestionIndex>=this.quizQuestions.length)return;this.isQuizActive=!0,this.gamePaused=!0,this.quizPopupCount++,this.quizElements=[],this.runner.anims.pause(),this.bgTween&&this.bgTween.pause(),this.pauseStartTime=this.time.now;const t=this.quizQuestions[this.currentQuestionIndex],e=this.canvasWidth/2,i=this.canvasHeight/2,s=this.scaleFactor;this.quizOverlay=this.add.rectangle(e,i,this.canvasWidth,this.canvasHeight,0,0),this.quizOverlay.setDepth(400),this.quizElements.push(this.quizOverlay),this.tweens.add({targets:this.quizOverlay,fillAlpha:.7,duration:250,ease:"Power2"}),this.dialog=this.add.sprite(e,i,"dialog"),this.dialog.setOrigin(.5).setDepth(401),this.dialog.setScale(0).setAlpha(0),this.quizElements.push(this.dialog),this.tweens.add({targets:this.dialog,scale:.8*s,alpha:1,duration:350,ease:"Back.easeOut"});const a=this.add.text(e,i-200*s,t.question,{fontSize:Math.round(24*s)+"px",fontFamily:"Poppins, sans-serif",color:"#ffffff",fontStyle:"bold",align:"left",wordWrap:{width:.7*this.canvasWidth,useAdvancedWrap:!0},lineSpacing:6});if(a.setOrigin(.5).setDepth(402).setAlpha(0),this.quizElements.push(a),this.tweens.add({targets:a,alpha:1,y:a.y,duration:400,delay:150,ease:"Power2"}),"choice"===t.type){const a=i-60*s,n=28*s;t.options.forEach(((t,i)=>{const o=a+i*n*3,h=.7*this.canvasWidth,r=65*s,l=12,d=this.add.graphics();d.fillStyle(16777215,1),d.fillRoundedRect(e-h/2,o-r/2,h,r,l),d.setDepth(402),d.setAlpha(0),this.quizElements.push(d);const c=this.add.rectangle(e,o,h,r,16777215,0);c.setDepth(402).setInteractive({useHandCursor:!0}),c.setAlpha(0),this.quizElements.push(c);const p=this.add.text(e,o,t,{fontSize:Math.round(18*s)+"px",fontFamily:"Poppins, sans-serif",color:"#1a365d",align:"center",wordWrap:{width:.65*this.canvasWidth,useAdvancedWrap:!0}});p.setOrigin(.5).setDepth(403).setAlpha(0),this.quizElements.push(p);const u=250+80*i;this.tweens.add({targets:[d,c,p],alpha:1,duration:300,delay:u,ease:"Power2"}),c.on("pointerover",(()=>{d.clear(),d.fillStyle(65535,1),d.fillRoundedRect(e-h/2,o-r/2,h,r,l),d.lineStyle(2,1717853,1),d.strokeRoundedRect(e-h/2,o-r/2,h,r,l)})),c.on("pointerout",(()=>{d.clear(),d.fillStyle(16777215,1),d.fillRoundedRect(e-h/2,o-r/2,h,r,l),d.lineStyle(2,1717853,1),d.strokeRoundedRect(e-h/2,o-r/2,h,r,l)})),c.on("pointerdown",(()=>{d.clear(),d.fillStyle(65535,1),d.fillRoundedRect(e-h/2,o-r/2,h,r,l),d.lineStyle(2,1717853,1),d.strokeRoundedRect(e-h/2,o-r/2,h,r,l),this.selectQuizOption(i)}))}))}else if("email"===t.type){const t=i+10*s,a=document.createElement("input");a.type="email",a.placeholder="Enter your email...",a.style.cssText=`\n        width: ${.6*this.canvasWidth}px;\n        padding: 12px;\n        font-size: ${24*s}px;\n        font-family: Poppins, sans-serif;\n        border: 2px solid #1a365d;\n        border-radius: 8px;\n        outline: none;\n        text-align: center;\n        color: #1a365d;\n      `,this.emailInput=this.add.dom(e,t,a).setDepth(403),this.emailInput.setAlpha(0),this.quizElements.push(this.emailInput);const n=200*s,o=60*s,h=t+100*s,r=12,l=this.add.graphics();l.fillStyle(16777215,1),l.fillRoundedRect(e-n/2,h-o/2,n,o,r),l.setDepth(402).setAlpha(0),this.quizElements.push(l);const d=this.add.rectangle(e,h,n,o,16777215,0);d.setDepth(402).setInteractive({useHandCursor:!0}).setAlpha(0),this.quizElements.push(d);const c=this.add.text(e,h,"Submit",{fontSize:Math.round(24*s)+"px",fontFamily:"Poppins, sans-serif",color:"#1a365d"});c.setOrigin(.5).setDepth(403).setAlpha(0),this.quizElements.push(c);const p=this.add.text(e,h+50*s,"",{fontSize:Math.round(14*s)+"px",fontFamily:"Poppins, sans-serif",color:"#ff4444",align:"center"});p.setOrigin(.5).setDepth(403),this.quizElements.push(p),this.tweens.add({targets:this.emailInput,alpha:1,duration:300,delay:250,ease:"Power2"}),this.tweens.add({targets:[l,d,c],alpha:1,duration:300,delay:350,ease:"Power2"}),d.on("pointerover",(()=>{l.clear(),l.fillStyle(65535,1),l.fillRoundedRect(e-n/2,h-o/2,n,o,r)})),d.on("pointerout",(()=>{l.clear(),l.fillStyle(16777215,1),l.fillRoundedRect(e-n/2,h-o/2,n,o,r)})),d.on("pointerdown",(()=>{const t=a.value.trim();t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?(console.log("Email submitted:",t),this.closeQuizPopup()):p.setText("Please enter a valid email address"):p.setText("Please enter your email address")}))}}selectQuizOption(t){console.log("Selected option:",t,"for question:",this.currentQuestionIndex),this.closeQuizPopup()}closeQuizPopup(){this.currentQuestionIndex++,this.tweens.add({targets:this.quizOverlay,fillAlpha:0,duration:300,ease:"Power2"}),this.tweens.add({targets:this.dialog,scale:0,alpha:0,duration:300,ease:"Back.easeIn"}),this.quizElements.forEach((t=>{t&&t!==this.dialog&&t!==this.quizOverlay&&this.tweens.add({targets:t,alpha:0,duration:200,ease:"Power2"})})),this.time.delayedCall(350,(()=>{this.quizElements.forEach((t=>{t&&t.destroy&&t.destroy()})),this.quizElements=[],this.isQuizActive=!1,this.gamePaused=!1,this.runner.anims.resume(),this.bgTween&&this.bgTween.resume();const t=this.time.now-this.pauseStartTime;this.lastSpawnTime+=t}))}drawGrid(){const t=this.gridGraphics;t.clear();const e=this.gridTop,i=this.gridBottom,s=i-e,a=this.vanishingPointX,n=this.vanishingPointY,o=this.canvasWidth;t.lineStyle(2,this.gridLineColor,this.gridLineAlpha);const h=this.gridTopWidth,r=this.gridBottomWidth,l=Math.floor(this.vLineCount/2);for(let d=-l;d<=l;d++){const e=d/l,s=a+e*(h/2),o=a+e*(r/2);t.beginPath(),t.moveTo(s,n),t.lineTo(o,i),t.strokePath()}for(let d=0;d<this.hLineCount;d++){const n=(d+this.hLineOffset)/this.hLineCount,o=e+Math.pow(n,2.5)*s;if(o>e&&o<i){const i=(o-e)/s,n=h+(r-h)*i,l=a-n/2,d=a+n/2,c=.3+.7*i;t.lineStyle(1+2*i,this.gridLineColor,c),t.beginPath(),t.moveTo(l,o),t.lineTo(d,o),t.strokePath()}}t.lineStyle(3,this.gridLineColor,1),t.beginPath(),t.moveTo(0,e),t.lineTo(o,e),t.strokePath()}}class s extends t.Scene{constructor(){super("Preloader")}init(){const{canvasWidth:t,canvasHeight:i,scaleFactor:s,topMarginOffset:a,leftMarginOffsetPercentage:n,isMobileDevice:o,isIphoneDevice:h}=e(this);this.canvasWidth=t,this.canvasHeight=i,this.scaleFactor=s}createLoadingUI(){this.add.text(this.canvasWidth/2,this.canvasHeight/2-50*this.scaleFactor,"",{fontFamily:"FlameBold",fontSize:28*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#E10E14",strokeThickness:5}).setOrigin(.5);const t=.6*this.canvasWidth,e=25*this.scaleFactor,i=12*this.scaleFactor;this.loadingBarContainer=this.add.graphics(),this.loadingBarContainer.lineStyle(3*this.scaleFactor,14749204,1),this.loadingBarContainer.fillStyle(3355443,1),this.loadingBarContainer.fillRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,i),this.loadingBarContainer.strokeRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,i),this.loadingBarGraphics=this.add.graphics(),this.barWidth=t,this.barHeight=e,this.borderRadius=i,this.barX=this.canvasWidth/2-t/2,this.barY=this.canvasHeight/2-e/2,this.percentText=this.add.text(this.canvasWidth/2,this.canvasHeight/2+40*this.scaleFactor,"0%",{fontFamily:"BukaBird",fontSize:22*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#000000",strokeThickness:3}),this.percentText.setOrigin(.5)}preload(){this.add.sprite(this.canvasWidth/2,550,"iionlogo").setScale(1.3);let t=this.add.rectangle(this.canvasWidth/2,this.canvasHeight/2,560,10,13224393);t.width=590,t.alpha=.4;let e=this.add.rectangle(this.canvasWidth/2,this.canvasHeight/2,560,10,16777215);e.alpha=.8,this.load.on("progress",(t=>{e.width=590*t})),this.load.on("complete",(()=>{setTimeout((()=>{this.scene.start("MainMenu")}),250)}),this),this.load.setPath("assets"),this.load.image("city","city.jpg"),this.load.image("road","road2.png"),this.load.atlas("iionrunner","runner.png","runner.json"),this.load.image("iionorb","iionorb.png"),this.load.image("dialog","dialog.png")}create(){}}class a extends t.Scene{constructor(){super("Boot")}init(){const{canvasWidth:t,canvasHeight:i,scaleFactor:s,topMarginOffset:a,leftMarginOffsetPercentage:n,isMobileDevice:o,isIphoneDevice:h}=e(this);this.canvasWidth=t,this.canvasHeight=i,this.scaleFactor=s}createLoadingUI(){this.add.text(this.canvasWidth/2,this.canvasHeight/2-50*this.scaleFactor,"",{fontFamily:"FlameBold",fontSize:28*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#E10E14",strokeThickness:5}).setOrigin(.5);const t=.6*this.canvasWidth,e=25*this.scaleFactor,i=12*this.scaleFactor;this.loadingBarContainer=this.add.graphics(),this.loadingBarContainer.lineStyle(3*this.scaleFactor,14749204,1),this.loadingBarContainer.fillStyle(3355443,1),this.loadingBarContainer.fillRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,i),this.loadingBarContainer.strokeRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,i),this.loadingBarGraphics=this.add.graphics(),this.barWidth=t,this.barHeight=e,this.borderRadius=i,this.barX=this.canvasWidth/2-t/2,this.barY=this.canvasHeight/2-e/2,this.percentText=this.add.text(this.canvasWidth/2,this.canvasHeight/2+40*this.scaleFactor,"0%",{fontFamily:"BukaBird",fontSize:22*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#000000",strokeThickness:3}),this.percentText.setOrigin(.5)}preload(){this.load.setPath(window.trackingPath),this.load.image("iionlogo","iionlogo.png")}create(){this.scene.start("Preloader")}}let n=/Mobi|Android/i.test(navigator.userAgent);const o={type:Phaser.AUTO,parent:"game-container",width:1080,height:1920,scale:{mode:n?Phaser.Scale.ENVELOP:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},transparent:!0,scene:[a,s,i],dom:{createContainer:!0},fps:{target:60,forceSetTimeOut:!0}};new Phaser.Game(o);
