import{p as e}from"./phaser-DM0uoNMb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class t extends e.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}class s extends e.Scene{constructor(){super("Game")}create(){this.cameras.main.setBackgroundColor(65280),this.add.image(512,384,"background").setAlpha(.5),this.add.text(512,384,"Essayez de nouveau avec un autre type de viande",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("GameOver")}))}}class a extends e.Scene{constructor(){super("GameOver")}create(){this.cameras.main.setBackgroundColor(16711680),this.add.image(512,384,"background").setAlpha(.5),this.add.text(512,384,"Félicitations !",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}function i(e,t){const s=/Mobi|Android/i.test(navigator.userAgent),a=/iPhone/i.test(navigator.userAgent),i=window.innerWidth,o=window.innerHeight;let n,r;n=e.game.canvas.width,r=e.game.canvas.height;const l=document.getElementsByTagName("canvas")[0],d=Math.abs(parseFloat(l.style.marginTop||0))/i*n+(a?130:0),h=Math.abs(parseFloat(l.style.marginLeft||0))/o*r;let c=o/(i+2*h)*.85;return s?{canvasWidth:n,canvasHeight:r,scaleFactor:c,topMarginOffset:d,leftMarginOffsetPercentage:h,isMobileDevice:s,isIphoneDevice:a}:(c=1.4,{canvasWidth:n,canvasHeight:r,scaleFactor:c,topMarginOffset:0,leftMarginOffsetPercentage:0})}class o extends e.Scene{constructor(){super("MainMenu")}create(){const{canvasWidth:e,canvasHeight:t,scaleFactor1:s,topMarginOffset:a,leftMarginOffsetPercentage:o,isMobileDevice:n,isIphoneDevice:r}=i(this);this.clickBG=!1,this.image=this.add.image(e/2,t/2,"background"),this.image.setOrigin(.5),this.image.setScale(.77),this.image.alpha=0,this.tweens.add({targets:this.image,alpha:1,duration:800,ease:"Power2"});const l=this.add.text(e/2,.125*t,"Température sécuritaire",{fontSize:`${Math.floor(48*1.4)}px`,fontFamily:"Asap",fill:"#ffffff",stroke:"#000000",strokeThickness:0,shadow:{color:"#000000",blur:2,fill:!0}}).setOrigin(.5);l.alpha=0,l.y-=50,this.tweens.add({targets:l,alpha:1,y:.125*t,duration:1e3,ease:"Back.easeOut",delay:300});const d=this.add.text(e/2,.225*t,"Tapez sur le thermomètre numérique pour \natteindre la température de cuisson sécuritaire \ndans le temps imparti !",{fontSize:`${Math.floor(42)}px`,fontFamily:"Asap",fill:"#ffffff",align:"center",stroke:"#000000",strokeThickness:0,shadow:{color:"#000000",blur:2,fill:!0}}).setOrigin(.5);d.alpha=0,this.tweens.add({targets:d,alpha:1,duration:800,delay:800,ease:"Power2"}),this.salmon=this.add.image(e/2,.625*t,"salmon_uncooked"),this.salmon.setScale(.7),this.salmon.setOrigin(.5),this.salmon.alpha=0,this.salmon.x+=200,this.tweens.add({targets:this.salmon,x:e/2,alpha:1,duration:1e3,ease:"Power2",delay:1200,onComplete:()=>{this.tweens.add({targets:this.salmon,angle:{from:-3,to:3},duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.tweens.add({targets:this.salmon,x:"+=15",duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.tweens.add({targets:this.salmon,y:"+=5",duration:2e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:200})}}),this.thermometer=this.add.image(.395*e,.45*t,"indicator2"),this.thermometer.setScale(.42),this.thermometer.setOrigin(.5),this.thermometer.alpha=0,this.thermometer.x-=200,this.tweens.add({targets:this.thermometer,x:.395*e,alpha:1,duration:1e3,ease:"Power2",delay:1200}),this.tempText=this.add.text(.395*e,.45*t,"70°C",{fontSize:`${Math.floor(22*1.4)}px`,fontFamily:"Montserrat",fill:"#000000",align:"center",shadow:{color:"#000000",blur:2,fill:!0}}).setOrigin(.5).setAngle(60),this.tempText.alpha=0,setTimeout((()=>{this.tempText.x=this.thermometer.x-.22*this.thermometer.displayWidth,this.tempText.y=this.thermometer.y-.3*this.thermometer.displayHeight}),2e3),this.tweens.add({targets:this.tempText,alpha:1,duration:800,delay:2e3,ease:"Power2"}),this.startButton=this.add.text(e/2,.85*t,"Commencez la cuisson !",{fontSize:`${Math.floor(70)}px`,fontFamily:"Asap",fill:"#FFD700",stroke:"#000000",strokeThickness:0,shadow:{color:"#000000",blur:2,fill:!0}}).setOrigin(.5),this.startButton.alpha=0,this.startButton.y+=50,this.tweens.add({targets:this.startButton,alpha:1,y:.85*t,duration:1e3,ease:"Back.easeOut",delay:2e3,onComplete:()=>{this.tweens.add({targets:this.startButton,scaleX:1.1,scaleY:1.1,duration:800,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.tweens.add({targets:this.startButton,strokeThickness:{from:4,to:8},duration:800,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}}),this.startButton.setInteractive({useHandCursor:!0}),this.startButton.on("pointerover",(()=>{this.isTransitioning||this.tweens.add({targets:this.startButton,scale:1.1,duration:200,ease:"Power2"})})),this.startButton.on("pointerout",(()=>{this.isTransitioning||this.tweens.add({targets:this.startButton,scale:1,duration:200,ease:"Power2"})})),this.startButton.on("pointerdown",(()=>{this.isTransitioning||(this.isTransitioning=!0,console.log("Start button clicked!"),this.startButton.removeInteractive(),this.tweens.killTweensOf(this.startButton),this.startButton.setScale(1),this.tweens.add({targets:[l,d,this.salmon,this.thermometer,this.tempText,this.startButton],alpha:0,duration:500,ease:"Power2",onComplete:()=>{this.showSelectionPage()}}))}))}showSelectionPage(){this.isTransitioning=!0;const{canvasWidth:e,canvasHeight:t,scaleFactor1:s}=i(this);this.selectionTitle=this.add.text(e/2,.125*t,"Choisissez le type de viande",{fontSize:`${Math.floor(48*1.4)}px`,fontFamily:"Asap",fill:"#ffffff",stroke:"#000000",strokeThickness:0,shadow:{color:"#000000",blur:2,fill:!0}}).setOrigin(.5),this.selectionTitle.alpha=0,this.optionContainers=[],[{name:"chicken_uncooked",text:"Pilon de poulet : 74°C (165°F)",y:.2},{name:"beef_uncooked",text:"Hamburger de bœuf : 71°C (160°F)",y:.45},{name:"salmon_uncooked",text:"Filet de Poisson : 70°C (158°F)",y:.7}].forEach(((s,a)=>{const i=this.add.container(e/2,t*s.y);i.alpha=0;const o=this.add.image(0,0,s.name);o.setScale(.325*1.4).setOrigin(.5,0);const n=this.add.text(0,1.15*o.displayHeight,s.text,{fontSize:`${Math.floor(42)}px`,fontFamily:"Asap",fill:"#ffffff",align:"center",stroke:"#000000",strokeThickness:0,shadow:{color:"#000000",blur:2,fill:!0}}).setOrigin(.5);i.add([o,n]);const r=new Phaser.Geom.Rectangle(-o.displayWidth/2,-o.displayHeight/2,o.displayWidth,o.displayHeight+n.displayHeight);i.setInteractive(r,Phaser.Geom.Rectangle.Contains),i.input.cursor="pointer",i.on("pointerover",(()=>{})),i.on("pointerout",(()=>{})),i.on("pointerdown",(()=>{if(console.log("container clicked",i.input.enabled),!this.isTransitioning){this.isTransitioning=!0,this.optionContainers.forEach((e=>{e.removeInteractive()})),this.tweens.killAll(),this.optionContainers.forEach((e=>{e.list[0].preFX.clear()})),this.optionContainers.forEach((e=>{e!==i&&this.tweens.add({targets:e,alpha:0,scale:.8,duration:300,ease:"Power2"})})),this.tweens.add({targets:[this.selectionTitle],alpha:0,duration:300,ease:"Power2"});const a=i.list[0],o=i.list[1];this.tweens.add({targets:i,x:this.cameras.main.centerX,y:this.cameras.main.centerY,duration:500,ease:"Power2",onComplete:()=>{this.tweens.add({targets:a,scale:.7,duration:600,ease:"Back.easeOut",onComplete:()=>{console.log("Selected option:",s.name),a.setDepth(1);const n=this.add.image(i.x,i.y,`${s.name.split("_")[0]}_cooked`);n.setScale(a.scale),n.setDepth(2),n.setOrigin(.5,0),n.setAlpha(0);const r=this.add.image(.395*e,.45*t,"indicator1");r.setScale(.42),r.setOrigin(.5),r.setDepth(3),r.alpha=0,r.x-=200;const l=this.add.text(.395*e,.45*t,"0°C",{fontSize:`${Math.floor(25.2)}px`,fontFamily:"Montserrat",fill:"#ffffff",align:"center",shadow:{color:"#000000",blur:0,fill:!0}}).setOrigin(.5).setAngle(60);l.setDepth(4),l.alpha=0;const d=this.add.image(r.x+.3*r.displayWidth,r.y+.3*r.displayHeight,"taphand");d.setScale(1),d.setOrigin(0),d.setDepth(5),d.setAlpha(0);const h=()=>{this.tweens.add({targets:d,scale:.8,duration:150,yoyo:!0,repeat:2,ease:"Bounce.easeIn",onComplete:()=>{}})};this.tweens.add({targets:r,x:.395*e,alpha:1,duration:1e3,ease:"Power2",onComplete:()=>{l.x=r.x-.22*r.displayWidth,l.y=r.y-.3*r.displayHeight,d.x=r.x-.22*r.displayWidth,d.y=r.y-.3*r.displayHeight,this.tweens.add({targets:[l,d],alpha:1,duration:500,ease:"Power2",onComplete:()=>{h();const e=(e=>{switch((e=e.replace("_uncooked","")).toLowerCase()){case"salmon":return"poisson";case"chicken":return"poulet";case"beef":return"bœuf";default:return e}})(s.name),c=this.add.text(this.cameras.main.centerX,.2*t,`Commencez la cuisson du ${e} en \ntapant sur le thermomètre`,{fontSize:`${Math.floor(50.4)}px`,fontFamily:"Asap",fill:"#ffffff",align:"center",shadow:{color:"#000000",blur:2,fill:!0}}).setOrigin(.5);if(c.alpha=0,!document.querySelector(".cooking-progress-container")){const e=document.createElement("div");e.className="cooking-progress-container";const t=document.createElement("div");t.className="cooking-progress-text",t.textContent="Barre de cuisson",t.style.fontSize="36px",t.style.fontFamily="Asap",t.style.color="#ffffff",t.style.textAlign="center",t.style.marginBottom="10px";const s=document.createElement("div");s.className="cooking-progress-bar";const a=document.createElement("div");a.className="cooking-progress-fill",s.appendChild(a),e.appendChild(t),e.appendChild(s),document.body.appendChild(e)}this.cookingProgress=0;const g=document.querySelector(".cooking-progress-container"),p=document.querySelector(".cooking-progress-fill");this.time.delayedCall(1200,(()=>{g.style.display="block",this.progressTimer=this.time.addEvent({delay:20,callback:()=>{if("safe"===w&&(this.cookingProgress=Math.min(100,this.cookingProgress+.1),p.style.width=`${this.cookingProgress}%`),this.cookingProgress>=50){const e=(this.cookingProgress-50)/50;n.setAlpha(e),this.smoke&&this.smoke.destroy(),this.smoke=this.add.image(n.x,n.y-.2*n.displayHeight,"smoke"),this.smoke.setScale(.7),this.smoke.setAlpha(0),this.smoke.setDepth(3),this.tweens.add({targets:this.smoke,alpha:.8,duration:800,ease:"Power2"}),this.tweens.add({targets:this.smoke,y:this.smoke.y-70,duration:2500,ease:"Power1",yoyo:!0,repeat:-1})}this.cookingProgress>=100&&(this.progressTimer&&this.progressTimer.remove(),this.time.delayedCall(500,(()=>{g.style.display="none"})))},loop:!0})})),this.events.once("shutdown",(()=>{g&&g.remove(),this.progressTimer&&this.progressTimer.remove()})),this.tweens.add({targets:c,alpha:1,duration:500,ease:"Power2",delay:1200});let m=0,u=70;u="chicken_uncooked"===s.name?74:"beef_uncooked"===s.name?71:70;let f,y=0,w="start";const k=(e,t)=>{c.flashTween&&c.flashTween.remove(),c.setText(e),c.setStyle({fill:t}),c.setAlpha(1),c.flashTween=this.tweens.add({targets:c,alpha:.5,delay:500,duration:500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})};k(`Commencez la cuisson du ${e} en \ntapant sur le thermomètre`,"#ffffff");const x=()=>{if(l.setText(`${Math.round(m)}°C`),y>=3&&"start"===w&&(w="monitoring"),this.cookingProgress>=100)return f&&f.remove(),c.flashTween&&c.flashTween.remove(),this.tweens.add({targets:[r,l,c,g],alpha:0,duration:500,ease:"Power2",onComplete:()=>{r.destroy(),l.destroy(),c.destroy(),g.style.display="none",this.time.delayedCall(2e3,(()=>{this.tweens.add({targets:[a,n,i,this.image,this.smoke],alpha:0,duration:500,ease:"Power2",onComplete:()=>{a.destroy(),n.destroy(),i.destroy(),this.image.destroy(),this.showFinalScreen()}})}))}}),void this.tweens.add({targets:a,alpha:0,duration:500,ease:"Power2"});"start"!==w&&(m>=u?"safe"!==w&&(w="safe",k(`Super ! Le ${e} est à la \nbonne température sécuritaire.`,"#FBDF42")):"unsafe"!==w&&(w="unsafe",k(`Oups ! Le ${e} n'est pas \nà une température sécuritaire.`,"#ff0000"))),m>=u?(l.setStyle({fill:"#000000"}),r.setTexture("indicator2")):(l.setStyle({fill:"#ffffff"}),r.setTexture("indicator1"))};this.events.once("shutdown",(()=>{c.flashTween&&c.flashTween.remove()})),r.setInteractive({useHandCursor:!0}),r.on("pointerdown",(()=>{d&&d.active&&this.tweens.add({targets:d,alpha:0,duration:200,ease:"Power2",onComplete:()=>{d.destroy()}}),y++,m=Math.min(100,m+5),x(),this.tweens.add({targets:[r],scaleX:"*=1.02",scaleY:"*=1.02",duration:50,yoyo:!0,ease:"Power2"}),this.tweens.add({targets:[l],scaleX:"*=1.1",scaleY:"*=1.1",duration:50,yoyo:!0,ease:"Power2"})})),(()=>{f=this.time.addEvent({delay:100,callback:()=>{m>0&&(m=Math.max(0,m-.2),x())},loop:!0})})(),this.tweens.add({targets:o,alpha:0,duration:300,ease:"Power2"})}})}}),this.tweens.add({targets:o,alpha:0,duration:300,ease:"Power2"})}})}})}})),this.optionContainers.push(i)})),this.tweens.add({targets:this.selectionTitle,alpha:1,duration:500,ease:"Power2"}),this.optionContainers.forEach(((e,t)=>{this.tweens.add({targets:e,alpha:1,duration:500,ease:"Power2",delay:300+200*t,onComplete:()=>{t===this.optionContainers.length-1&&(this.isTransitioning=!1,this.startGlowSequence(1.4))}})}))}startGlowSequence(e){this.optionContainers.forEach(((e,t)=>{const s=e.list[0];e.list[1];const a=s.preFX.addGlow(16777215,0,0,!1);this.tweens.add({targets:a,outerStrength:4,innerStrength:1,duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:1e3*t}),this.tweens.add({targets:s,scaleX:1.05*s.scaleX,scaleY:1.05*s.scaleY,duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:1e3*t})}))}showFinalScreen(){if(this.clickBG)return;this.clickBG=!0;const e=this.cameras.main.centerX;this.cameras.main.centerY;const t=this.cameras.main.width,s=this.cameras.main.height,a=this.add.text(e,.2*s,"Bien joué !",{fontSize:"80px",fontFamily:"Asap",fill:"#ffffff",align:"center"}).setOrigin(.5),i=this.add.text(e,.35*s,"Pour plus de conseils sur la \n sécurité alimentaire, visitez",{fontSize:"50px",fontFamily:"Asap",fill:"#ffffff",align:"center"}).setOrigin(.5),o=this.add.text(e,.4*s,"Canada.ca/salubrite-aliments",{fontSize:"50px",fontFamily:"Asap",fill:"#FBDF42",align:"center"}).setOrigin(.5),n=this.add.image(e,.6*s,"tryagainbtn").setInteractive({useHandCursor:!0}).setScale(.5),r=this.add.image(e,s,"learnBtn").setInteractive({useHandCursor:!0}).setScale(.56).setOrigin(.5,1).setDepth(1);r.on("pointerover",(()=>{this.tweens.add({targets:r,scale:.6,duration:100,ease:"Power2"})})),r.on("pointerout",(()=>{this.tweens.add({targets:r,scale:.56,duration:100,ease:"Power2"})})),r.on("pointerdown",(()=>{window.open("https://www.Canada.ca/salubrite-aliments","_blank"),this.tweens.add({targets:r,scale:.5,duration:100,ease:"Power2",onComplete:()=>{this.tweens.add({targets:r,scale:.56,duration:100,ease:"Back.easeOut",onComplete:()=>{window.open("https://www.Canada.ca/securitealimentaire","_blank")}})}})})),n.on("pointerover",(()=>{this.tweens.add({targets:n,scale:.54,duration:100,ease:"Power2"})})),n.on("pointerout",(()=>{this.tweens.add({targets:n,scale:.5,duration:100,ease:"Power2"})})),n.on("pointerdown",(()=>{this.smoke.destroy(),this.clickBG=!1,this.image=this.add.image(t/2,s/2,"background"),this.image.setOrigin(.5),this.image.setScale(.77),this.image.alpha=0;const e=[a,i,o,n,r];this.tweens.add({targets:e,alpha:0,duration:500,ease:"Power2",onComplete:()=>{e.forEach((e=>e.destroy())),this.isGameStarted=!1,this.isCooking=!1,this.cookingProgress=0;const t=document.querySelector(".cooking-progress-container");t&&t.remove(),this.image&&this.image.setAlpha(1),this.showSelectionPage()}})}));const l=[a,i,o,n];r.setAlpha(0),r.y+=50,l.forEach(((e,t)=>{e.setAlpha(0),e.y+=20*t})),this.tweens.add({targets:l,alpha:1,y:"-=20",duration:500,ease:"Back.easeOut",delay:this.tweens.stagger(200),onComplete:()=>{l.forEach((e=>{this.tweens.add({targets:e,y:"+=5",duration:2e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})})),this.tweens.add({targets:r,alpha:1,y:"-=50",duration:700,ease:"Back.easeOut",onComplete:()=>{this.tweens.add({targets:r,y:"+=8",duration:2500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}})}})}}class n extends e.Scene{constructor(){super("Preloader")}init(){i(this),console.log(i(this)),this.add.image(512,384,"background")}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),this.load.image("indicator1","indicator1.png"),this.load.image("indicator2","indicator2.png"),this.load.image("beef_uncooked","beef_uncooked.png"),this.load.image("salmon_uncooked","salmon_uncooked.png"),this.load.image("chicken_uncooked","chicken_uncooked.png"),this.load.image("beef_cooked","beef_cooked.png"),this.load.image("salmon_cooked","salmon_cooked.png"),this.load.image("chicken_cooked","chicken_cooked.png"),this.load.image("tryagainbtn","tryagainbtn.png"),this.load.image("learnBtn","learnBtn.png"),this.load.image("smoke","smoke.png"),this.load.image("taphand","taphand.png")}create(){this.scene.start("MainMenu")}}const r={type:Phaser.AUTO,width:960,height:1440,parent:"game-container",background:"transparent",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},fps:{target:60,forceSetTimeOut:!0},transparent:!0,scene:[t,n,o,s,a]};new Phaser.Game(r);
