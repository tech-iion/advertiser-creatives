import{p as t}from"./phaser-C2RWnc_5.js";function e(t,e){const s=/Mobi|Android/i.test(navigator.userAgent),a=/iPhone/i.test(navigator.userAgent),i=window.innerWidth,h=window.innerHeight;let o,n;o=t.game.canvas.width,n=t.game.canvas.height;const r=document.getElementsByTagName("canvas")[0],l=Math.abs(parseFloat(r.style.marginTop||0))/i*o+(a?130:0),d=Math.abs(parseFloat(r.style.marginLeft||0))/h*n;let c=h/(i+2*d)*.85;return s?{canvasWidth:o,canvasHeight:n,scaleFactor:c,topMarginOffset:l,leftMarginOffsetPercentage:d,isMobileDevice:s,isIphoneDevice:a}:(c=1.4,{canvasWidth:o,canvasHeight:n,scaleFactor:c,topMarginOffset:0,leftMarginOffsetPercentage:0})}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class s extends t.Scene{constructor(){super("MainMenu")}fnfetchAPI(t){fetch(t,{method:"GET"}).then((t=>console.log("Tracking sent:",t.status))).catch((t=>console.error("Tracking error:",t)))}shuffleArray(t){for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}create(){const{canvasWidth:t,canvasHeight:s,scaleFactor1:a,topMarginOffset:i,leftMarginOffsetPercentage:h,isMobileDevice:o,isIphoneDevice:n}=e(this);if(this.canvasWidth=t,this.canvasHeight=s,this.scaleFactor=1.4,this.bg2=this.add.image(.5*t,.5*s,"sc2"),this.bg2.setOrigin(.5).setDepth(1),this.bg2.setScale(1.1*this.scaleFactor),this.bg2.alpha=0,this.conveyor=this.add.sprite(.5*t,1*s,"conveyor000"),this.conveyor.setOrigin(.5,1).setDepth(1),this.conveyor.setScale(1.1*this.scaleFactor),this.conveyor.alpha=0,!this.anims.exists("conveyorAnim")){const t=[];for(let e=0;e<122;e++)t.push({key:"conveyor"+e.toString().padStart(3,"0")});this.anims.create({key:"conveyorAnim",frames:t,frameRate:24,repeat:-1})}this.item1=this.add.image(.11*t,1*s,"item1"),this.item1.setOrigin(.5,.5).setDepth(10),this.item1.setScale(.65*this.scaleFactor),this.item1.alpha=0,this.item2=this.add.image(.305*t,1*s,"item2"),this.item2.setOrigin(.5,.5).setDepth(10),this.item2.setScale(.65*this.scaleFactor),this.item2.alpha=0,this.item3=this.add.image(.5*t,1*s,"item3"),this.item3.setOrigin(.5,.5).setDepth(10),this.item3.setScale(.65*this.scaleFactor),this.item3.alpha=0,this.item4=this.add.image(.695*t,1*s,"item4"),this.item4.setOrigin(.5,.5).setDepth(10),this.item4.setScale(.65*this.scaleFactor),this.item4.alpha=0,this.item5=this.add.image(.89*t,1*s,"item5"),this.item5.setOrigin(.5,.5).setDepth(10),this.item5.setScale(.65*this.scaleFactor),this.item5.alpha=0,this.select=this.add.image(.5*t,1*s,"select"),this.select.setOrigin(.5,.5).setDepth(10),this.select.setScale(.75*this.scaleFactor),this.select.alpha=0,this.itemCount=0,this.bg=this.add.image(.5*t,1.5*s,"sc1"),this.bg.setOrigin(.5).setDepth(1),this.bg.setScale(1.1*this.scaleFactor),this.bg.alpha=1,this.tweens.add({targets:this.bg,y:.5*s,duration:500,ease:"Power2",delay:500}),this.overlay11=this.add.image(.5*t,.5*-s,"overlay11"),this.overlay11.setOrigin(.5,0).setDepth(1),this.overlay11.setScale(1*this.scaleFactor),this.overlay11.alpha=0,this.overlay22=this.add.image(.5*t,.5*-s,"overlay22"),this.overlay22.setOrigin(.5,0).setDepth(1),this.overlay22.setScale(1*this.scaleFactor),this.overlay22.alpha=0,this.txt1=this.add.image(.45*t,.5*-s,"txt1"),this.txt1.setOrigin(.5,0).setDepth(1),this.txt1.setScale(1.1*this.scaleFactor),this.txt1.alpha=0,this.akf=this.add.image(.75*t,.4*s,"akf"),this.akf.setOrigin(.5).setDepth(1),this.akf.setScale(0*this.scaleFactor).setAngle(-5),this.akf.alpha=0;let r=.5*t,l=this.conveyor.y-this.conveyor.displayHeight+.44*this.conveyor.displayHeight;this.overlaybox=this.add.image(.5*t,1*s,"overlaybox2"),this.overlaybox.setOrigin(.5,.95).setDepth(4),this.overlaybox.setScale(.55*this.scaleFactor),this.overlaybox.setBlendMode(Phaser.BlendModes.ADD),this.overlaybox.alpha=0,this.overlaybox.x=r,this.overlaybox.y=l,this.tweens.add({targets:this.akf,scale:1*this.scaleFactor,alpha:1,duration:500,ease:"Back.out",delay:1250,onComplete:()=>{this.tweens.add({targets:this.akf,angle:{from:-5,to:5},duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}}),this.tweens.add({targets:this.txt1,y:.05*s,duration:500,ease:"Power2",delay:250,onComplete:()=>{this.tweens.add({targets:this.txt1,alpha:1,duration:500,ease:"Power2",delay:250})}}),this.tweens.add({targets:this.overlay11,y:.1*-this.canvasHeight,alpha:1,duration:500,ease:"Power2",delay:750,onComplete:()=>{this.tweens.add({targets:this.overlay11,x:.975*this.overlay11.x,duration:2e3,ease:"Linear",delay:0,yoyo:!0,repeat:-1})}}),this.tweens.add({targets:this.overlay22,y:.1*-this.canvasHeight,alpha:1,duration:500,ease:"Power2",delay:750,onComplete:()=>{this.tweens.add({targets:this.overlay22,x:1.025*this.overlay22.x,duration:2e3,ease:"Linear",delay:0,yoyo:!0,repeat:-1})}}),this.btn1=this.add.image(.5*t,1.5*s,"btn1"),this.btn1.setOrigin(.5).setDepth(1),this.btn1.setScale(1.1*this.scaleFactor),this.btn1.alpha=1,this.tweens.add({targets:this.btn1,y:.9*s,duration:500,ease:"Power2",delay:1e3,onComplete:()=>{this.tweens.add({targets:this.btn1,scale:1.05*this.scaleFactor,duration:500,ease:"Power2",yoyo:!0,repeat:-1}),this.btn1.setInteractive(),this.input.on("pointerdown",(()=>{this.input.off("pointerdown"),this.bgMusic||(this.bgMusic=this.sound.add("bgMusic",{loop:!0,volume:.3}),this.bgMusic.play()),this.tweens.add({targets:this.bg,y:1.5*s,alpha:0,duration:500,ease:"Power2",delay:0}),this.tweens.add({targets:this.txt1,alpha:0,y:.25*-s,duration:1e3,ease:"Power2",delay:0}),this.tweens.add({targets:this.akf,alpha:0,y:.25*-s,duration:1e3,ease:"Power2",delay:0}),this.tweens.add({targets:this.btn1,y:1.5*s,duration:500,ease:"Power2",yoyo:!1,delay:250,repeat:0}),this.tweens.add({targets:[this.bg2,this.conveyor],alpha:1,duration:500,ease:"Power2",delay:0}),this.tweens.add({targets:[this.overlaybox],alpha:.15,duration:500,ease:"Power2",delay:0}),this.tweens.add({targets:this.select,y:.85*s,duration:500,ease:"Back.easeOut",delay:this.tweens.stagger(100,{start:250}),onComplete:()=>{}}),this.tweens.add({targets:[this.item1,this.item2,this.item3,this.item4,this.item5],alpha:1,y:.875*s,duration:500,ease:"Back.easeOut",delay:this.tweens.stagger(100,{start:250}),onComplete:()=>{[this.item1,this.item2,this.item3,this.item4,this.item5].forEach(((t,e)=>{t.setInteractive(),t.on("pointerdown",(()=>{this.spawnTreat(e+1)}))}))}}),this.tweens.add({targets:this.overlay11,y:.5*-this.canvasHeight,alpha:1,duration:500,ease:"Power2",delay:250}),this.tweens.add({targets:this.overlay22,y:.5*-this.canvasHeight,alpha:1,duration:500,ease:"Power2",delay:250}),this.hand=this.add.image(.6*t,.95*s,"hand"),this.hand.setOrigin(.25,.15),this.hand.setScale(.5*this.scaleFactor).setDepth(100),this.hand.alpha=1,this.moveHandToRandomItem(),this.exitBtn=this.add.image(.925*t,.05*s,"exitbtn"),this.exitBtn.setOrigin(.5).setDepth(100),this.exitBtn.setScale(0),this.exitBtn.alpha=1,this.tweens.add({targets:this.exitBtn,scale:1*this.scaleFactor,duration:400,ease:"Back.out",delay:500,onComplete:()=>{this.exitBtn.setInteractive(),this.exitBtn.on("pointerdown",(()=>{this.exitBtn.alpha<1||(this.exitBtn.disableInteractive(),this.finalCTA())}))}})}))}})}setItemsInteractive(t){[this.item1,this.item2,this.item3,this.item4,this.item5].forEach((e=>{e&&e.input&&(e.input.enabled=t)}))}fnSparkle(t,e,s){this.sparkles||(this.sparkles=[]);const a=this.add.image(t,e,"sparkle");a.setScale(.5),a.setAlpha(0),a.setDepth(10),a.setAngle(Phaser.Math.Between(0,360)),this.sparkles.push(a),this.tweens.add({targets:a,alpha:{from:0,to:1},scale:{from:.5,to:s},angle:{from:a.angle,to:a.angle+Phaser.Math.Between(180,360)},duration:2e3,delay:Phaser.Math.Between(200,1e3),yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}createSparkleEffect(t,e){if(!this.textures.exists("sparkle"))return;const s=100*this.scaleFactor;for(let a=0;a<8;a++){const i=Phaser.Math.Between(.5*-s,.5*s),h=Phaser.Math.Between(.8*-s,.2*-s),o=this.add.image(t+i,e+h,"sparkle");o.setDepth(10).setScale(0).setAlpha(0).setBlendMode("ADD"),this.tweens.add({targets:o,scale:{from:0,to:Phaser.Math.FloatBetween(.5,1)*this.scaleFactor},alpha:{from:0,to:1},angle:{from:0,to:180},duration:400,yoyo:!0,ease:"Sine.easeInOut",delay:100*a,onComplete:()=>{o.destroy()}})}}createConfetti(){if(this.textures.exists("confetti"))return;const t=this.make.graphics({x:0,y:0});t.fillStyle(16777215),t.fillRect(0,0,10,10),t.generateTexture("confetti",10,10),t.destroy()}moveHandToRandomItem(){if(!this.hand||this.currentTreat)return;const t=Phaser.Utils.Array.GetRandom([this.item1,this.item2,this.item3,this.item4,this.item5]);this.tweens.add({targets:this.hand,x:t.x,y:t.y,duration:500,ease:"Power2",onComplete:()=>{this.hand&&this.tweens.add({targets:this.hand,scale:.4*this.scaleFactor,duration:100,yoyo:!0,repeat:0,onComplete:()=>{this.hand&&this.time.delayedCall(500,(()=>{this.moveHandToRandomItem()}))}})}})}spawnTreat(t){if(this.currentTreat)return;this.sound.play("click",{volume:.5}),this.hand&&(this.tweens.killTweensOf(this.hand),this.hand.destroy(),this.hand=null),this.setItemsInteractive(!1),this.exitBtn&&this.tweens.add({targets:this.exitBtn,alpha:.3,duration:200}),[this.item1,this.item2,this.item3,this.item4,this.item5].forEach(((e,s)=>{const a=s+1===t;e&&(a&&(this.select.x=e.x,this.select.y=e.y,this.tweens.add({targets:this.select,alpha:0,scale:.95*this.scaleFactor,duration:300,ease:"Back.easeOut"}),this.tweens.add({targets:this.select,alpha:1,duration:300,delay:200,ease:"Back.easeOut"})),this.tweens.add({targets:e,scale:this.scaleFactor*(a?.7:.65),duration:200,ease:"Back.easeOut"}))}));const{canvasWidth:e,canvasHeight:s}=this,a=this.conveyor.y-this.conveyor.displayHeight,i=.3*-e,h=a+.1*this.conveyor.displayHeight,o=.3*this.scaleFactor,n=.5*e,r=a+.45*this.conveyor.displayHeight,l=.45*this.scaleFactor;this.currentTreat=this.add.image(i,h,"treat"+t),this.currentTreat.setOrigin(.5,1).setDepth(3),this.currentTreat.setScale(o),setTimeout((()=>{this.conveyor.play("conveyorAnim")}),100),this.conveyorSound||(this.conveyorSound=this.sound.add("conveyorbelt",{loop:!0,volume:.1})),this.conveyorSound.play(),this.tweens.add({targets:this.currentTreat,x:n,y:r,scale:l,duration:1500,ease:"Linear",onComplete:()=>{this.conveyor.stop(),this.conveyor.setFrame("conveyor000"),this.conveyorSound&&this.conveyorSound.stop(),setTimeout((()=>{this.sound.play("scan",{volume:.5})}),50);const e=this.add.image(n,r,"product"+t);e.setOrigin(.5,1).setDepth(3),e.setScale(l);const s=this.make.graphics();s.fillStyle(16777215);const a=e.getBounds();s.fillRect(a.right,a.y,0,a.height);const i=s.createGeometryMask();if(e.setMask(i),!this.textures.exists("scanGlow")){const t=this.make.graphics();t.fillGradientStyle(16762985,16762985,16762985,16762985,0,1,1,0),t.fillRect(0,0,64,32),t.generateTexture("scanGlow",64,32),t.destroy()}const h=a.y+.5*a.height,o=this.add.image(a.right,h,"scanGlow");o.setDisplaySize(60,1.05*a.height),o.setOrigin(.5,.5).setDepth(4).setAlpha(.5).setBlendMode(Phaser.BlendModes.ADD);const d=this.add.rectangle(a.right,h,6,.75*a.height,16771232);d.setOrigin(.5,.5).setDepth(4).setAlpha(.9).setBlendMode(Phaser.BlendModes.ADD);const c=this.make.graphics();c.fillStyle(16777215),c.fillRect(a.x,a.y,a.width,a.height);const g=c.createGeometryMask();this.currentTreat.setMask(g),this.tweens.addCounter({from:0,to:a.width,duration:1800,delay:250,ease:"Power1",onStart:()=>{},onUpdate:t=>{const e=t.getValue(),i=a.right-e;s.clear(),s.fillStyle(16777215),s.fillRect(i,a.y,e,a.height),c.clear(),c.fillStyle(16777215),c.fillRect(a.x,a.y,i-a.x,a.height),o.x=i,d.x=i},onComplete:()=>{const t=Phaser.Math.RND.pick(["reveal1","reveal2"]);this.sound.play(t,{volume:.5}),o.destroy(),d.destroy(),this.currentTreat.destroy(),this.currentTreat=e,e.clearMask();const s=this.add.image(n+.3*this.canvasWidth,r-.6*e.displayHeight,"smile");s.setOrigin(.5).setDepth(5).setScale(0).setAlpha(0);const a=this.add.image(n-.3*this.canvasWidth,r-.3*e.displayHeight,"akf");a.setOrigin(.5).setDepth(5).setScale(0).setAlpha(0).setAngle(5),this.tweens.add({targets:s,scale:1*this.scaleFactor,alpha:1,duration:400,ease:"Back.out",delay:200}),this.tweens.add({targets:a,scale:1*this.scaleFactor,alpha:1,duration:400,ease:"Back.out",delay:350,onComplete:()=>{this.tweens.add({targets:a,angle:{from:5,to:-5},duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}}),this.time.delayedCall(5e3,(()=>{this.tweens.add({targets:s,scale:0,alpha:0,duration:300,ease:"Back.in",onComplete:()=>s.destroy()}),this.tweens.add({targets:a,scale:0,alpha:0,duration:300,ease:"Back.in",delay:100,onComplete:()=>{a.destroy(),this.time.delayedCall(300,(()=>{this.revealFinalBox(n,r,l)}))}})}))}})}})}revealFinalBox(t,e,s){const a=this.add.image(t,e,"finalbox");a.setOrigin(.5,.95).setDepth(5).setScale(.56*this.scaleFactor);const i=this.make.graphics();i.fillStyle(16777215);const h=a.getBounds();i.fillRect(h.x,h.top,h.width,0);const o=i.createGeometryMask();if(a.setMask(o),!this.textures.exists("scanGlow")){const t=this.make.graphics();t.fillGradientStyle(16762985,16762985,16762985,16762985,0,1,1,0),t.fillRect(0,0,32,64),t.generateTexture("scanGlow",32,64),t.destroy()}const n=this.add.image(t,h.top,"scanGlow");n.setDisplaySize(h.width,40),n.setOrigin(.5,.5).setDepth(6).setAlpha(.8).setBlendMode(Phaser.BlendModes.ADD);const r=new Phaser.Display.Masks.BitmapMask(this,a);n.setMask(r),this.tweens.addCounter({from:0,to:h.height,duration:800,ease:"Power2",onUpdate:t=>{const e=t.getValue();i.clear(),i.fillStyle(16777215),i.fillRect(h.x,h.top,h.width,e),n.y=h.top+e},onComplete:()=>{this.sound.play("package"),n.destroy(),a.clearMask(),this.currentTreat.destroy(),this.currentTreat=a;const t=1.5*this.canvasWidth,e=this.conveyor.y-.25*this.conveyor.displayHeight;setTimeout((()=>{this.conveyor.play("conveyorAnim")}),100),this.conveyorSound&&this.conveyorSound.play(),this.tweens.add({targets:a,x:t,y:e,duration:1e3,ease:"Linear",delay:200,onComplete:()=>{this.conveyorSound&&this.conveyorSound.stop(),setTimeout((()=>{this.conveyor.stop(),this.conveyor.setFrame("conveyor000"),this.itemCount++,this.itemCount>=1e3?(this.sound.play("win"),setTimeout((()=>{this.finalCTA()}),500)):(this.setItemsInteractive(!0),this.exitBtn&&this.tweens.add({targets:this.exitBtn,alpha:1,duration:200}),[this.item1,this.item2,this.item3,this.item4,this.item5].forEach((t=>{t&&(this.tweens.add({targets:t,scale:.65*this.scaleFactor,duration:200,ease:"Back.easeOut"}),this.tweens.add({targets:this.select,alpha:0,scale:.75*this.scaleFactor,duration:300,delay:0,ease:"Back.easeOut"}))})))}),200),a.destroy(),this.currentTreat=null}})}})}finalCTA(){this.overlay11.y=1*-this.canvasHeight,this.overlay22.y=1*-this.canvasHeight,this.overlay11.setTexture("overlay44").setScale(1.1*this.scaleFactor),this.overlay22.setTexture("overlay33").setScale(1.1*this.scaleFactor),this.tweens.add({targets:this.overlay11,y:.1*-this.canvasHeight,alpha:1,duration:500,ease:"Power2",delay:250}),this.tweens.add({targets:this.overlay22,y:.1*-this.canvasHeight,alpha:1,duration:500,ease:"Power2",delay:250}),this.exitBtn&&this.tweens.add({targets:this.exitBtn,scale:0,alpha:0,duration:300,ease:"Back.in",onComplete:()=>{this.exitBtn.destroy(),this.exitBtn=null}}),this.overlaybox&&this.tweens.add({targets:this.overlaybox,alpha:0,duration:300,onComplete:()=>this.overlaybox.destroy()}),this.sparkles&&(this.sparkles.forEach((t=>{t&&(this.tweens.killTweensOf(t),t.destroy())})),this.sparkles=[]),[this.item1,this.item2,this.item3,this.item4,this.item5,this.select].forEach((t=>{t&&this.tweens.add({targets:t,alpha:0,duration:300,onComplete:()=>{t.active&&t.destroy()}})})),this.tweens.add({targets:this.bg2,alpha:0,duration:300,onComplete:()=>this.bg2.destroy()}),this.tweens.add({targets:this.conveyor,alpha:0,y:1.5*this.canvasHeight,duration:300,onComplete:()=>this.conveyor.destroy()}),this.bg.setTexture("sc3"),this.txt1.y=1.8*-this.canvasHeight,this.txt1.setTexture("txt2"),this.tweens.add({targets:this.bg,y:.5*this.canvasHeight,alpha:1,duration:500,ease:"Power2",delay:250}),this.tweens.add({targets:this.txt1,y:.15*this.canvasHeight,alpha:1,duration:500,ease:"Power2",delay:750}),this.btn1.setTexture("cta"),this.tweens.add({targets:this.btn1,y:.9*this.canvasHeight,duration:500,ease:"Power2",yoyo:!1,delay:1250,repeat:0,onComplete:()=>{this.btn1.setInteractive(),this.btn1.on("pointerdown",(()=>{this.btn1.disableInteractive(),window.open("https://allkinds.com/au/vanilla-glaze/","_blank")}))}}),this.tryAgainBtn=this.add.image(.15*this.canvasWidth,.15*-this.canvasHeight,"tryagain"),this.tryAgainBtn.setOrigin(.5).setDepth(10),this.tryAgainBtn.setScale(1*this.scaleFactor),this.tweens.add({targets:this.tryAgainBtn,y:.05*this.canvasHeight,duration:500,ease:"Power2",delay:1500,onComplete:()=>{this.tryAgainBtn.setInteractive(),this.tryAgainBtn.on("pointerdown",(()=>{this.tryAgainBtn.disableInteractive(),this.cameras.main.fadeOut(500,0,0,0),this.cameras.main.once("camerafadeoutcomplete",(()=>{this.scene.restart(),this.cameras.main.fadeIn(500,0,0,0)}))}))}})}gotoGame(){this.feeltxt&&this.tweens.add({targets:this.feeltxt,x:-this.canvasWidth,alpha:0,duration:500,ease:"Power2",onComplete:()=>this.feeltxt.destroy()}),this.swipetoshoottxt&&this.tweens.add({targets:this.swipetoshoottxt,x:-this.canvasWidth,alpha:0,duration:500,ease:"Power2",delay:100,onComplete:()=>this.swipetoshoottxt.destroy()}),this.pressuretxt&&this.tweens.add({targets:this.pressuretxt,x:-this.canvasWidth,alpha:0,duration:500,ease:"Power2",delay:150,onComplete:()=>this.pressuretxt.destroy()}),this.ball&&this.tweens.add({targets:this.ball,x:1.5*this.canvasWidth,duration:300,ease:"Back.easeIn",onComplete:()=>this.ball.destroy()}),this.overlay&&this.tweens.add({targets:this.overlay,y:1.5*this.canvasHeight,alpha:0,duration:600,ease:"Power2",onComplete:()=>this.overlay.destroy()}),this.logo&&this.tweens.add({targets:this.logo,scale:.1*this.scaleFactor,x:.9*this.canvasWidth,y:.1*this.canvasHeight,alpha:1,duration:400,ease:"Power2"}),this.tweens.add({targets:this.bg,alpha:0,duration:500,ease:"Power2",onComplete:()=>this.bg.destroy()}),this.setupGame()}setupGame(){this.isShootReady=!0,this.shotsTaken=0,this.goalsScored=0,this.anims.create({key:"goalkeeperIdleAnim",frames:Array.from({length:23},((t,e)=>({key:"goalKeeper"+e}))),frameRate:24,repeat:-1}),this.anims.create({key:"goalkeeperSaveLeftAnim",frames:Array.from({length:33},((t,e)=>({key:"goalKeeperLeft"+e}))),frameRate:24,repeat:0}),this.anims.create({key:"goalkeeperSaveRightAnim",frames:Array.from({length:33},((t,e)=>({key:"goalKeeperRight"+e}))),frameRate:24,repeat:0}),this.anims.create({key:"goalkeeperSaveCenterUpAnim",frames:Array.from({length:24},((t,e)=>({key:"goalKeeperCenterUp"+e}))),frameRate:24,repeat:0}),this.net=this.add.image(.5*this.canvasWidth,.34*this.canvasHeight,"net"),this.net.setOrigin(.5).setDepth(5),this.net.setScale(.9*this.scaleFactor),this.goalZones={left:{x:this.net.x-.25*this.net.displayWidth,y:this.net.y},center:{x:this.net.x,y:this.net.y},right:{x:this.net.x+.25*this.net.displayWidth,y:this.net.y}},this.goalkeeper=this.add.sprite(.5*this.canvasWidth,.55*this.canvasHeight,"goalKeeper0"),this.goalkeeper.setOrigin(.5).setDepth(10),this.goalkeeper.setScale(.8*this.scaleFactor),this.goalkeeper.play("goalkeeperIdleAnim"),this.goalkeeper.y=this.net.y+.22*this.net.displayHeight,this.goalkeeperStartX=this.goalkeeper.x,this.ballShadow=this.add.image(.5*this.canvasWidth,.85*this.canvasHeight,"ballshadow"),this.ballShadow.setOrigin(.5).setDepth(15),this.ballShadow.setScale(.5*this.scaleFactor),this.ballShadow.alpha=.6,this.gameBall=this.add.image(.5*this.canvasWidth,.8*this.canvasHeight,"ball0"),this.gameBall.setOrigin(.5).setDepth(20),this.gameBall.setScale(1.25*this.scaleFactor),this.ballShadow.y=this.gameBall.y+.55*this.gameBall.displayHeight,this.ballStartX=this.gameBall.x,this.ballStartY=this.gameBall.y,this.ballStartScale=this.gameBall.scale,this.swipeConfig={minSwipeDistance:50,maxSwipeDistance:600,minForce:.001,maxForce:1.5},this.setupGameUI(),this.startBallIdleBounce(),this.setupTutorialHint(),this.setupArrowAnimation(),this.setupSwipeControls()}setupArrowAnimation(){this.arrows=[];const t=this.gameBall.y-80,e=.05*this.canvasHeight;for(let s=0;s<5;s++){const a=this.add.image(.5*this.canvasWidth,t-s*e,"arrow1");a.setOrigin(.5).setDepth(25),a.setScale(1*this.scaleFactor),this.arrows.push(a)}this.startArrowAnimation()}startArrowAnimation(){this.arrowTimer&&this.arrowTimer.destroy();let t=0;this.arrowTimer=this.time.addEvent({delay:150,callback:()=>{this.arrows.forEach((t=>t.setTexture("arrow1"))),this.arrows[t]&&this.arrows[t].setTexture("arrow2"),t=(t+1)%5},loop:!0}),this.arrows.forEach((t=>t.setVisible(!0)))}hideArrowAnimation(){this.arrowTimer&&this.arrowTimer.destroy(),this.arrows.forEach((t=>t.setVisible(!1)))}setupTutorialHint(){this.tutorialHintY=.9*this.canvasHeight,this.tutorialHint=this.add.image(.5*this.canvasWidth,this.canvasHeight+100,"swipekickTutorial"),this.tutorialHint.setOrigin(.5).setDepth(100),this.tutorialHint.setScale(1.1*this.scaleFactor),this.showTutorialHint(),this.tutorialIdleTime=3e3,this.resetTutorialTimer()}showTutorialHint(){this.tutorialHint&&this.tweens.add({targets:this.tutorialHint,y:this.tutorialHintY,duration:400,ease:"Back.easeOut"})}hideTutorialHint(){this.tutorialHint&&this.tweens.add({targets:this.tutorialHint,y:this.canvasHeight+100,duration:300,ease:"Power2.easeIn"})}resetTutorialTimer(){this.tutorialTimer&&this.tutorialTimer.destroy(),this.tutorialTimer=this.time.delayedCall(this.tutorialIdleTime,(()=>{this.isShootReady&&this.showTutorialHint()}))}setupGameUI(){this.scoreBallIcon=this.add.image(.05*this.canvasWidth,.06*this.canvasHeight,"ball0"),this.scoreBallIcon.setOrigin(0,.5).setDepth(500),this.scoreBallIcon.setScale(.35*this.scaleFactor),this.scoreDisplay=this.add.text(this.scoreBallIcon.x+this.scoreBallIcon.displayWidth+20,.06*this.canvasHeight,"00",{fontFamily:"'Inter'",fontStyle:"800",fontSize:"60px",color:"#ffffff"}).setOrigin(0,.5).setDepth(500),this.totalScore=0,this.gameTimeLeft=30,this.timerDisplay=this.add.text(.5*this.canvasWidth,.06*this.canvasHeight,"00:30",{fontFamily:"'Inter'",fontStyle:"800",fontSize:"50px",color:"#ffffff"}).setOrigin(.5,.5).setDepth(500),this.gameTimer=this.time.addEvent({delay:1e3,callback:()=>{this.gameTimeLeft--,this.updateTimerDisplay(),this.gameTimeLeft<=0&&(this.gameTimer.destroy(),this.ctascreen())},loop:!0})}updateTimerDisplay(){const t=Math.floor(this.gameTimeLeft/60),e=this.gameTimeLeft%60,s=`${t.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`;this.timerDisplay.setText(s)}ctascreen(){console.log("Time's up! CTA Screen"),this.gameOver=!0,this.isShootReady=!1,this.input.removeAllListeners(),this.stopBallIdleBounce(),this.hideArrowAnimation(),this.tutorialTimer&&this.tutorialTimer.destroy();const t=500;this.tweens.add({targets:[this.gameBall,this.ballShadow],alpha:0,duration:t,ease:"Power2"}),this.tweens.add({targets:[this.net,this.goalkeeper],y:-200,alpha:0,duration:t,ease:"Power2"}),this.tutorialHint&&this.tweens.add({targets:this.tutorialHint,y:this.canvasHeight+200,duration:t,ease:"Power2"}),this.tweens.add({targets:[this.scoreBallIcon,this.scoreDisplay,this.timerDisplay],alpha:0,duration:t,ease:"Power2",onComplete:()=>{this.scoreBallIcon&&this.scoreBallIcon.destroy(),this.scoreDisplay&&this.scoreDisplay.destroy(),this.timerDisplay&&this.timerDisplay.destroy()}}),this.logo&&(this.tweens.add({targets:this.logo,x:this.canvasWidth+200,duration:t,ease:"Power2"}),this.bg=this.add.image(.5*this.canvasWidth,.5*this.canvasHeight,"bg"),this.bg.setOrigin(.5).setDepth(10),this.bg.setScale(1.1*this.scaleFactor),this.bg.alpha=0,this.tweens.add({targets:this.bg,alpha:1,duration:t,ease:"Power2"}),this.cup=this.add.image(.5*this.canvasWidth,this.canvasHeight+200,"cup"),this.cup.setOrigin(.5).setDepth(10),this.cup.setScale(1.1*this.scaleFactor),this.cup.alpha=0,this.tweens.add({targets:this.cup,y:.5*this.canvasHeight,alpha:1,duration:t,ease:"Power2"})),this.time.delayedCall(600,(()=>{this.showCTAContent()}))}showCTAContent(){console.log("Show CTA Content"),this.fifatxt=this.add.image(.5*this.canvasWidth,.75*this.canvasHeight,"fifatxt"),this.fifatxt.setOrigin(.5).setDepth(100),this.fifatxt.setScale(0),this.tweens.add({targets:this.fifatxt,scale:.8*this.scaleFactor,duration:400,ease:"Back.easeOut"}),this.ctaButton=this.add.image(.5*this.canvasWidth,.9*this.canvasHeight,"cta"),this.ctaButton.setOrigin(.5).setDepth(100),this.ctaButton.setScale(.8*this.scaleFactor),this.ctaButton.setInteractive({useHandCursor:!0}),this.input.on("pointerdown",(()=>{console.log("CTA Button Clicked!"),window.open("https://www.fifa.com/en/tournaments/mens/worldcup/canadamexicousa2026","_blank")})),this.tweens.add({targets:this.ctaButton,scale:.85*this.scaleFactor,duration:600,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}updateScoreDisplay(){const t=this.totalScore.toString().padStart(2,"0");this.scoreDisplay.setText(t)}startBallIdleBounce(){const t=this.gameBall.y;this.ballShadow.y;const e=this.ballShadow.scale,s=this.ballShadow.alpha;this.ballBounceTween=this.tweens.add({targets:this.gameBall,y:t-30,duration:400,ease:"Sine.easeOut",yoyo:!0,repeat:-1}),this.shadowBounceTween=this.tweens.add({targets:this.ballShadow,scale:.7*e,alpha:.5*s,duration:400,ease:"Sine.easeOut",yoyo:!0,repeat:-1})}stopBallIdleBounce(){this.ballBounceTween&&(this.ballBounceTween.stop(),this.ballBounceTween=null),this.shadowBounceTween&&(this.shadowBounceTween.stop(),this.shadowBounceTween=null)}drawDebugGraphics(){const t=this.add.graphics();t.setDepth(1e3);const e=this.net.x-.48*this.net.displayWidth,s=this.net.x+.48*this.net.displayWidth,a=this.net.y-.5*this.net.displayHeight,i=this.net.y+.5*this.net.displayHeight;t.lineStyle(3,65280,.8),t.strokeRect(e,a,s-e,i-a),t.lineStyle(4,16755200,.8),t.strokeRect(e-.015*this.canvasWidth,a,.01*this.canvasWidth,i-a),t.strokeRect(s+.005*this.canvasWidth,a,.01*this.canvasWidth,i-a),t.strokeRect(e,a-.005*this.canvasWidth,s-e,.01*this.canvasWidth),t.lineStyle(2,16711680,.5),t.strokeRect(e-100,a-50,80,i-a+100),t.strokeRect(s+20,a-50,80,i-a+100),t.strokeRect(e,a-100,s-e,80);const h={fontFamily:"'Inter'",fontSize:"14px",color:"#ffffff",stroke:"#000000",strokeThickness:2};this.add.text(this.net.x,a-40,"MISS (over)",h).setOrigin(.5).setDepth(1001),this.add.text(e-50,this.net.y,"MISS",h).setOrigin(.5).setDepth(1001),this.add.text(s+50,this.net.y,"MISS",h).setOrigin(.5).setDepth(1001),this.add.text(e+10,this.net.y,"POST",{...h,color:"#ffaa00"}).setOrigin(0,.5).setDepth(1001),this.add.text(s-10,this.net.y,"POST",{...h,color:"#ffaa00"}).setOrigin(1,.5).setDepth(1001),this.add.text(this.net.x,a+10,"CROSSBAR",{...h,color:"#ffaa00"}).setOrigin(.5,0).setDepth(1001),this.add.text(this.net.x,this.net.y,"GOAL ZONE",{...h,color:"#00ff00"}).setOrigin(.5).setDepth(1001)}setupSwipeControls(){let t=0,e=0,s=0;this.input.on("pointerdown",(a=>{this.isShootReady&&(t=a.x,e=a.y,s=Date.now())})),this.input.on("pointerup",(a=>{if(!this.isShootReady)return;const i=a.x,h=a.y,o=Date.now()-s,n=i-t,r=h-e,l=Math.sqrt(n*n+r*r);if(l>this.swipeConfig.minSwipeDistance&&r<0){this.isShootReady=!1,this.stopBallIdleBounce(),this.hideTutorialHint(),this.hideArrowAnimation(),this.ballShadow.alpha=0;const t=n/l,e=.4*this.net.displayWidth,s=this.net.x+t*e,a=this.net.x-e,i=this.net.x+e,h=Math.max(a,Math.min(i,s)),{minForce:r,maxForce:d,maxSwipeDistance:c}=this.swipeConfig,g=Math.min(r+l/c*(d-r),d);console.log("Swipe distance:",l,"Force:",g);const p=.5*this.net.displayHeight,y=this.net.y+.3*this.net.displayHeight,m=this.net.y-.5*this.net.displayHeight;let u;this.net.displayHeight,u=g<=1?y-g*p:m-(g-1)*this.net.displayHeight*.5;const w=Math.min(l/o*10,1);let v;v=h<this.net.x-.3*e?"left":h>this.net.x+.3*e?"right":"center",this.shootBall(h,u,v,w)}}))}shootBall(t,e,s,a){console.log("Shooting to:",t,e,"Direction:",s,"Power:",a);const i=["left","center","right"][Math.floor(3*Math.random())];this.goalkeeperDive(i);const h=.2*this.scaleFactor;let o=0;this.ballSpinTimer=this.time.addEvent({delay:20,callback:()=>{o=(o+1)%7,this.gameBall.setTexture("ball"+o)},loop:!0}),this.lastShotTargetX=t,this.lastShotTargetY=e;const n=this.net.x-.48*this.net.displayWidth,r=this.net.x+.48*this.net.displayWidth,l=this.net.y-.5*this.net.displayHeight,d=this.net.y+.5*this.net.displayHeight,c=.015*this.canvasWidth,g=t>n&&t<r,p=e>l&&e<d,y=t>=n-c&&t<=n+c||t>=r-c&&t<=r+c||e>=l-c&&e<=l+c,m=this.gameBall.y,u=.3*(m-e);this.cameras.main.shake(150,.01),this.tweens.add({targets:this.gameBall,x:t,scale:h,duration:600,ease:"Sine.easeOut",onUpdate:t=>{const s=t.progress,a=m+(e-m)*s,i=Math.sin(s*Math.PI)*u;this.gameBall.y=a-i},onComplete:()=>{this.ballSpinTimer&&this.ballSpinTimer.destroy(),this.shotsTaken++,y?this.onPostHit():g&&p?s!==i?(this.goalsScored++,this.onGoal(t)):this.onSave():this.onMiss()}})}goalkeeperDive(t){let e=this.goalkeeperStartX;"left"===t?e=this.goalkeeperStartX-.3*this.net.displayWidth:"right"===t&&(e=this.goalkeeperStartX+.3*this.net.displayWidth),"left"===t?(this.goalkeeper.play("goalkeeperSaveLeftAnim"),this.tweens.add({targets:this.goalkeeper,x:e,duration:500,duration:500,ease:"Power2"}),this.goalkeeper.once("animationcomplete",(()=>{this.tweens.add({targets:this.goalkeeper,alpha:0,duration:250,onComplete:()=>{this.goalkeeper.alpha=1,this.goalkeeper.setVisible(!1)}})}))):"right"===t?(this.goalkeeper.play("goalkeeperSaveRightAnim"),this.tweens.add({targets:this.goalkeeper,x:e,duration:500,ease:"Power2"}),this.goalkeeper.once("animationcomplete",(()=>{this.tweens.add({targets:this.goalkeeper,alpha:0,duration:250,onComplete:()=>{this.goalkeeper.alpha=1,this.goalkeeper.setVisible(!1)}})}))):(this.goalkeeper.play("goalkeeperSaveCenterUpAnim"),this.tweens.add({targets:this.goalkeeper,y:this.goalkeeper.y-50,duration:300,yoyo:!0,ease:"Power2"}))}onGoal(t){console.log("GOAL! Score:",this.goalsScored);const e=1-Math.abs(t-this.net.x)/(.4*this.net.displayWidth),s=Math.round(5+5*e);this.totalScore+=s,this.updateScoreDisplay(),this.tweens.add({targets:this.gameBall,alpha:0,duration:300,ease:"Power2"}),this.tweens.add({targets:this.ballShadow,alpha:0,duration:200});const a=this.add.text(this.gameBall.x,this.gameBall.y,"+"+s,{fontFamily:"'Inter'",fontStyle:"800",fontSize:"60px",color:"#ffffff"}).setOrigin(.5).setDepth(100);this.tweens.add({targets:a,y:a.y-100,alpha:0,scale:1.5,duration:1e3,ease:"Power2",onComplete:()=>a.destroy()}),this.cameras.main.flash(200,255,255,255),this.time.delayedCall(1200,(()=>{this.resetShot()}))}onSave(){console.log("SAVED!");const t=this.gameBall.x<.5*this.canvasWidth?.5*-this.canvasWidth:1.5*this.canvasWidth;this.tweens.add({targets:this.gameBall,x:t,y:.1*this.canvasHeight,duration:600,ease:"Quad.easeOut"}),this.tweens.add({targets:this.ballShadow,alpha:0,duration:300}),this.time.delayedCall(1e3,(()=>{this.resetShot()}))}resetShot(){this.gameOver||(this.tweens.add({targets:this.goalkeeper,x:this.goalkeeperStartX,y:this.net.y+.22*this.net.displayHeight,duration:300,ease:"Power2",onComplete:()=>{this.goalkeeper.setVisible(!0),this.goalkeeper.play("goalkeeperIdleAnim")}}),this.tweens.add({targets:this.gameBall,x:this.ballStartX,y:this.ballStartY,scale:this.ballStartScale,duration:400,ease:"Power2",onComplete:()=>{this.gameBall.setDepth(20),this.ballShadow.x=this.gameBall.x,this.ballShadow.y=this.gameBall.y+.55*this.gameBall.displayHeight,this.ballShadow.scale=.5*this.scaleFactor,this.ballShadow.alpha=.6,this.gameBall.alpha=1,this.isShootReady=!0,this.startBallIdleBounce(),this.resetTutorialTimer(),this.startArrowAnimation()}}))}onPostHit(){console.log("HIT THE POST!");const t=this.gameBall.x<.5*this.canvasWidth?this.gameBall.x-150:this.gameBall.x+150;this.tweens.add({targets:this.gameBall,x:t,y:-100,duration:500,ease:"Quad.easeOut"}),this.tweens.add({targets:this.ballShadow,alpha:0,duration:200});const e=this.add.text(this.gameBall.x,this.gameBall.y-50,"MISS!",{fontFamily:"'Inter'",fontStyle:"800",fontSize:"50px",color:"#FFAA00",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setDepth(100);this.tweens.add({targets:e,y:e.y-80,alpha:0,scale:1.3,duration:800,ease:"Power2",onComplete:()=>e.destroy()}),this.time.delayedCall(1200,(()=>{this.resetShot()}))}onMiss(){console.log("MISSED!"),this.tweens.add({targets:this.gameBall,alpha:0,duration:200,ease:"Power2"}),this.tweens.add({targets:this.ballShadow,alpha:0,duration:200});const t=this.add.text(.5*this.canvasWidth,.4*this.canvasHeight,"MISS!",{fontFamily:"'Inter'",fontStyle:"800",fontSize:"60px",color:"#FF4444",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setDepth(100);this.tweens.add({targets:t,y:t.y-80,alpha:0,scale:1.3,duration:800,ease:"Power2",onComplete:()=>t.destroy()}),this.time.delayedCall(1200,(()=>{this.resetShot()}))}}class a extends t.Scene{constructor(){super("Preloader")}init(){const{canvasWidth:t,canvasHeight:s,scaleFactor:a,topMarginOffset:i,leftMarginOffsetPercentage:h,isMobileDevice:o,isIphoneDevice:n}=e(this);this.canvasWidth=t,this.canvasHeight=s,this.scaleFactor=a}createLoadingUI(){this.add.text(this.canvasWidth/2,.5*this.canvasHeight-50*this.scaleFactor,"LOADING...",{fontFamily:"Inter",fontSize:24*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#E10E14",strokeThickness:5}).setOrigin(.5);const t=.6*this.canvasWidth,e=25*this.scaleFactor,s=12*this.scaleFactor;this.loadingBarContainer=this.add.graphics(),this.loadingBarContainer.lineStyle(3*this.scaleFactor,14749204,1),this.loadingBarContainer.fillStyle(3355443,1),this.loadingBarContainer.fillRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,s),this.loadingBarContainer.strokeRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,s),this.loadingBarGraphics=this.add.graphics(),this.barWidth=t,this.barHeight=e,this.borderRadius=s,this.barX=this.canvasWidth/2-t/2,this.barY=this.canvasHeight/2-e/2,this.percentText=this.add.text(this.canvasWidth/2,this.canvasHeight/2+40*this.scaleFactor,"0%",{fontFamily:"Inter",fontSize:22*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#000000",strokeThickness:3}),this.percentText.setOrigin(.5)}preload(){this.load.on("progress",(t=>{}));let t=Math.floor(5*Math.random());t>=5&&(t=1),0===t&&(t=1);let e="op"+t;console.log(e," optionnn"),window.option=e,this.load.on("complete",(()=>{})),this.load.setPath(window.trackingPath),this.load.audio("bgMusic","bgm.mp3"),this.load.audio("reveal1","reveal1.mp3"),this.load.audio("reveal2","reveal2.mp3"),this.load.audio("package","package.mp3"),this.load.audio("win","win.mp3"),this.load.audio("click","click.mp3"),this.load.audio("conveyorbelt","conveyor.ogg"),this.load.audio("scan","scan.ogg"),this.load.image("akf","akf.png"),this.load.image("smile","smile.png"),this.load.image("overlay11","overlay11.png"),this.load.image("overlay22","overlay22.png"),this.load.image("overlay33","overlay33.png"),this.load.image("overlay44","overlay44.png"),this.load.image("sc1","sc11.png"),this.load.image("sc2","sc2.png"),this.load.image("sc3","sc3.png");for(var s=0;s<122;s++)this.load.image("conveyor"+s.toString().padStart(3,"0"),"belt/conveyor"+s.toString().padStart(3,"0")+".webp"),console.log("conveyor"+s.toString().padStart(3,"0"));this.load.image("exitbtn","exitbtn.png"),this.load.image("tryagain","tryagain.png"),this.load.image("btn1","btn1.png"),this.load.image("cta","cta.png"),this.load.image("item1","i1.png"),this.load.image("item2","i2.png"),this.load.image("item3","i3.png"),this.load.image("item4","i4.png"),this.load.image("item5","i5.png"),this.load.image("treat1","treat1.png"),this.load.image("treat2","treat2.png"),this.load.image("treat3","treat3.png"),this.load.image("treat4","treat4.png"),this.load.image("treat5","treat5.png"),this.load.image("product1","product1.png"),this.load.image("product2","product2.png"),this.load.image("product3","product3.png"),this.load.image("product4","product4.png"),this.load.image("product5","product5.png"),this.load.image("overlaybox","overlaybox.png"),this.load.image("overlaybox2","overlaybox2.png"),this.load.image("finalbox","finalbox.png"),this.load.image("select","select.png"),this.load.image("sparkle","Sparkle.png"),this.load.image("txt1","txt1.png"),this.load.image("txt2","txt2.png"),this.load.image("hand","hand.png")}create(){this.scene.start("MainMenu")}}const i={type:Phaser.CANVAS,width:960,height:1440,parent:"game-container",background:"transparent",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},fps:{target:60,forceSetTimeOut:!0},transparent:!0,scene:[a,s]};new Phaser.Game(i);
