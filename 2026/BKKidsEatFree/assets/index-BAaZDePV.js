import{p as t}from"./phaser-C2RWnc_5.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class e extends t.Scene{constructor(){super("Boot")}preload(){}create(){this.scene.start("Preloader")}}function s(t,e){const s=/Mobi|Android/i.test(navigator.userAgent),i=/iPhone/i.test(navigator.userAgent),a=window.innerWidth,r=window.innerHeight;let h,o;h=t.game.canvas.width,o=t.game.canvas.height;const n=document.getElementsByTagName("canvas")[0],l=Math.abs(parseFloat(n.style.marginTop||0))/a*h+(i?130:0),g=Math.abs(parseFloat(n.style.marginLeft||0))/r*o;let d=r/(a+2*g)*.85;return s?{canvasWidth:h,canvasHeight:o,scaleFactor:d,topMarginOffset:l,leftMarginOffsetPercentage:g,isMobileDevice:s,isIphoneDevice:i}:(d=1.4,{canvasWidth:h,canvasHeight:o,scaleFactor:d,topMarginOffset:0,leftMarginOffsetPercentage:0})}class i extends t.Scene{constructor(){super("MainMenu")}create(){const{canvasWidth:t,canvasHeight:e,scaleFactor1:i,topMarginOffset:a,leftMarginOffsetPercentage:r,isMobileDevice:h,isIphoneDevice:o}=s(this),n=1.4;this.bgMusic=this.sound.add("backgroundmp3",{volume:0,loop:!1}),this.sc=2,this.sc2=4,this.scaleFactor=n,this.canvasWidth=t,this.canvasHeight=e,this.clickBG=!1,this.bg=this.add.image(.5*t,.5*e,"bg3"),this.bg.setOrigin(.5).setDepth(160),this.bg.setScale(1.54),this.bg.alpha=1,this.bg2=this.add.image(.5*t,.5*e,"bg2"),this.bg2.setOrigin(.5).setDepth(160),this.bg2.setScale(1.54),this.bg2.alpha=0,this.tweens.add({targets:this.bg2,alpha:1,duration:800,delay:1800,ease:"Power2",onComplete:()=>{}}),this.logo1=this.add.image(.5*t,.5*e,"logo"),this.logo1.setOrigin(1,0).setDepth(160),this.logo1.setScale(.8*n),this.logo1.alpha=1,this.logo1.x=.5*t+.5*this.logo1.displayWidth,this.logo1.y=.5*e-.5*this.logo1.displayHeight,this.tweens.add({targets:this.logo1,x:t-.02*e,y:.02*e,scale:.35*n,duration:800,ease:"Power2",delay:1800}),this.progressBarBg=this.add.graphics(),this.progressBarBg.fillStyle(16777215,1),this.progressBarBg.fillRect(.5*t-200,.7*e-2,400,7).setDepth(200),this.progressBar=this.add.graphics(),this.progressBar.fillStyle(12990238,1),this.progressBar.fillRect(.5*t-200,.7*e-2,400,7).setDepth(200),this.progressBarWidth=400,this.tweens.add({targets:{progress:1},progress:0,duration:1500,ease:"Linear",delay:200,onUpdate:s=>{this.progressBar.clear(),this.progressBarWidth=400*s.getValue(),this.progressBar.fillStyle(12990238,1),this.progressBar.fillRect(.5*t-200,.7*e-2,this.progressBarWidth,7)},onComplete:()=>{this.progressBarBg.clear()}});const l={fontFamily:"FlameBold",fontSize:50*this.scaleFactor,fill:"#502314",align:"center"};this.subtext=this.add.text(.5*this.canvasWidth,.315*this.canvasHeight,"Catch your \nBK Favourites",l),this.subtext.setOrigin(.5).setDepth(200),this.subtext.alpha=0,this.tweens.add({targets:this.subtext,alpha:1,duration:800,delay:2400,ease:"Power2"}),this.taptoplay=this.add.image(t/2,1.3*e,"taptoplay"),this.taptoplay.setOrigin(.5),this.taptoplay.setScale(.7979999999999999).setDepth(200),this.taptoplay.alpha=0,this.tweens.add({targets:this.taptoplay,alpha:1,y:.925*this.canvasHeight,duration:800,delay:2400,ease:"Power2",onComplete:()=>{this.tweens.add({targets:this.taptoplay,scaleX:.84,scaleY:.84,duration:400,ease:"Power2",repeat:-1,yoyo:!0})}}),setTimeout((()=>{this.input.on("pointerdown",(()=>{this.onTapToPlay()}))}),2400),this.burgers=[];let g=0;const d=.5*t,c=.9*e,p=[{x:.45*-t,y:.65*-e,scale:.25,angle:0,depth:1,type:1},{x:.4*t+.08*t,y:.45*-e,scale:.3,angle:-20,depth:1,type:1},{x:.38*-t,y:.05*e,scale:.25,angle:0,depth:1,type:3},{x:.5*t,y:.08*e,scale:.28,angle:90,depth:1,type:1},{x:.4*t+.08*t,y:.1*-e,scale:.25,angle:20,depth:1,type:1},{x:.55*-t+.08*t,y:.125*-e,scale:.26,angle:-20,depth:1,type:1},{x:.15*-t+2.5*t,y:.05*e,scale:.29,angle:45,depth:1,type:1},{x:.1*-t+2.5*t,y:.05*e,scale:.29,angle:120,depth:1,type:1},{x:.12*-t+2.5*t,y:.05*e,scale:.29,angle:240,depth:1,type:1},{x:.1*-t+2.5*t,y:.05*e,scale:.32,angle:70,depth:1,type:1},{x:0*t+2.5*t,y:.05*e,scale:.32,angle:-100,depth:1,type:1},{x:.1*t+1.5*t,y:.15*e,scale:.32,angle:-30,depth:3,type:1}];g=6;for(let s=0;s<6;s++){const t=p[s],e=t.type,i=this.add.image(d+t.x,c+t.y,1==s?"fire":`burger${e}`);i.setOrigin(.5,1),i.setScale(n*t.scale*this.sc*2),i.setAngle(t.angle),i.alpha=0,i.depth=t.depth,this.burgers.push(i)}this.burgerbox=this.add.sprite(.5*this.canvasWidth,this.canvasHeight,"lilo2"),this.burgerbox.setOrigin(.5,1.2),this.burgerbox.setScale(.18*this.scaleFactor*this.sc2).setDepth(171),this.burgerbox.alpha=0}onTapToPlay(){this.bgMusic.play(),this.input.off("pointerdown"),this.fnfetchAPI(window.trackingType+window.bottomtext+"_StartPlayable"),this.isTransitioning||(this.isTransitioning=!0,this.tweens.add({targets:this.taptoplay,scaleX:1.2*this.taptoplay.scaleX*.6,scaleY:1.2*this.taptoplay.scaleY*.6,duration:100,yoyo:!0,onComplete:()=>{this.removeElementsInReverseOrder()}}))}addElementsagainInOrder(){this.burgers.slice().forEach(((t,e)=>{this.tweens.add({targets:t,alpha:1,y:t.y-50,duration:300,ease:"Power2",delay:50*e})}))}removeBurgers(){this.burgers.slice().reverse().forEach(((t,e)=>{this.tweens.add({targets:t,alpha:0,y:t.y+50,duration:100,ease:"Power2",delay:50*e})}))}removeElementsInReverseOrder(){this.removeBurgers();const t=50*this.burgers.length+100;this.tweens.add({targets:this.burgerbox,alpha:0,y:this.burgerbox.y-50,duration:300,ease:"Power2",delay:t,onComplete:()=>{}}),this.tweens.add({targets:this.taptoplay,alpha:0,y:this.taptoplay.y-50,duration:300,ease:"Power2",delay:t+150}),this.tweens.add({targets:this.subtext,alpha:0,y:this.subtext.y-50,duration:300,ease:"Power2",delay:t+300}),this.tweens.add({targets:this.bg2,alpha:0,duration:300,ease:"Power2",delay:t+300}),this.dialogBrown=this.add.image(.5*this.canvasWidth,1.5*this.canvasHeight,"dialogBrown").setScale(1.2*this.scaleFactor),this.dialogBrown.setOrigin(.5).setDepth(200),this.dialogBrown.alpha=1,this.tweens.add({targets:this.dialogBrown,alpha:1,y:.5*this.canvasHeight,duration:500,delay:150,ease:"Power2",onComplete:()=>{this.taptoplay.setDepth(201),this.taptoplay.setTexture("start"),this.tweens.add({targets:this.taptoplay,alpha:1,y:this.dialogBrown.y+this.dialogBrown.displayHeight/2-.8*this.taptoplay.displayHeight,duration:300,ease:"Power2",delay:250}),setTimeout((()=>{this.input.on("pointerdown",(()=>{this.input.off("pointerdown"),this.bg2.setTexture("bg"),this.tweens.add({targets:this.bg2,alpha:1,duration:300,ease:"Power2",delay:500});const t=this.dialogBrown,e=this.taptoplay;this.tweens.add({targets:[t,e],alpha:0,y:1.5*this.canvasHeight,duration:300,ease:"Power2",delay:250,onComplete:()=>{t&&t.destroy(),e&&e.destroy()}}),console.log("[MainMenu] fnstartGame called"),this.fnstartGame()}))}),500)}})}fnstartGame(){this.burgerbox.visible=!0,this.burgerbox.x=this.canvasWidth/2,this.burgerbox.setTexture("lilo2"),this.burgerbox.setScale(.28*this.scaleFactor*this.sc2/2),this.burgerbox.alpha=0,this.burgerbox.y=this.canvasHeight+this.burgerbox.displayHeight,this.score=0,this.gameActive=!0,this.firstItemSpawned=!1,this.fallingBurgers=[],this.tweens.add({targets:this.burgerbox,alpha:1,y:this.canvasHeight+.1*this.burgerbox.displayHeight,duration:200,ease:"Power2",onComplete:()=>{this.fnstartIt()}})}fnstartIt(){console.log("[MainMenu] fnstartIt called"),this.fnaddBoxUI(),this.gameTime=15;const t={fontFamily:"FlameBold",fontSize:40*this.scaleFactor,fill:"#502314",align:"center"};this.dragInstruction=this.add.text(.5*this.canvasWidth,.5*this.canvasHeight,"Drag the King Jr. box \nto collect the burgers",t),this.dragInstruction.setOrigin(.5).setDepth(140),this.dragInstruction.alpha=0,this.tweens.add({targets:[this.dragInstruction],alpha:1,duration:500,ease:"Power2",onComplete:()=>{this.time.delayedCall(2e3,(()=>{this.tweens.add({targets:[this.dragInstruction],alpha:0,duration:500,ease:"Power2"})}))}}),this.setupLiloMovement(),this.startSpawningBurgers()}fnconfetti(){if(this.gameActive=!1,this.burgerSpawnTimer&&this.burgerSpawnTimer.remove(),this.fnfetchAPI(window.trackingType+"PlayableComplete"),this.fallingBurgers&&this.fallingBurgers.length>0){for(let t=0;t<this.fallingBurgers.length;t++){const e=this.fallingBurgers[t];e&&e.active&&this.tweens.add({targets:e,alpha:0,scale:0,duration:300,ease:"Power2",onComplete:()=>{e.destroy()}})}this.fallingBurgers=[]}this.cameras.main.flash(500,255,255,0),this.score>=10&&this.initConfetti(),this.scaleFactor,this.dialogBrown=this.add.image(this.canvasWidth/2,1.5*this.canvasHeight,"dialogBrown2"),this.dialogBrown.setOrigin(.5).setDepth(200),this.dialogBrown.setScale(1.1*this.scaleFactor),this.tweens.add({targets:this.dialogBrown,y:.5*this.canvasHeight,duration:500,ease:"Power2",yoyo:!1,onComplete:()=>{this.tweens.add({targets:this.dialogBrown,y:1.5*this.canvasHeight,duration:500,ease:"Power2",yoyo:!1,delay:3e3,onComplete:()=>{this.fnFinalCTA()}})}})}fnaddBoxUI(){this.bgBox1=this.add.image(this.canvasWidth/2,.06*this.canvasHeight,"bgBox"),this.bgBox1.setOrigin(.5),this.bgBox1.setScale(1.2*this.scaleFactor).setDepth(250),this.bgBox1.alpha=1,this.bgBox1.x=.5*this.canvasWidth,this.bgBox2=this.add.image(2*-this.canvasWidth,.06*this.canvasHeight,"bgBox"),this.bgBox2.setOrigin(.5),this.bgBox2.setScale(.7*this.scaleFactor).setDepth(250),this.bgBox2.alpha=1,this.bgBox2.x=5*this.canvasWidth;const t={fontFamily:"FlameBold",fontSize:36*this.scaleFactor,fill:"#FFFFFF",align:"center",stroke:"#1F2A1A",strokeThickness:15};this.timeText=this.add.text(this.bgBox2.x,this.bgBox2.y-.1*this.bgBox2.displayHeight,"TIME",t),this.timeText.setOrigin(.5).setDepth(250);const e={fontFamily:"FlameBold",fontSize:36*this.scaleFactor,fill:"#FFFFFF",align:"center",stroke:"#1F2A1A",strokeThickness:15};this.scoreText=this.add.text(5*this.canvasWidth,.1*this.canvasHeight,"SCORE",e),this.scoreText.setOrigin(.5).setDepth(250);const s={fontFamily:"FlameRegular",fontSize:36*this.scaleFactor,fill:"#EFE1CC",align:"center"},i={fontFamily:"FlameBold",fontSize:48*this.scaleFactor,fill:"#EFFF17",align:"center",stroke:"#1F2A1A",strokeThickness:15};this.scoreValue=this.add.text(this.bgBox1.x,this.bgBox1.y+.01*this.bgBox1.displayHeight,"00 / 10",s),this.scoreValue.setOrigin(.5).setDepth(250),this.timeValue=this.add.text(this.bgBox2.x,this.bgBox2.y+.01*this.bgBox2.displayHeight,"00",i),this.timeValue.setOrigin(.5).setDepth(250)}updateGameTimer(){this.gameActive&&(this.gameTime--,this.timeValue&&this.timeValue.setText(this.gameTime.toString().padStart(2,"0")),this.gameTime)}fnFinalCTA(){if(this.bg.setTexture("bg4"),this.tweens.add({targets:this.bg2,alpha:0,duration:500,ease:"Power2",yoyo:!1,onComplete:()=>{this.bg2.destroy()}}),this.gameActive=!1,this.fnfetchAPI(window.trackingType+"OnFinalPage"),this.burgerSpawnTimer&&this.burgerSpawnTimer.remove(),this.fallingBurgers&&this.fallingBurgers.length>0){for(let t=0;t<this.fallingBurgers.length;t++){const e=this.fallingBurgers[t];e&&e.active&&this.tweens.add({targets:e,alpha:0,scale:0,duration:300,ease:"Power2",onComplete:()=>{e.destroy()}})}this.fallingBurgers=[]}this.burgerbox&&this.burgerbox.active&&this.tweens.add({targets:this.burgerbox,alpha:0,y:this.burgerbox.y+100,duration:500,ease:"Power2",onComplete:()=>{this.burgerbox.visible=!1}});const t=[this.bgBox1,this.bgBox2,this.timeText,this.timeValue,this.scoreText,this.scoreValue];this.tweens.add({targets:t,alpha:0,duration:400,ease:"Power2",onComplete:()=>{t.forEach((t=>{t&&t.active&&(t.visible=!1)}))}}),this.tweens.add({targets:this.logo,alpha:1,duration:0,ease:"Power2",onComplete:()=>{this.cta=this.add.image(.5*this.canvasWidth,.835*this.canvasHeight,"cta"),this.cta.setOrigin(.5),this.cta.setScale(.95*this.scaleFactor*1.4).setDepth(300),this.cta.alpha=0,this.tweens.add({targets:this.cta,alpha:1,duration:300,ease:"Power2",onComplete:()=>{this.tweens.add({targets:this.cta,scaleX:1.05*this.scaleFactor*1.4,scaleY:1.05*this.scaleFactor*1.4,duration:400,ease:"Power2",repeat:-1,yoyo:!0})}}),this.fullScreenInteractive2=this.add.zone(0,0,this.canvasWidth,this.canvasHeight),this.fullScreenInteractive2.setOrigin(0,0),this.fullScreenInteractive2.setInteractive({useHandCursor:!0}),this.fullScreenInteractive2.setDepth(160),this.fullScreenInteractive2.on("pointerdown",(()=>{window.open(window.landingPageUrl,"_blank")})),this.tweens.add({targets:this.logo,alpha:1,duration:300,ease:"Power2",onComplete:()=>{}})}})}onclickFinalCTA(){}fnCTAFinal(){this.fnfetchAPI(window.trackingType+window.bottomtext+"_OnFinalScreen"),this.cta=this.add.image(.5*this.canvasWidth,.8*this.canvasHeight,"cta"),this.cta.setOrigin(.5).setDepth(300),this.cta.setScale(1*this.scaleFactor),this.cta.alpha=0,this.tweens.add({targets:this.cta,alpha:1,duration:300,ease:"Power2",onComplete:()=>{this.tweens.add({targets:this.cta,scaleX:1.05*this.scaleFactor,scaleY:1.05*this.scaleFactor,duration:400,ease:"Power2",repeat:-1,yoyo:!0})}}),this.fullScreenInteractive2=this.add.zone(0,0,this.canvasWidth,this.canvasHeight),this.fullScreenInteractive2.setOrigin(0,0),this.fullScreenInteractive2.setInteractive({useHandCursor:!0}),this.fullScreenInteractive2.setDepth(160),this.fullScreenInteractive2.on("pointerdown",(()=>{window.open(window.landingPageUrl,"_blank")}))}startSpawningBurgers(){this.burgerSpawnTimer&&this.burgerSpawnTimer.remove(),this.events.off("update",this.updateBurgers,this),this.burgerGridState={lastUsedCells:[],maxCellHistory:4},this.burgerSpawnTimer=this.time.addEvent({delay:800,callback:this.spawnPineapple,callbackScope:this,loop:!0});const t=[1,5,3,7,0,4];for(let e=0;e<t.length;e++)this.time.delayedCall(200*e,(()=>{this.gameActive}));this.events.on("update",this.updateBurgers,this)}spawnPineappleInCell(t){if(!this.gameActive)return;t=Phaser.Math.Clamp(t,0,7),this.burgerGridState&&(this.burgerGridState.lastUsedCells.push(t),this.burgerGridState.lastUsedCells.length,this.burgerGridState.maxCellHistory);const e=this.canvasWidth/8;this.burgerbox.displayWidth,this.canvasWidth,this.burgerbox.displayWidth;const s=t*e+e/2;let i;if(Phaser.Math.Between(1,10)<=5)i=this.add.image(s,-100,"fire"),i.itemType="fire";else{let t;this.firstItemSpawned?t=4===this.score||8===this.score?3:Phaser.Math.Between(1,2):(t=1,this.firstItemSpawned=!0),i=this.add.image(s,-100,`burger${t}`),i.itemType=`burger${t}`}const a=Phaser.Math.FloatBetween(.3,.35)*this.scaleFactor*this.sc;i.setScale(1.25*a),i.setOrigin(.5,.5),i.setDepth(165),i.speed=15,i.rotation=Phaser.Math.FloatBetween(-30,30)*(Math.PI/180),i.spinSpeed=Phaser.Math.FloatBetween(-.01,.01),"fire"==i.itemType&&(i.setScale(1.5),i.rotation=0,i.spinSpeed=0),i.gridCell=t,this.fallingBurgers.push(i)}spawnPineapple(){if(!this.gameActive)return;let t;this.burgerbox.displayWidth,this.canvasWidth;let e=0;do{t=Phaser.Math.Between(1,6),e++}while(this.burgerGridState&&this.burgerGridState.lastUsedCells.includes(t)&&e<10);this.spawnPineappleInCell(t)}updateBurgers(){if(this.gameActive&&this.fallingBurgers){if(this.fallingBurgers.length>30){const t=this.fallingBurgers.length-30;for(let e=0;e<t;e++)this.fallingBurgers[e].destroy();this.fallingBurgers.splice(0,t)}for(let t=this.fallingBurgers.length-1;t>=0;t--){const e=this.fallingBurgers[t];e.y+=e.speed,e.spinSpeed&&(e.rotation+=e.spinSpeed),e.y>this.canvasHeight+100?(e.destroy(),this.fallingBurgers.splice(t,1)):(Math.floor(e.y/100),e.gridCell,e.y,this.checkCollision(e,this.graphics)&&this.applyPineappleHitEffect(e,t))}}}checkCollision(t,e){const s=t.getBounds(),i=new Phaser.Geom.Rectangle(s.x+.25*s.width,s.y+.25*s.height,.5*s.width,.5*s.height);let a;return a=e instanceof Phaser.GameObjects.Graphics?new Phaser.Geom.Rectangle(this.burgerbox.x-this.burgerbox.displayWidth/8,this.burgerbox.y-.6*this.burgerbox.displayHeight,.2*this.burgerbox.displayWidth,.1*this.burgerbox.displayHeight):e.getBounds(),Phaser.Geom.Rectangle.Overlaps(i,a)}applyPineappleHitEffect(t,e){if(t.isHit)return;t.isHit=!0,this.burgerbox.setAlpha(1),"fire"===t.itemType?(this.gameActive=!1,this.gameTime=0,this.cameras.main.flash(500,255,0,0),this.cameras.main.shake(500,.01),this.fnfetchAPI(window.trackingType+window.bottomtext+"_PlayableGameOver"),this.burgerSpawnTimer&&this.burgerSpawnTimer.remove(),this.time.delayedCall(1e3,(()=>{if(this.fallingBurgers&&this.fallingBurgers.length>0){for(let t=0;t<this.fallingBurgers.length;t++){const e=this.fallingBurgers[t];e&&e.active&&e.destroy()}this.fallingBurgers=[]}this.fnFinalCTA()}))):("burger3"===t.itemType?this.score+=5:this.score+=1,this.scoreValue&&this.scoreValue.setText(this.score.toString().padStart(2,"0")+" / 10"),this.score>=10&&this.fnconfetti());const s=this.burgerbox.y;if(this.tweens.add({targets:t,y:t.y-200,x:t.x+Phaser.Math.Between(-50,50),alpha:0,duration:200,ease:"Back.easeOut",onComplete:()=>{t.destroy()}}),this.fallingBurgers.splice(e,1),"fire"!==t.itemType){const e={fontFamily:"FlameBold",fontSize:80*this.scaleFactor,fill:(t.itemType,"#502214"),align:"center",stroke:"#EFE1CC",strokeThickness:10};let s;s="burger3"===t.itemType?"+5":"+1";const i=this.add.text(this.burgerbox.x,.8*this.canvasHeight,s,e);i.setOrigin(.5).setDepth(300),this.tweens.add({targets:i,y:i.y-.2*this.burgerbox.displayHeight,alpha:0,duration:1e3,ease:"Power2",onComplete:()=>{i.destroy()}})}this.tweens.add({targets:this.burgerbox,y:s+15,duration:120,ease:"Bounce.easeIn",onComplete:()=>{this.tweens.add({targets:this.burgerbox,y:s,duration:300,ease:"Elastic.easeOut",onComplete:()=>{}})}})}setupLiloMovement(){this.walkBobbing=!1,this.walkBobTime=0,this.walkBobBaseY=this.burgerbox.y,this.isDragging=!1,this.graphics=this.add.graphics(),this.graphics.setDepth(200),console.log("[MainMenu] Graphics hitbox initialized"),this.burgerbox.setInteractive({draggable:!0}),this.input.on("dragstart",((t,e)=>{e===this.burgerbox&&(this.isDragging=!0,this.walkBobbing=!0,this.walkBobTime=0)})),this.input.on("drag",((t,e,s,i)=>{if(e===this.burgerbox){const t=this.burgerbox.width*Math.abs(this.burgerbox.scaleX)*.1,i=this.canvasWidth-t;e.x=Phaser.Math.Clamp(s,t,i),this.walkBobTime+=.25;const a=2;e.y=this.walkBobBaseY+Math.sin(this.walkBobTime)*a;const r=this.canvasWidth/2,h=(e.x-r)/r,o=8;this.cameras.main.scrollX=h*o}})),this.input.on("dragend",((t,e)=>{e===this.burgerbox&&(this.isDragging=!1,this.walkBobbing=!1,this.burgerbox.y=this.walkBobBaseY,this.tweens.add({targets:this.cameras.main,scrollX:0,duration:200,ease:"Power2"}))})),this.events.on("update",this.updateLiloPosition,this)}updateLiloPosition(){this.burgerbox&&this.graphics&&(this.graphics.clear(),this.graphics.fillStyle(16711680,0),this.graphics.fillRect(this.burgerbox.x-this.burgerbox.displayWidth/8,this.burgerbox.y-.6*this.burgerbox.displayHeight,.2*this.burgerbox.displayWidth,.1*this.burgerbox.displayHeight)),!this.isDragging&&this.walkBobbing&&(this.walkBobbing=!1,this.burgerbox.y=this.walkBobBaseY)}animateBurgers(){this.burgers.forEach(((t,e)=>{t.x;const s=t.y,i=t.angle;t.y=s-200-100*Math.random(),t.angle=i+(Math.random()>.5?180:-180),this.tweens.add({targets:t,y:s,angle:i,duration:800+150*e,ease:"Bounce.easeOut",delay:120*e})}))}animateburgerbox(){const t=()=>{this.burgerbox.texture.key,this.burgerbox.setTexture("lilo2"),this.time.delayedCall(500,t)};t()}fnfetchAPI(t){fetch(t,{method:"GET"}).then((t=>console.log("Tracking sent:",t.status))).catch((t=>console.error("Tracking error:",t)))}initConfetti(){const t=document.getElementById("confetti-canvas");if(!t)return void console.error("Confetti canvas not found");const e=window.confetti.create(t,{resize:!0,useWorker:!0});e({particleCount:150,spread:100,origin:{y:.6},colors:["#502214","#F59F39","#EFE1CC"]}),setTimeout((()=>{e({particleCount:50,angle:60,spread:55,origin:{x:.1,y:.5},colors:["#F5EBDC","#D62201","#502214","#FFAA01"]}),setTimeout((()=>{e({particleCount:50,angle:120,spread:55,origin:{x:.9,y:.5},colors:["#005CA7","#F59F39","#D7EAFF"]})}),800)}),800)}}class a extends t.Scene{constructor(){super("Preloader")}init(){const{canvasWidth:t,canvasHeight:e,scaleFactor:i,topMarginOffset:a,leftMarginOffsetPercentage:r,isMobileDevice:h,isIphoneDevice:o}=s(this);this.canvasWidth=t,this.canvasHeight=e,this.scaleFactor=i}createLoadingUI(){this.add.text(this.canvasWidth/2,this.canvasHeight/2-50*this.scaleFactor,"LOADING...",{fontFamily:"FlameBold",fontSize:28*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#E10E14",strokeThickness:5}).setOrigin(.5);const t=.6*this.canvasWidth,e=25*this.scaleFactor,s=12*this.scaleFactor;this.loadingBarContainer=this.add.graphics(),this.loadingBarContainer.lineStyle(3*this.scaleFactor,14749204,1),this.loadingBarContainer.fillStyle(3355443,1),this.loadingBarContainer.fillRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,s),this.loadingBarContainer.strokeRoundedRect(this.canvasWidth/2-t/2,this.canvasHeight/2-e/2,t,e,s),this.loadingBarGraphics=this.add.graphics(),this.barWidth=t,this.barHeight=e,this.borderRadius=s,this.barX=this.canvasWidth/2-t/2,this.barY=this.canvasHeight/2-e/2,this.percentText=this.add.text(this.canvasWidth/2,this.canvasHeight/2+40*this.scaleFactor,"0%",{fontFamily:"BukaBird",fontSize:22*this.scaleFactor,color:"#FFFFFF",align:"center",stroke:"#000000",strokeThickness:3}),this.percentText.setOrigin(.5)}preload(){this.load.on("progress",(t=>{})),this.load.on("complete",(()=>{})),this.load.setPath(window.trackingPath),this.load.image("logo","logo.png"),this.load.image("bgBox","bgBox.png"),this.load.image("start","start.png"),this.load.image("cta","cta.png"),this.load.image("dialogBrown","dialogBrown.png"),this.load.image("dialogBrown2","dialogBrown2.png"),this.load.image("taptoplay","taptoplay.png"),this.load.image("lilo2","lilo2.png"),this.load.image("burger1","burger2.png"),this.load.image("burger2","burger2.png"),this.load.image("burger3","burger3.png"),this.load.image("fire","fire.png"),this.load.image("bg","bg.png"),this.load.image("bg2","bg2.png"),this.load.image("bg3","bg3.png"),this.load.image("bg4","bg4.png"),this.load.audio("backgroundmp3","background.mp3")}create(){this.scene.start("MainMenu")}}const r={type:Phaser.AUTO,width:960,height:1440,parent:"game-container",background:"transparent",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},fps:{target:60,forceSetTimeOut:!0},transparent:!0,scene:[e,a,i]};new Phaser.Game(r);
